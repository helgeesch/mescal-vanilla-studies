
<!doctype html>
<html lang="en" class="no-js">
  <head>
    
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width,initial-scale=1">
      
      
      
        <link rel="canonical" href="https://docs.mesqual.io/mescal-package-documentation/api_reference/energy_data_handling/area_accounting/area_variables/">
      
      
        <link rel="prev" href="../model_gen/">
      
      
        <link rel="next" href="../border_variables/">
      
      
      <link rel="icon" href="../../../../../assets/images/favicon.png">
      <meta name="generator" content="mkdocs-1.6.1, mkdocs-material-9.6.19">
    
    
      
        <title>Area Variables - MESCAL Suite Documentation</title>
      
    
    
      <link rel="stylesheet" href="../../../../../assets/stylesheets/main.7e37652d.min.css">
      
        
        <link rel="stylesheet" href="../../../../../assets/stylesheets/palette.06af60db.min.css">
      
      


    
    
      
    
    
      
        
        
        <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
        <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto:300,300i,400,400i,700,700i%7CRoboto+Mono:400,400i,700,700i&display=fallback">
        <style>:root{--md-text-font:"Roboto";--md-code-font:"Roboto Mono"}</style>
      
    
    
      <link rel="stylesheet" href="../../../../../assets/_mkdocstrings.css">
    
    <script>__md_scope=new URL("../../../../..",location),__md_hash=e=>[...e].reduce(((e,_)=>(e<<5)-e+_.charCodeAt(0)),0),__md_get=(e,_=localStorage,t=__md_scope)=>JSON.parse(_.getItem(t.pathname+"."+e)),__md_set=(e,_,t=localStorage,a=__md_scope)=>{try{t.setItem(a.pathname+"."+e,JSON.stringify(_))}catch(e){}}</script>
    
      

    
    
    
  </head>
  
  
    
    
    
    
    
    <body dir="ltr" data-md-color-scheme="default" data-md-color-primary="teal" data-md-color-accent="amber">
  
    
    <input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="__drawer" autocomplete="off">
    <input class="md-toggle" data-md-toggle="search" type="checkbox" id="__search" autocomplete="off">
    <label class="md-overlay" for="__drawer"></label>
    <div data-md-component="skip">
      
        
        <a href="#area-variable-accounting" class="md-skip">
          Skip to content
        </a>
      
    </div>
    <div data-md-component="announce">
      
    </div>
    
    
      

<header class="md-header" data-md-component="header">
  <nav class="md-header__inner md-grid" aria-label="Header">
    <a href="../../../../.." title="MESCAL Suite Documentation" class="md-header__button md-logo" aria-label="MESCAL Suite Documentation" data-md-component="logo">
      
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 8a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3 3 3 0 0 0 3 3m0 3.54C9.64 9.35 6.5 8 3 8v11c3.5 0 6.64 1.35 9 3.54 2.36-2.19 5.5-3.54 9-3.54V8c-3.5 0-6.64 1.35-9 3.54"/></svg>

    </a>
    <label class="md-header__button md-icon" for="__drawer">
      
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M3 6h18v2H3zm0 5h18v2H3zm0 5h18v2H3z"/></svg>
    </label>
    <div class="md-header__title" data-md-component="header-title">
      <div class="md-header__ellipsis">
        <div class="md-header__topic">
          <span class="md-ellipsis">
            MESCAL Suite Documentation
          </span>
        </div>
        <div class="md-header__topic" data-md-component="header-topic">
          <span class="md-ellipsis">
            
              Area Variables
            
          </span>
        </div>
      </div>
    </div>
    
      
    
    
    
    
      
      
        <label class="md-header__button md-icon" for="__search">
          
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.52 6.52 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5"/></svg>
        </label>
        <div class="md-search" data-md-component="search" role="dialog">
  <label class="md-search__overlay" for="__search"></label>
  <div class="md-search__inner" role="search">
    <form class="md-search__form" name="search">
      <input type="text" class="md-search__input" name="query" aria-label="Search" placeholder="Search" autocapitalize="off" autocorrect="off" autocomplete="off" spellcheck="false" data-md-component="search-query" required>
      <label class="md-search__icon md-icon" for="__search">
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.52 6.52 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5"/></svg>
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11z"/></svg>
      </label>
      <nav class="md-search__options" aria-label="Search">
        
        <button type="reset" class="md-search__icon md-icon" title="Clear" aria-label="Clear" tabindex="-1">
          
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z"/></svg>
        </button>
      </nav>
      
    </form>
    <div class="md-search__output">
      <div class="md-search__scrollwrap" tabindex="0" data-md-scrollfix>
        <div class="md-search-result" data-md-component="search-result">
          <div class="md-search-result__meta">
            Initializing search
          </div>
          <ol class="md-search-result__list" role="presentation"></ol>
        </div>
      </div>
    </div>
  </div>
</div>
      
    
    
      <div class="md-header__source">
        <a href="https://github.com/helgeesch/mescal-vanilla-studies/" title="Go to repository" class="md-source" data-md-component="source">
  <div class="md-source__icon md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><!--! Font Awesome Free 7.0.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2025 Fonticons, Inc.--><path fill="currentColor" d="M439.6 236.1 244 40.5c-5.4-5.5-12.8-8.5-20.4-8.5s-15 3-20.4 8.4L162.5 81l51.5 51.5c27.1-9.1 52.7 16.8 43.4 43.7l49.7 49.7c34.2-11.8 61.2 31 35.5 56.7-26.5 26.5-70.2-2.9-56-37.3L240.3 199v121.9c25.3 12.5 22.3 41.8 9.1 55-6.4 6.4-15.2 10.1-24.3 10.1s-17.8-3.6-24.3-10.1c-17.6-17.6-11.1-46.9 11.2-56v-123c-20.8-8.5-24.6-30.7-18.6-45L142.6 101 8.5 235.1C3 240.6 0 247.9 0 255.5s3 15 8.5 20.4l195.6 195.7c5.4 5.4 12.7 8.4 20.4 8.4s15-3 20.4-8.4l194.7-194.7c5.4-5.4 8.4-12.8 8.4-20.4s-3-15-8.4-20.4"/></svg>
  </div>
  <div class="md-source__repository">
    GitHub
  </div>
</a>
      </div>
    
  </nav>
  
</header>
    
    <div class="md-container" data-md-component="container">
      
      
        
          
            
<nav class="md-tabs" aria-label="Tabs" data-md-component="tabs">
  <div class="md-grid">
    <ul class="md-tabs__list">
      
        
  
  
  
  
    <li class="md-tabs__item">
      <a href="../../../../.." class="md-tabs__link">
        
  
  
    
  
  Home

      </a>
    </li>
  

      
        
  
  
  
    
  
  
    
    
      
  
  
  
    
  
  
    
    
      <li class="md-tabs__item md-tabs__item--active">
        <a href="../../../study_manager/" class="md-tabs__link">
          
  
  
  MESCAL API Reference

        </a>
      </li>
    
  

    
  

      
        
  
  
  
  
    
    
      
  
  
  
  
    
    
      <li class="md-tabs__item">
        <a href="../../../../../mescal-study-01/notebooks/mescal_101_study_manager_and_basic_fetching/" class="md-tabs__link">
          
  
  
  Studies & Examples

        </a>
      </li>
    
  

    
  

      
    </ul>
  </div>
</nav>
          
        
      
      <main class="md-main" data-md-component="main">
        <div class="md-main__inner md-grid">
          
            
              
              <div class="md-sidebar md-sidebar--primary" data-md-component="sidebar" data-md-type="navigation" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    


  


<nav class="md-nav md-nav--primary md-nav--lifted" aria-label="Navigation" data-md-level="0">
  <label class="md-nav__title" for="__drawer">
    <a href="../../../../.." title="MESCAL Suite Documentation" class="md-nav__button md-logo" aria-label="MESCAL Suite Documentation" data-md-component="logo">
      
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 8a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3 3 3 0 0 0 3 3m0 3.54C9.64 9.35 6.5 8 3 8v11c3.5 0 6.64 1.35 9 3.54 2.36-2.19 5.5-3.54 9-3.54V8c-3.5 0-6.64 1.35-9 3.54"/></svg>

    </a>
    MESCAL Suite Documentation
  </label>
  
    <div class="md-nav__source">
      <a href="https://github.com/helgeesch/mescal-vanilla-studies/" title="Go to repository" class="md-source" data-md-component="source">
  <div class="md-source__icon md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><!--! Font Awesome Free 7.0.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2025 Fonticons, Inc.--><path fill="currentColor" d="M439.6 236.1 244 40.5c-5.4-5.5-12.8-8.5-20.4-8.5s-15 3-20.4 8.4L162.5 81l51.5 51.5c27.1-9.1 52.7 16.8 43.4 43.7l49.7 49.7c34.2-11.8 61.2 31 35.5 56.7-26.5 26.5-70.2-2.9-56-37.3L240.3 199v121.9c25.3 12.5 22.3 41.8 9.1 55-6.4 6.4-15.2 10.1-24.3 10.1s-17.8-3.6-24.3-10.1c-17.6-17.6-11.1-46.9 11.2-56v-123c-20.8-8.5-24.6-30.7-18.6-45L142.6 101 8.5 235.1C3 240.6 0 247.9 0 255.5s3 15 8.5 20.4l195.6 195.7c5.4 5.4 12.7 8.4 20.4 8.4s15-3 20.4-8.4l194.7-194.7c5.4-5.4 8.4-12.8 8.4-20.4s-3-15-8.4-20.4"/></svg>
  </div>
  <div class="md-source__repository">
    GitHub
  </div>
</a>
    </div>
  
  <ul class="md-nav__list" data-md-scrollfix>
    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../../.." class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Home
    
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
    
  
  
  
    
    
    
    
      
        
        
      
      
        
      
    
    
    <li class="md-nav__item md-nav__item--active md-nav__item--section md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_2" checked>
        
          
          <label class="md-nav__link" for="__nav_2" id="__nav_2_label" tabindex="">
            
  
  
  <span class="md-ellipsis">
    MESCAL API Reference
    
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_2_label" aria-expanded="true">
          <label class="md-nav__title" for="__nav_2">
            <span class="md-nav__icon md-icon"></span>
            MESCAL API Reference
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    
    
    
    
      
      
        
          
          
        
      
    
    
    <li class="md-nav__item md-nav__item--section md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_2_1" >
        
          
          <label class="md-nav__link" for="__nav_2_1" id="__nav_2_1_label" tabindex="">
            
  
  
  <span class="md-ellipsis">
    Core
    
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_2_1_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_2_1">
            <span class="md-nav__icon md-icon"></span>
            Core
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../study_manager/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    StudyManager
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../datasets/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Datasets
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    
    
    
    
      
      
        
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_2_1_3" >
        
          
          <label class="md-nav__link" for="__nav_2_1_3" id="__nav_2_1_3_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    Flag System
    
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="3" aria-labelledby="__nav_2_1_3_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_2_1_3">
            <span class="md-nav__icon md-icon"></span>
            Flag System
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../flag/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Flag
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../flag_index/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    FlagIndex
    
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../units/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Units
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../validation/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Validation
    
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    
    
    
    
      
      
        
          
          
        
      
    
    
    <li class="md-nav__item md-nav__item--section md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_2_2" >
        
          
          <div class="md-nav__link md-nav__container">
            <a href="../../../visualization/" class="md-nav__link ">
              
  
  
  <span class="md-ellipsis">
    Visualization Modules
    
  </span>
  

            </a>
            
              
              <label class="md-nav__link " for="__nav_2_2" id="__nav_2_2_label" tabindex="">
                <span class="md-nav__icon md-icon"></span>
              </label>
            
          </div>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_2_2_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_2_2">
            <span class="md-nav__icon md-icon"></span>
            Visualization Modules
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../visualization/time_series_dashboard/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    TimeSeriesDashboard
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    
    
    
    
      
      
        
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_2_2_2" >
        
          
          <div class="md-nav__link md-nav__container">
            <a href="../../../visualization/folium_viz_system/" class="md-nav__link ">
              
  
  
  <span class="md-ellipsis">
    Folium Viz System
    
  </span>
  

            </a>
            
              
              <label class="md-nav__link " for="__nav_2_2_2" id="__nav_2_2_2_label" tabindex="0">
                <span class="md-nav__icon md-icon"></span>
              </label>
            
          </div>
        
        <nav class="md-nav" data-md-level="3" aria-labelledby="__nav_2_2_2_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_2_2_2">
            <span class="md-nav__icon md-icon"></span>
            Folium Viz System
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../visualization/folium_viz_system/areas/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Areas
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../visualization/folium_viz_system/circle_marker/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Circle Marker
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../visualization/folium_viz_system/text_overlay/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Text Overlay
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../visualization/folium_viz_system/lines/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Lines
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../visualization/folium_viz_system/line_text_overlay/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Line Text Overlay
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../visualization/folium_viz_system/arrow_icon/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Arrow Icon
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    
    
    
    
      
      
        
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_2_2_2_7" >
        
          
          <label class="md-nav__link" for="__nav_2_2_2_7" id="__nav_2_2_2_7_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    Base
    
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="4" aria-labelledby="__nav_2_2_2_7_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_2_2_2_7">
            <span class="md-nav__icon md-icon"></span>
            Base
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../visualization/folium_viz_system/system/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Abstract System
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../visualization/folium_viz_system/data_item/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Data Item
    
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../visualization/folium_viz_system/kpi_collection/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    KPI Collection Visualizer
    
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../visualization/folium_legend_system/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Folium Legend System
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../visualization/html_table/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    HTML Table
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../visualization/html_dashboard/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    HTML Dashboard
    
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
    
  
  
  
    
    
    
    
      
      
        
          
          
        
      
    
    
    <li class="md-nav__item md-nav__item--active md-nav__item--section md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_2_3" checked>
        
          
          <div class="md-nav__link md-nav__container">
            <a href="../../" class="md-nav__link ">
              
  
  
  <span class="md-ellipsis">
    Energy Data Handling
    
  </span>
  

            </a>
            
              
              <label class="md-nav__link " for="__nav_2_3" id="__nav_2_3_label" tabindex="">
                <span class="md-nav__icon md-icon"></span>
              </label>
            
          </div>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_2_3_label" aria-expanded="true">
          <label class="md-nav__title" for="__nav_2_3">
            <span class="md-nav__icon md-icon"></span>
            Energy Data Handling
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
    
  
  
  
    
    
    
    
      
      
        
      
    
    
    <li class="md-nav__item md-nav__item--active md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_2_3_1" checked>
        
          
          <div class="md-nav__link md-nav__container">
            <a href="../" class="md-nav__link ">
              
  
  
  <span class="md-ellipsis">
    Area Accounting
    
  </span>
  

            </a>
            
              
              <label class="md-nav__link " for="__nav_2_3_1" id="__nav_2_3_1_label" tabindex="0">
                <span class="md-nav__icon md-icon"></span>
              </label>
            
          </div>
        
        <nav class="md-nav" data-md-level="3" aria-labelledby="__nav_2_3_1_label" aria-expanded="true">
          <label class="md-nav__title" for="__nav_2_3_1">
            <span class="md-nav__icon md-icon"></span>
            Area Accounting
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../model_gen/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Area / Border Model Generators
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
    
  
  
  
    <li class="md-nav__item md-nav__item--active">
      
      <input class="md-nav__toggle md-toggle" type="checkbox" id="__toc">
      
      
        
      
      
        <label class="md-nav__link md-nav__link--active" for="__toc">
          
  
  
  <span class="md-ellipsis">
    Area Variables
    
  </span>
  

          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <a href="./" class="md-nav__link md-nav__link--active">
        
  
  
  <span class="md-ellipsis">
    Area Variables
    
  </span>
  

      </a>
      
        

<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#mescal.energy_data_handling.area_accounting.area_variable_price_calculator.AreaPriceCalculator" class="md-nav__link">
    <span class="md-ellipsis">
      AreaPriceCalculator
    </span>
  </a>
  
    <nav class="md-nav" aria-label="AreaPriceCalculator">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#mescal.energy_data_handling.area_accounting.area_variable_price_calculator.AreaPriceCalculator.calculate" class="md-nav__link">
    <span class="md-ellipsis">
      calculate
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#mescal.energy_data_handling.area_accounting.area_variable_sum_calculator.AreaSumCalculator" class="md-nav__link">
    <span class="md-ellipsis">
      AreaSumCalculator
    </span>
  </a>
  
    <nav class="md-nav" aria-label="AreaSumCalculator">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#mescal.energy_data_handling.area_accounting.area_variable_sum_calculator.AreaSumCalculator.calculate" class="md-nav__link">
    <span class="md-ellipsis">
      calculate
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#mescal.energy_data_handling.area_accounting.area_variable_base.AreaVariableCalculatorBase" class="md-nav__link">
    <span class="md-ellipsis">
      AreaVariableCalculatorBase
    </span>
  </a>
  
    <nav class="md-nav" aria-label="AreaVariableCalculatorBase">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#mescal.energy_data_handling.area_accounting.area_variable_base.AreaVariableCalculatorBase.__init__" class="md-nav__link">
    <span class="md-ellipsis">
      __init__
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#mescal.energy_data_handling.area_accounting.area_variable_base.AreaVariableCalculatorBase.get_area_nodes" class="md-nav__link">
    <span class="md-ellipsis">
      get_area_nodes
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#mescal.energy_data_handling.area_accounting.area_variable_base.AreaVariableCalculatorBase.calculate" class="md-nav__link">
    <span class="md-ellipsis">
      calculate
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#mescal.energy_data_handling.area_accounting.area_variable_base.ExampleSumCalculator" class="md-nav__link">
    <span class="md-ellipsis">
      ExampleSumCalculator
    </span>
  </a>
  
    <nav class="md-nav" aria-label="ExampleSumCalculator">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#mescal.energy_data_handling.area_accounting.area_variable_base.ExampleSumCalculator.calculate" class="md-nav__link">
    <span class="md-ellipsis">
      calculate
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
    </ul>
  
</nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../border_variables/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Border Variables
    
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    
    
    
    
      
      
        
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_2_3_2" >
        
          
          <div class="md-nav__link md-nav__container">
            <a href="../../model_handling/" class="md-nav__link ">
              
  
  
  <span class="md-ellipsis">
    Model Membership Handling
    
  </span>
  

            </a>
            
              
              <label class="md-nav__link " for="__nav_2_3_2" id="__nav_2_3_2_label" tabindex="0">
                <span class="md-nav__icon md-icon"></span>
              </label>
            
          </div>
        
        <nav class="md-nav" data-md-level="3" aria-labelledby="__nav_2_3_2_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_2_3_2">
            <span class="md-nav__icon md-icon"></span>
            Model Membership Handling
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../model_handling/property_enricher/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Property Enricher
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../model_handling/pairs_appender/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Pairs Appender
    
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    
    
    
    
      
      
        
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_2_3_3" >
        
          
          <div class="md-nav__link md-nav__container">
            <a href="../../variable_utils/" class="md-nav__link ">
              
  
  
  <span class="md-ellipsis">
    Variable Utils
    
  </span>
  

            </a>
            
              
              <label class="md-nav__link " for="__nav_2_3_3" id="__nav_2_3_3_label" tabindex="0">
                <span class="md-nav__icon md-icon"></span>
              </label>
            
          </div>
        
        <nav class="md-nav" data-md-level="3" aria-labelledby="__nav_2_3_3_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_2_3_3">
            <span class="md-nav__icon md-icon"></span>
            Variable Utils
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../variable_utils/in_common_aggs/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    In-common Aggregations
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../variable_utils/direction_aggs/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Up-/Down Directional Aggregations
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../variable_utils/congestion_rent/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Congestion Rent
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../variable_utils/regional_trade_balance/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Regional Trade Balance
    
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../granularity_modules/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Granularity Modules
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../network_lines_data/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Network Lines Data
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../time_series_gap_handling/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Time Series Gap Handling
    
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    
    
    
    
      
      
        
          
          
        
      
    
    
    <li class="md-nav__item md-nav__item--section md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_2_4" >
        
          
          <label class="md-nav__link" for="__nav_2_4" id="__nav_2_4_label" tabindex="">
            
  
  
  <span class="md-ellipsis">
    Utils
    
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_2_4_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_2_4">
            <span class="md-nav__icon md-icon"></span>
            Utils
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    
    
    
    
      
      
        
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_2_4_1" >
        
          
          <div class="md-nav__link md-nav__container">
            <a href="../../../utils/pandas_utils/" class="md-nav__link ">
              
  
  
  <span class="md-ellipsis">
    pandas_utils
    
  </span>
  

            </a>
            
              
              <label class="md-nav__link " for="__nav_2_4_1" id="__nav_2_4_1_label" tabindex="0">
                <span class="md-nav__icon md-icon"></span>
              </label>
            
          </div>
        
        <nav class="md-nav" data-md-level="3" aria-labelledby="__nav_2_4_1_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_2_4_1">
            <span class="md-nav__icon md-icon"></span>
            pandas_utils
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../utils/pandas_utils/flatten_df/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Flatten DF
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../utils/pandas_utils/pend_props/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Pend Properties
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../utils/pandas_utils/filter/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Filter by Model
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../utils/pandas_utils/xs_df/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    xs DF
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../utils/pandas_utils/sort_multiindex/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Sort MultiIndex
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../utils/pandas_utils/merge_multi_index_levels/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Merge MultiIndex Levels
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../utils/pandas_utils/set_new_column/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Set New Column in MultiIndex
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../utils/pandas_utils/combine_dfs.md" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Combine DFs
    
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    
    
    
    
      
      
        
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_2_4_2" >
        
          
          <div class="md-nav__link md-nav__container">
            <a href="../../../utils/plotly_utils/" class="md-nav__link ">
              
  
  
  <span class="md-ellipsis">
    plotly_utils
    
  </span>
  

            </a>
            
              
              <label class="md-nav__link " for="__nav_2_4_2" id="__nav_2_4_2_label" tabindex="0">
                <span class="md-nav__icon md-icon"></span>
              </label>
            
          </div>
        
        <nav class="md-nav" data-md-level="3" aria-labelledby="__nav_2_4_2_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_2_4_2">
            <span class="md-nav__icon md-icon"></span>
            plotly_utils
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../utils/plotly_utils/plotly_theme/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    PlotlyTheme
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../utils/plotly_utils/figure_utils/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    figure_utils
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../utils/plotly_utils/px_category_utils/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    px_category_utils
    
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
  
    
    
    
    
      
      
        
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_3" >
        
          
          <label class="md-nav__link" for="__nav_3" id="__nav_3_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    Studies & Examples
    
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_3_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_3">
            <span class="md-nav__icon md-icon"></span>
            Studies & Examples
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    
    
    
    
      
      
        
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_3_1" >
        
          
          <label class="md-nav__link" for="__nav_3_1" id="__nav_3_1_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    Intro to MESCAL
    
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_3_1_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_3_1">
            <span class="md-nav__icon md-icon"></span>
            Intro to MESCAL
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../../../mescal-study-01/notebooks/mescal_101_study_manager_and_basic_fetching/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    MESCAL 101: StudyManager and Dataset Fundamentals
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../../../mescal-study-01/notebooks/mescal_102_mastering_data_fetching/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    MESCAL 102: Advanced Data Fetching Techniques
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../../../mescal-study-01/notebooks/mescal_103_scenario_attributes/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    MESCAL 103: Scenario Attributes
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../../../mescal-study-01/notebooks/mescal_301_time_series_dashboard/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    MESCAL 301: Time Series Dashboard
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../../../mescal-study-01/notebooks/mescal_302_segmented_colormap/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    MESCAL 302: Segmented Colormap
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../../../mescal-study-01/notebooks/mescal_303_folium_model_df_map/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    MESCAL 401: Folium Model Data Visualization - Areas, Points, and Lines
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../../../mescal-study-01/notebooks/mescal_304_folium_area_kpi_map/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    MESCAL 402: Folium KPI Visualization System
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../../../mescal-study-01/notebooks/mescal_304_simple_area_kpi_map/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    MESCAL 303: Interactive Geospatial with Folium
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../../../mescal-study-01/notebooks/mescal_307_country_plotter_util/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    MESCAL 307: Country Plotter Utility Module
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../../../mescal-study-01/notebooks/mescal_308_html_dashboards/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    MESCAL 305: HTML Dashboard Utility
    
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
  </ul>
</nav>
                  </div>
                </div>
              </div>
            
            
              
              <div class="md-sidebar md-sidebar--secondary" data-md-component="sidebar" data-md-type="toc" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    

<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#mescal.energy_data_handling.area_accounting.area_variable_price_calculator.AreaPriceCalculator" class="md-nav__link">
    <span class="md-ellipsis">
      AreaPriceCalculator
    </span>
  </a>
  
    <nav class="md-nav" aria-label="AreaPriceCalculator">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#mescal.energy_data_handling.area_accounting.area_variable_price_calculator.AreaPriceCalculator.calculate" class="md-nav__link">
    <span class="md-ellipsis">
      calculate
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#mescal.energy_data_handling.area_accounting.area_variable_sum_calculator.AreaSumCalculator" class="md-nav__link">
    <span class="md-ellipsis">
      AreaSumCalculator
    </span>
  </a>
  
    <nav class="md-nav" aria-label="AreaSumCalculator">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#mescal.energy_data_handling.area_accounting.area_variable_sum_calculator.AreaSumCalculator.calculate" class="md-nav__link">
    <span class="md-ellipsis">
      calculate
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#mescal.energy_data_handling.area_accounting.area_variable_base.AreaVariableCalculatorBase" class="md-nav__link">
    <span class="md-ellipsis">
      AreaVariableCalculatorBase
    </span>
  </a>
  
    <nav class="md-nav" aria-label="AreaVariableCalculatorBase">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#mescal.energy_data_handling.area_accounting.area_variable_base.AreaVariableCalculatorBase.__init__" class="md-nav__link">
    <span class="md-ellipsis">
      __init__
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#mescal.energy_data_handling.area_accounting.area_variable_base.AreaVariableCalculatorBase.get_area_nodes" class="md-nav__link">
    <span class="md-ellipsis">
      get_area_nodes
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#mescal.energy_data_handling.area_accounting.area_variable_base.AreaVariableCalculatorBase.calculate" class="md-nav__link">
    <span class="md-ellipsis">
      calculate
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#mescal.energy_data_handling.area_accounting.area_variable_base.ExampleSumCalculator" class="md-nav__link">
    <span class="md-ellipsis">
      ExampleSumCalculator
    </span>
  </a>
  
    <nav class="md-nav" aria-label="ExampleSumCalculator">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#mescal.energy_data_handling.area_accounting.area_variable_base.ExampleSumCalculator.calculate" class="md-nav__link">
    <span class="md-ellipsis">
      calculate
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
    </ul>
  
</nav>
                  </div>
                </div>
              </div>
            
          
          
            <div class="md-content" data-md-component="content">
              <article class="md-content__inner md-typeset">
                
                  


  
  


<h1 id="area-variable-accounting">Area Variable Accounting<a class="headerlink" href="#area-variable-accounting" title="Permanent link">&para;</a></h1>


<div class="doc doc-object doc-module">




    <div class="doc doc-contents first">










  <div class="doc doc-children">









<div class="doc doc-object doc-class">



<h2 id="mescal.energy_data_handling.area_accounting.area_variable_price_calculator.AreaPriceCalculator" class="doc doc-heading">
<code class="doc-symbol doc-symbol-heading doc-symbol-class"></code>            <span class="doc doc-object-name doc-class-name">AreaPriceCalculator</span>


<a href="#mescal.energy_data_handling.area_accounting.area_variable_price_calculator.AreaPriceCalculator" class="headerlink" title="Permanent link">&para;</a></h2>


    <div class="doc doc-contents ">
            <p class="doc doc-class-bases">
              Bases: <code><a class="autorefs autorefs-internal" title="            AreaVariableCalculatorBase (mescal.energy_data_handling.area_accounting.area_variable_base.AreaVariableCalculatorBase)" href="#mescal.energy_data_handling.area_accounting.area_variable_base.AreaVariableCalculatorBase">AreaVariableCalculatorBase</a></code></p>


        <p>Calculates area-level prices from node prices using simple or weighted averaging.</p>
<p>This calculator aggregates node-level electricity prices to area-level (e.g., bidding zones,
countries) using either simple averaging or weighted averaging based on demand, supply, or
other energy quantities. It's particularly useful in energy market analysis where different
regions may have multiple price nodes that need to be consolidated into representative area
prices.</p>
<p>The class inherits from AreaVariableCalculatorBase and provides energy-aware price aggregation
that handles edge cases like zero weights and missing data appropriately.</p>
<p>Typical use cases:
- Aggregating nodal prices to bidding zone prices
- Creating country-level price indices from multiple market nodes
- Volume-weighted price calculations for regional analysis</p>


<p><span class="doc-section-title">Parameters:</span></p>
    <table>
      <thead>
        <tr>
          <th>Name</th>
          <th>Type</th>
          <th>Description</th>
          <th>Default</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                <code>node_model_df</code>
            </td>
            <td>
                  <code><span title="pandas.DataFrame">DataFrame</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>DataFrame with node-area mappings</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>area_column</code>
            </td>
            <td>
                  <code><span title="str">str</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Column name containing area identifiers</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
      </tbody>
    </table>
        <p>Example:</p>
<div class="highlight"><pre><span></span><code>&gt;&gt;&gt; import pandas as pd
&gt;&gt;&gt; import numpy as np
&gt;&gt;&gt;
&gt;&gt;&gt; # Node model with area mapping
&gt;&gt;&gt; node_model = pd.DataFrame({
...     &#39;bidding_zone&#39;: [&#39;DE_LU&#39;, &#39;DE_LU&#39;, &#39;FR&#39;, &#39;FR&#39;]
... }, index=[&#39;DE1&#39;, &#39;DE2&#39;, &#39;FR1&#39;, &#39;FR2&#39;])
&gt;&gt;&gt;
&gt;&gt;&gt; # Price calculator
&gt;&gt;&gt; calc = AreaPriceCalculator(node_model, &#39;bidding_zone&#39;)
&gt;&gt;&gt;
&gt;&gt;&gt; # Node prices
&gt;&gt;&gt; prices = pd.DataFrame({
...     &#39;DE1&#39;: [50.0, 45.0], &#39;DE2&#39;: [52.0, 47.0],
...     &#39;FR1&#39;: [55.0, 48.0], &#39;FR2&#39;: [53.0, 46.0]
... }, index=pd.date_range(&#39;2024-01-01&#39;, periods=2, freq=&#39;h&#39;))
&gt;&gt;&gt;
&gt;&gt;&gt; # Simple average
&gt;&gt;&gt; area_prices = calc.calculate(prices)
&gt;&gt;&gt; print(area_prices)
           bidding_zone  DE_LU FR
    datetime
    2024-01-01 00:00:00  51.0  54.0
    2024-01-01 01:00:00  46.0  47.0
</code></pre></div>








              <details class="quote">
                <summary>Source code in <code>submodules/mescal/mescal/energy_data_handling/area_accounting/area_variable_price_calculator.py</code></summary>
                <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">  7</span>
<span class="normal">  8</span>
<span class="normal">  9</span>
<span class="normal"> 10</span>
<span class="normal"> 11</span>
<span class="normal"> 12</span>
<span class="normal"> 13</span>
<span class="normal"> 14</span>
<span class="normal"> 15</span>
<span class="normal"> 16</span>
<span class="normal"> 17</span>
<span class="normal"> 18</span>
<span class="normal"> 19</span>
<span class="normal"> 20</span>
<span class="normal"> 21</span>
<span class="normal"> 22</span>
<span class="normal"> 23</span>
<span class="normal"> 24</span>
<span class="normal"> 25</span>
<span class="normal"> 26</span>
<span class="normal"> 27</span>
<span class="normal"> 28</span>
<span class="normal"> 29</span>
<span class="normal"> 30</span>
<span class="normal"> 31</span>
<span class="normal"> 32</span>
<span class="normal"> 33</span>
<span class="normal"> 34</span>
<span class="normal"> 35</span>
<span class="normal"> 36</span>
<span class="normal"> 37</span>
<span class="normal"> 38</span>
<span class="normal"> 39</span>
<span class="normal"> 40</span>
<span class="normal"> 41</span>
<span class="normal"> 42</span>
<span class="normal"> 43</span>
<span class="normal"> 44</span>
<span class="normal"> 45</span>
<span class="normal"> 46</span>
<span class="normal"> 47</span>
<span class="normal"> 48</span>
<span class="normal"> 49</span>
<span class="normal"> 50</span>
<span class="normal"> 51</span>
<span class="normal"> 52</span>
<span class="normal"> 53</span>
<span class="normal"> 54</span>
<span class="normal"> 55</span>
<span class="normal"> 56</span>
<span class="normal"> 57</span>
<span class="normal"> 58</span>
<span class="normal"> 59</span>
<span class="normal"> 60</span>
<span class="normal"> 61</span>
<span class="normal"> 62</span>
<span class="normal"> 63</span>
<span class="normal"> 64</span>
<span class="normal"> 65</span>
<span class="normal"> 66</span>
<span class="normal"> 67</span>
<span class="normal"> 68</span>
<span class="normal"> 69</span>
<span class="normal"> 70</span>
<span class="normal"> 71</span>
<span class="normal"> 72</span>
<span class="normal"> 73</span>
<span class="normal"> 74</span>
<span class="normal"> 75</span>
<span class="normal"> 76</span>
<span class="normal"> 77</span>
<span class="normal"> 78</span>
<span class="normal"> 79</span>
<span class="normal"> 80</span>
<span class="normal"> 81</span>
<span class="normal"> 82</span>
<span class="normal"> 83</span>
<span class="normal"> 84</span>
<span class="normal"> 85</span>
<span class="normal"> 86</span>
<span class="normal"> 87</span>
<span class="normal"> 88</span>
<span class="normal"> 89</span>
<span class="normal"> 90</span>
<span class="normal"> 91</span>
<span class="normal"> 92</span>
<span class="normal"> 93</span>
<span class="normal"> 94</span>
<span class="normal"> 95</span>
<span class="normal"> 96</span>
<span class="normal"> 97</span>
<span class="normal"> 98</span>
<span class="normal"> 99</span>
<span class="normal">100</span>
<span class="normal">101</span>
<span class="normal">102</span>
<span class="normal">103</span>
<span class="normal">104</span>
<span class="normal">105</span>
<span class="normal">106</span>
<span class="normal">107</span>
<span class="normal">108</span>
<span class="normal">109</span>
<span class="normal">110</span>
<span class="normal">111</span>
<span class="normal">112</span>
<span class="normal">113</span>
<span class="normal">114</span>
<span class="normal">115</span>
<span class="normal">116</span>
<span class="normal">117</span>
<span class="normal">118</span>
<span class="normal">119</span>
<span class="normal">120</span>
<span class="normal">121</span>
<span class="normal">122</span>
<span class="normal">123</span>
<span class="normal">124</span>
<span class="normal">125</span>
<span class="normal">126</span>
<span class="normal">127</span>
<span class="normal">128</span>
<span class="normal">129</span>
<span class="normal">130</span>
<span class="normal">131</span>
<span class="normal">132</span>
<span class="normal">133</span>
<span class="normal">134</span>
<span class="normal">135</span>
<span class="normal">136</span>
<span class="normal">137</span>
<span class="normal">138</span>
<span class="normal">139</span>
<span class="normal">140</span>
<span class="normal">141</span>
<span class="normal">142</span>
<span class="normal">143</span>
<span class="normal">144</span>
<span class="normal">145</span>
<span class="normal">146</span>
<span class="normal">147</span>
<span class="normal">148</span>
<span class="normal">149</span>
<span class="normal">150</span>
<span class="normal">151</span>
<span class="normal">152</span>
<span class="normal">153</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">class</span><span class="w"> </span><span class="nc">AreaPriceCalculator</span><span class="p">(</span><span class="n">AreaVariableCalculatorBase</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Calculates area-level prices from node prices using simple or weighted averaging.</span>

<span class="sd">    This calculator aggregates node-level electricity prices to area-level (e.g., bidding zones,</span>
<span class="sd">    countries) using either simple averaging or weighted averaging based on demand, supply, or</span>
<span class="sd">    other energy quantities. It&#39;s particularly useful in energy market analysis where different</span>
<span class="sd">    regions may have multiple price nodes that need to be consolidated into representative area</span>
<span class="sd">    prices.</span>

<span class="sd">    The class inherits from AreaVariableCalculatorBase and provides energy-aware price aggregation</span>
<span class="sd">    that handles edge cases like zero weights and missing data appropriately.</span>

<span class="sd">    Typical use cases:</span>
<span class="sd">    - Aggregating nodal prices to bidding zone prices</span>
<span class="sd">    - Creating country-level price indices from multiple market nodes</span>
<span class="sd">    - Volume-weighted price calculations for regional analysis</span>

<span class="sd">    Args:</span>
<span class="sd">        node_model_df: DataFrame with node-area mappings</span>
<span class="sd">        area_column: Column name containing area identifiers</span>

<span class="sd">    Example:</span>

<span class="sd">        &gt;&gt;&gt; import pandas as pd</span>
<span class="sd">        &gt;&gt;&gt; import numpy as np</span>
<span class="sd">        &gt;&gt;&gt;</span>
<span class="sd">        &gt;&gt;&gt; # Node model with area mapping</span>
<span class="sd">        &gt;&gt;&gt; node_model = pd.DataFrame({</span>
<span class="sd">        ...     &#39;bidding_zone&#39;: [&#39;DE_LU&#39;, &#39;DE_LU&#39;, &#39;FR&#39;, &#39;FR&#39;]</span>
<span class="sd">        ... }, index=[&#39;DE1&#39;, &#39;DE2&#39;, &#39;FR1&#39;, &#39;FR2&#39;])</span>
<span class="sd">        &gt;&gt;&gt;</span>
<span class="sd">        &gt;&gt;&gt; # Price calculator</span>
<span class="sd">        &gt;&gt;&gt; calc = AreaPriceCalculator(node_model, &#39;bidding_zone&#39;)</span>
<span class="sd">        &gt;&gt;&gt;</span>
<span class="sd">        &gt;&gt;&gt; # Node prices</span>
<span class="sd">        &gt;&gt;&gt; prices = pd.DataFrame({</span>
<span class="sd">        ...     &#39;DE1&#39;: [50.0, 45.0], &#39;DE2&#39;: [52.0, 47.0],</span>
<span class="sd">        ...     &#39;FR1&#39;: [55.0, 48.0], &#39;FR2&#39;: [53.0, 46.0]</span>
<span class="sd">        ... }, index=pd.date_range(&#39;2024-01-01&#39;, periods=2, freq=&#39;h&#39;))</span>
<span class="sd">        &gt;&gt;&gt;</span>
<span class="sd">        &gt;&gt;&gt; # Simple average</span>
<span class="sd">        &gt;&gt;&gt; area_prices = calc.calculate(prices)</span>
<span class="sd">        &gt;&gt;&gt; print(area_prices)</span>
<span class="sd">                   bidding_zone  DE_LU FR</span>
<span class="sd">            datetime</span>
<span class="sd">            2024-01-01 00:00:00  51.0  54.0</span>
<span class="sd">            2024-01-01 01:00:00  46.0  47.0</span>
<span class="sd">    &quot;&quot;&quot;</span>

    <span class="k">def</span><span class="w"> </span><span class="nf">calculate</span><span class="p">(</span>
        <span class="bp">self</span><span class="p">,</span>
        <span class="n">node_price_df</span><span class="p">:</span> <span class="n">pd</span><span class="o">.</span><span class="n">DataFrame</span><span class="p">,</span>
        <span class="n">weighting_factor_df</span><span class="p">:</span> <span class="n">pd</span><span class="o">.</span><span class="n">DataFrame</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
    <span class="p">)</span> <span class="o">-&gt;</span> <span class="n">pd</span><span class="o">.</span><span class="n">DataFrame</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Calculate area prices with different weighting options.</span>

<span class="sd">        Aggregates node-level prices to area-level using simple averaging (when no weights</span>
<span class="sd">        provided) or weighted averaging (when weights provided). The method handles missing</span>
<span class="sd">        nodes gracefully and ensures proper handling of zero weights and NaN values.</span>

<span class="sd">        In case you want to exclude certain nodes from the aggregation (e.g. because they</span>
<span class="sd">        are virtual or synthetic nodes), you can simply remove them from the node_price_df</span>
<span class="sd">        before passing it to this method.</span>

<span class="sd">        Args:</span>
<span class="sd">            node_price_df: Node-level price time series with datetime index and node columns.</span>
<span class="sd">                Values represent electricity prices in €/MWh or similar units.</span>
<span class="sd">            weighting_factor_df: Optional weighting factor DataFrame with same structure as</span>
<span class="sd">                node_price_df. Common weighting factors include:</span>
<span class="sd">                - node_demand_df: Demand-weighted prices</span>
<span class="sd">                - node_supply_df: Supply-weighted prices  </span>
<span class="sd">                - node_capacity_df: Capacity-weighted prices</span>
<span class="sd">                If None, simple arithmetic average is used.</span>

<span class="sd">        Returns:</span>
<span class="sd">            DataFrame with area-level prices. Index matches input time series, columns</span>
<span class="sd">            represent areas with prices in same units as input.</span>

<span class="sd">        Raises:</span>
<span class="sd">            ValueError: If node_price_df structure is invalid</span>
<span class="sd">            KeyError: If required nodes are missing from weighting_factor_df</span>

<span class="sd">        Example:</span>

<span class="sd">            &gt;&gt;&gt; # Simple average</span>
<span class="sd">            &gt;&gt;&gt; area_prices = calc.calculate(node_prices)</span>
<span class="sd">            &gt;&gt;&gt; </span>
<span class="sd">            &gt;&gt;&gt; # Demand-weighted average  </span>
<span class="sd">            &gt;&gt;&gt; weighted_prices = calc.calculate(node_prices, node_demand)</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_validate_node_data</span><span class="p">(</span><span class="n">node_price_df</span><span class="p">,</span> <span class="s1">&#39;node_price_df&#39;</span><span class="p">)</span>

        <span class="n">area_prices</span> <span class="o">=</span> <span class="p">{}</span>

        <span class="k">for</span> <span class="n">area</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">areas</span><span class="p">:</span>
            <span class="n">area_nodes</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_area_nodes</span><span class="p">(</span><span class="n">area</span><span class="p">)</span>
            <span class="n">area_nodes</span> <span class="o">=</span> <span class="p">[</span><span class="n">n</span> <span class="k">for</span> <span class="n">n</span> <span class="ow">in</span> <span class="n">area_nodes</span> <span class="k">if</span> <span class="n">n</span> <span class="ow">in</span> <span class="n">node_price_df</span><span class="o">.</span><span class="n">columns</span><span class="p">]</span>

            <span class="k">if</span> <span class="ow">not</span> <span class="n">area_nodes</span><span class="p">:</span>
                <span class="k">continue</span>

            <span class="n">prices</span> <span class="o">=</span> <span class="n">node_price_df</span><span class="p">[</span><span class="n">area_nodes</span><span class="p">]</span>

            <span class="k">if</span> <span class="n">weighting_factor_df</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
                <span class="n">area_prices</span><span class="p">[</span><span class="n">area</span><span class="p">]</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_calculate_simple_average</span><span class="p">(</span><span class="n">prices</span><span class="p">)</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">_validate_node_data</span><span class="p">(</span><span class="n">weighting_factor_df</span><span class="p">,</span> <span class="s1">&#39;weighting_factor_df&#39;</span><span class="p">)</span>
                <span class="n">area_prices</span><span class="p">[</span><span class="n">area</span><span class="p">]</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_calculate_weighted_average</span><span class="p">(</span>
                    <span class="n">prices</span><span class="p">,</span> <span class="n">weighting_factor_df</span><span class="p">[</span><span class="n">area_nodes</span><span class="p">]</span>
                <span class="p">)</span>

        <span class="n">result</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">DataFrame</span><span class="p">(</span><span class="n">area_prices</span><span class="p">)</span>
        <span class="n">result</span><span class="o">.</span><span class="n">columns</span><span class="o">.</span><span class="n">name</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">area_column</span>
        <span class="k">return</span> <span class="n">result</span>

    <span class="k">def</span><span class="w"> </span><span class="nf">_calculate_simple_average</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">prices</span><span class="p">:</span> <span class="n">pd</span><span class="o">.</span><span class="n">DataFrame</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">pd</span><span class="o">.</span><span class="n">Series</span><span class="p">:</span>
        <span class="k">return</span> <span class="n">prices</span><span class="o">.</span><span class="n">mean</span><span class="p">(</span><span class="n">axis</span><span class="o">=</span><span class="mi">1</span><span class="p">)</span>

    <span class="k">def</span><span class="w"> </span><span class="nf">_calculate_weighted_average</span><span class="p">(</span>
        <span class="bp">self</span><span class="p">,</span> 
        <span class="n">prices</span><span class="p">:</span> <span class="n">pd</span><span class="o">.</span><span class="n">DataFrame</span><span class="p">,</span> 
        <span class="n">weights</span><span class="p">:</span> <span class="n">pd</span><span class="o">.</span><span class="n">DataFrame</span>
    <span class="p">)</span> <span class="o">-&gt;</span> <span class="n">pd</span><span class="o">.</span><span class="n">Series</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Calculate weighted average of prices using provided weights.</span>

<span class="sd">        Computes volume-weighted or otherwise weighted prices while handling edge cases</span>
<span class="sd">        appropriately. When weights sum to zero, the method defaults to weight of 1 to</span>
<span class="sd">        avoid division errors. When all prices are NaN for a time period, the result</span>
<span class="sd">        is also NaN.</span>

<span class="sd">        Args:</span>
<span class="sd">            prices: DataFrame with price time series for nodes in an area</span>
<span class="sd">            weights: DataFrame with weighting factors (e.g., demand, supply) with same</span>
<span class="sd">                structure as prices. Must have non-negative values.</span>

<span class="sd">        Returns:</span>
<span class="sd">            Series with weighted average prices over time</span>

<span class="sd">        Note:</span>
<span class="sd">            This method assumes weights are extensive quantities (like energy volumes)</span>
<span class="sd">            while prices are intensive quantities (like €/MWh).</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">weighted_sum</span> <span class="o">=</span> <span class="p">(</span><span class="n">prices</span> <span class="o">*</span> <span class="n">weights</span><span class="p">)</span><span class="o">.</span><span class="n">sum</span><span class="p">(</span><span class="n">axis</span><span class="o">=</span><span class="mi">1</span><span class="p">)</span>
        <span class="n">weight_sum</span> <span class="o">=</span> <span class="n">weights</span><span class="o">.</span><span class="n">sum</span><span class="p">(</span><span class="n">axis</span><span class="o">=</span><span class="mi">1</span><span class="p">)</span><span class="o">.</span><span class="n">replace</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">1</span><span class="p">)</span>
        <span class="n">weighted_price</span> <span class="o">=</span> <span class="n">weighted_sum</span> <span class="o">/</span> <span class="n">weight_sum</span>
        <span class="n">weighted_price</span><span class="p">[</span><span class="n">prices</span><span class="o">.</span><span class="n">isna</span><span class="p">()</span><span class="o">.</span><span class="n">all</span><span class="p">(</span><span class="n">axis</span><span class="o">=</span><span class="mi">1</span><span class="p">)]</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">nan</span>
        <span class="k">return</span> <span class="n">weighted_price</span>
</code></pre></div></td></tr></table></div>
              </details>



  <div class="doc doc-children">










<div class="doc doc-object doc-function">


<h3 id="mescal.energy_data_handling.area_accounting.area_variable_price_calculator.AreaPriceCalculator.calculate" class="doc doc-heading">
<code class="doc-symbol doc-symbol-heading doc-symbol-method"></code>            <span class="doc doc-object-name doc-function-name">calculate</span>


<a href="#mescal.energy_data_handling.area_accounting.area_variable_price_calculator.AreaPriceCalculator.calculate" class="headerlink" title="Permanent link">&para;</a></h3>
<div class="doc-signature highlight"><pre><span></span><code><span class="nf">calculate</span><span class="p">(</span><span class="n">node_price_df</span><span class="p">:</span> <span class="n"><span title="pandas.DataFrame">DataFrame</span></span><span class="p">,</span> <span class="n">weighting_factor_df</span><span class="p">:</span> <span class="n"><span title="pandas.DataFrame">DataFrame</span></span> <span class="o">=</span> <span class="kc">None</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n"><span title="pandas.DataFrame">DataFrame</span></span>
</code></pre></div>

    <div class="doc doc-contents ">

        <p>Calculate area prices with different weighting options.</p>
<p>Aggregates node-level prices to area-level using simple averaging (when no weights
provided) or weighted averaging (when weights provided). The method handles missing
nodes gracefully and ensures proper handling of zero weights and NaN values.</p>
<p>In case you want to exclude certain nodes from the aggregation (e.g. because they
are virtual or synthetic nodes), you can simply remove them from the node_price_df
before passing it to this method.</p>


<p><span class="doc-section-title">Parameters:</span></p>
    <table>
      <thead>
        <tr>
          <th>Name</th>
          <th>Type</th>
          <th>Description</th>
          <th>Default</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                <code>node_price_df</code>
            </td>
            <td>
                  <code><span title="pandas.DataFrame">DataFrame</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Node-level price time series with datetime index and node columns.
Values represent electricity prices in €/MWh or similar units.</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>weighting_factor_df</code>
            </td>
            <td>
                  <code><span title="pandas.DataFrame">DataFrame</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Optional weighting factor DataFrame with same structure as
node_price_df. Common weighting factors include:
- node_demand_df: Demand-weighted prices
- node_supply_df: Supply-weighted prices<br />
- node_capacity_df: Capacity-weighted prices
If None, simple arithmetic average is used.</p>
              </div>
            </td>
            <td>
                  <code>None</code>
            </td>
          </tr>
      </tbody>
    </table>


    <p><span class="doc-section-title">Returns:</span></p>
    <table>
      <thead>
        <tr>
          <th>Type</th>
          <th>Description</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                  <code><span title="pandas.DataFrame">DataFrame</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>DataFrame with area-level prices. Index matches input time series, columns</p>
              </div>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                  <code><span title="pandas.DataFrame">DataFrame</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>represent areas with prices in same units as input.</p>
              </div>
            </td>
          </tr>
      </tbody>
    </table>


<p><span class="doc-section-title">Raises:</span></p>
    <table>
      <thead>
        <tr>
          <th>Type</th>
          <th>Description</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                  <code><span title="ValueError">ValueError</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>If node_price_df structure is invalid</p>
              </div>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                  <code><span title="KeyError">KeyError</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>If required nodes are missing from weighting_factor_df</p>
              </div>
            </td>
          </tr>
      </tbody>
    </table>
        <p>Example:</p>
<div class="highlight"><pre><span></span><code>&gt;&gt;&gt; # Simple average
&gt;&gt;&gt; area_prices = calc.calculate(node_prices)
&gt;&gt;&gt; 
&gt;&gt;&gt; # Demand-weighted average  
&gt;&gt;&gt; weighted_prices = calc.calculate(node_prices, node_demand)
</code></pre></div>


            <details class="quote">
              <summary>Source code in <code>submodules/mescal/mescal/energy_data_handling/area_accounting/area_variable_price_calculator.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"> 56</span>
<span class="normal"> 57</span>
<span class="normal"> 58</span>
<span class="normal"> 59</span>
<span class="normal"> 60</span>
<span class="normal"> 61</span>
<span class="normal"> 62</span>
<span class="normal"> 63</span>
<span class="normal"> 64</span>
<span class="normal"> 65</span>
<span class="normal"> 66</span>
<span class="normal"> 67</span>
<span class="normal"> 68</span>
<span class="normal"> 69</span>
<span class="normal"> 70</span>
<span class="normal"> 71</span>
<span class="normal"> 72</span>
<span class="normal"> 73</span>
<span class="normal"> 74</span>
<span class="normal"> 75</span>
<span class="normal"> 76</span>
<span class="normal"> 77</span>
<span class="normal"> 78</span>
<span class="normal"> 79</span>
<span class="normal"> 80</span>
<span class="normal"> 81</span>
<span class="normal"> 82</span>
<span class="normal"> 83</span>
<span class="normal"> 84</span>
<span class="normal"> 85</span>
<span class="normal"> 86</span>
<span class="normal"> 87</span>
<span class="normal"> 88</span>
<span class="normal"> 89</span>
<span class="normal"> 90</span>
<span class="normal"> 91</span>
<span class="normal"> 92</span>
<span class="normal"> 93</span>
<span class="normal"> 94</span>
<span class="normal"> 95</span>
<span class="normal"> 96</span>
<span class="normal"> 97</span>
<span class="normal"> 98</span>
<span class="normal"> 99</span>
<span class="normal">100</span>
<span class="normal">101</span>
<span class="normal">102</span>
<span class="normal">103</span>
<span class="normal">104</span>
<span class="normal">105</span>
<span class="normal">106</span>
<span class="normal">107</span>
<span class="normal">108</span>
<span class="normal">109</span>
<span class="normal">110</span>
<span class="normal">111</span>
<span class="normal">112</span>
<span class="normal">113</span>
<span class="normal">114</span>
<span class="normal">115</span>
<span class="normal">116</span>
<span class="normal">117</span>
<span class="normal">118</span>
<span class="normal">119</span>
<span class="normal">120</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span><span class="w"> </span><span class="nf">calculate</span><span class="p">(</span>
    <span class="bp">self</span><span class="p">,</span>
    <span class="n">node_price_df</span><span class="p">:</span> <span class="n">pd</span><span class="o">.</span><span class="n">DataFrame</span><span class="p">,</span>
    <span class="n">weighting_factor_df</span><span class="p">:</span> <span class="n">pd</span><span class="o">.</span><span class="n">DataFrame</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
<span class="p">)</span> <span class="o">-&gt;</span> <span class="n">pd</span><span class="o">.</span><span class="n">DataFrame</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Calculate area prices with different weighting options.</span>

<span class="sd">    Aggregates node-level prices to area-level using simple averaging (when no weights</span>
<span class="sd">    provided) or weighted averaging (when weights provided). The method handles missing</span>
<span class="sd">    nodes gracefully and ensures proper handling of zero weights and NaN values.</span>

<span class="sd">    In case you want to exclude certain nodes from the aggregation (e.g. because they</span>
<span class="sd">    are virtual or synthetic nodes), you can simply remove them from the node_price_df</span>
<span class="sd">    before passing it to this method.</span>

<span class="sd">    Args:</span>
<span class="sd">        node_price_df: Node-level price time series with datetime index and node columns.</span>
<span class="sd">            Values represent electricity prices in €/MWh or similar units.</span>
<span class="sd">        weighting_factor_df: Optional weighting factor DataFrame with same structure as</span>
<span class="sd">            node_price_df. Common weighting factors include:</span>
<span class="sd">            - node_demand_df: Demand-weighted prices</span>
<span class="sd">            - node_supply_df: Supply-weighted prices  </span>
<span class="sd">            - node_capacity_df: Capacity-weighted prices</span>
<span class="sd">            If None, simple arithmetic average is used.</span>

<span class="sd">    Returns:</span>
<span class="sd">        DataFrame with area-level prices. Index matches input time series, columns</span>
<span class="sd">        represent areas with prices in same units as input.</span>

<span class="sd">    Raises:</span>
<span class="sd">        ValueError: If node_price_df structure is invalid</span>
<span class="sd">        KeyError: If required nodes are missing from weighting_factor_df</span>

<span class="sd">    Example:</span>

<span class="sd">        &gt;&gt;&gt; # Simple average</span>
<span class="sd">        &gt;&gt;&gt; area_prices = calc.calculate(node_prices)</span>
<span class="sd">        &gt;&gt;&gt; </span>
<span class="sd">        &gt;&gt;&gt; # Demand-weighted average  </span>
<span class="sd">        &gt;&gt;&gt; weighted_prices = calc.calculate(node_prices, node_demand)</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">_validate_node_data</span><span class="p">(</span><span class="n">node_price_df</span><span class="p">,</span> <span class="s1">&#39;node_price_df&#39;</span><span class="p">)</span>

    <span class="n">area_prices</span> <span class="o">=</span> <span class="p">{}</span>

    <span class="k">for</span> <span class="n">area</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">areas</span><span class="p">:</span>
        <span class="n">area_nodes</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_area_nodes</span><span class="p">(</span><span class="n">area</span><span class="p">)</span>
        <span class="n">area_nodes</span> <span class="o">=</span> <span class="p">[</span><span class="n">n</span> <span class="k">for</span> <span class="n">n</span> <span class="ow">in</span> <span class="n">area_nodes</span> <span class="k">if</span> <span class="n">n</span> <span class="ow">in</span> <span class="n">node_price_df</span><span class="o">.</span><span class="n">columns</span><span class="p">]</span>

        <span class="k">if</span> <span class="ow">not</span> <span class="n">area_nodes</span><span class="p">:</span>
            <span class="k">continue</span>

        <span class="n">prices</span> <span class="o">=</span> <span class="n">node_price_df</span><span class="p">[</span><span class="n">area_nodes</span><span class="p">]</span>

        <span class="k">if</span> <span class="n">weighting_factor_df</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
            <span class="n">area_prices</span><span class="p">[</span><span class="n">area</span><span class="p">]</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_calculate_simple_average</span><span class="p">(</span><span class="n">prices</span><span class="p">)</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_validate_node_data</span><span class="p">(</span><span class="n">weighting_factor_df</span><span class="p">,</span> <span class="s1">&#39;weighting_factor_df&#39;</span><span class="p">)</span>
            <span class="n">area_prices</span><span class="p">[</span><span class="n">area</span><span class="p">]</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_calculate_weighted_average</span><span class="p">(</span>
                <span class="n">prices</span><span class="p">,</span> <span class="n">weighting_factor_df</span><span class="p">[</span><span class="n">area_nodes</span><span class="p">]</span>
            <span class="p">)</span>

    <span class="n">result</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">DataFrame</span><span class="p">(</span><span class="n">area_prices</span><span class="p">)</span>
    <span class="n">result</span><span class="o">.</span><span class="n">columns</span><span class="o">.</span><span class="n">name</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">area_column</span>
    <span class="k">return</span> <span class="n">result</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>



  </div>

    </div>

</div>




  </div>

    </div>

</div>

<div class="doc doc-object doc-module">




    <div class="doc doc-contents first">










  <div class="doc doc-children">









<div class="doc doc-object doc-class">



<h2 id="mescal.energy_data_handling.area_accounting.area_variable_sum_calculator.AreaSumCalculator" class="doc doc-heading">
<code class="doc-symbol doc-symbol-heading doc-symbol-class"></code>            <span class="doc doc-object-name doc-class-name">AreaSumCalculator</span>


<a href="#mescal.energy_data_handling.area_accounting.area_variable_sum_calculator.AreaSumCalculator" class="headerlink" title="Permanent link">&para;</a></h2>


    <div class="doc doc-contents ">
            <p class="doc doc-class-bases">
              Bases: <code><a class="autorefs autorefs-internal" title="            AreaVariableCalculatorBase (mescal.energy_data_handling.area_accounting.area_variable_base.AreaVariableCalculatorBase)" href="#mescal.energy_data_handling.area_accounting.area_variable_base.AreaVariableCalculatorBase">AreaVariableCalculatorBase</a></code></p>


        <p>General calculator for summing node-level extensive quantities to area level.</p>
<p>This calculator aggregates extensive quantities (values that scale with system size)
from node-level to area-level using summation. Typical use cases include power
generation, demand, energy volumes, reserves, and other additive quantities in
energy systems analysis.</p>
<p>Unlike intensive quantities (like prices), extensive quantities should be summed
when aggregating to higher geographic levels, making this calculator appropriate
for many physical quantities in energy modeling.</p>
<p>Inherits from AreaVariableCalculatorBase and provides the MESCAL framework's
standard approach for area-level aggregation of extensive variables.</p>


<p><span class="doc-section-title">Parameters:</span></p>
    <table>
      <thead>
        <tr>
          <th>Name</th>
          <th>Type</th>
          <th>Description</th>
          <th>Default</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                <code>node_model_df</code>
            </td>
            <td>
                  <code><span title="pandas.DataFrame">DataFrame</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>DataFrame mapping nodes to areas</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>area_column</code>
            </td>
            <td>
                  <code><span title="str">str</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Column name containing area identifiers</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
      </tbody>
    </table>
        <p>Example:</p>
<div class="highlight"><pre><span></span><code>&gt;&gt;&gt; import pandas as pd
&gt;&gt;&gt; import numpy as np
&gt;&gt;&gt;
&gt;&gt;&gt; # Node model
&gt;&gt;&gt; node_model = pd.DataFrame({
...     &#39;bidding_zone&#39;: [&#39;DE_LU&#39;, &#39;DE_LU&#39;, &#39;FR&#39;, &#39;FR&#39;]
... }, index=[&#39;DE1&#39;, &#39;DE2&#39;, &#39;FR1&#39;, &#39;FR2&#39;])
&gt;&gt;&gt;
&gt;&gt;&gt; # Sum calculator
&gt;&gt;&gt; calc = AreaSumCalculator(node_model, &#39;bidding_zone&#39;)
&gt;&gt;&gt; # Node generation data
&gt;&gt;&gt; generation = pd.DataFrame({
...     &#39;DE1&#39;: [800, 850], &#39;DE2&#39;: [750, 780],
...     &#39;FR1&#39;: [900, 920], &#39;FR2&#39;: [850, 870]
... }, index=pd.date_range(&#39;2024-01-01&#39;, periods=2, freq=&#39;h&#39;))
&gt;&gt;&gt;
&gt;&gt;&gt; # Sum to areas
&gt;&gt;&gt; area_generation = calc.calculate(generation)
&gt;&gt;&gt; print(area_generation)
    bidding_zone  DE_LU   FR
    2024-01-01 00:00:00  1550  1750
    2024-01-01 01:00:00  1630  1790
</code></pre></div>








              <details class="quote">
                <summary>Source code in <code>submodules/mescal/mescal/energy_data_handling/area_accounting/area_variable_sum_calculator.py</code></summary>
                <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"> 6</span>
<span class="normal"> 7</span>
<span class="normal"> 8</span>
<span class="normal"> 9</span>
<span class="normal">10</span>
<span class="normal">11</span>
<span class="normal">12</span>
<span class="normal">13</span>
<span class="normal">14</span>
<span class="normal">15</span>
<span class="normal">16</span>
<span class="normal">17</span>
<span class="normal">18</span>
<span class="normal">19</span>
<span class="normal">20</span>
<span class="normal">21</span>
<span class="normal">22</span>
<span class="normal">23</span>
<span class="normal">24</span>
<span class="normal">25</span>
<span class="normal">26</span>
<span class="normal">27</span>
<span class="normal">28</span>
<span class="normal">29</span>
<span class="normal">30</span>
<span class="normal">31</span>
<span class="normal">32</span>
<span class="normal">33</span>
<span class="normal">34</span>
<span class="normal">35</span>
<span class="normal">36</span>
<span class="normal">37</span>
<span class="normal">38</span>
<span class="normal">39</span>
<span class="normal">40</span>
<span class="normal">41</span>
<span class="normal">42</span>
<span class="normal">43</span>
<span class="normal">44</span>
<span class="normal">45</span>
<span class="normal">46</span>
<span class="normal">47</span>
<span class="normal">48</span>
<span class="normal">49</span>
<span class="normal">50</span>
<span class="normal">51</span>
<span class="normal">52</span>
<span class="normal">53</span>
<span class="normal">54</span>
<span class="normal">55</span>
<span class="normal">56</span>
<span class="normal">57</span>
<span class="normal">58</span>
<span class="normal">59</span>
<span class="normal">60</span>
<span class="normal">61</span>
<span class="normal">62</span>
<span class="normal">63</span>
<span class="normal">64</span>
<span class="normal">65</span>
<span class="normal">66</span>
<span class="normal">67</span>
<span class="normal">68</span>
<span class="normal">69</span>
<span class="normal">70</span>
<span class="normal">71</span>
<span class="normal">72</span>
<span class="normal">73</span>
<span class="normal">74</span>
<span class="normal">75</span>
<span class="normal">76</span>
<span class="normal">77</span>
<span class="normal">78</span>
<span class="normal">79</span>
<span class="normal">80</span>
<span class="normal">81</span>
<span class="normal">82</span>
<span class="normal">83</span>
<span class="normal">84</span>
<span class="normal">85</span>
<span class="normal">86</span>
<span class="normal">87</span>
<span class="normal">88</span>
<span class="normal">89</span>
<span class="normal">90</span>
<span class="normal">91</span>
<span class="normal">92</span>
<span class="normal">93</span>
<span class="normal">94</span>
<span class="normal">95</span>
<span class="normal">96</span>
<span class="normal">97</span>
<span class="normal">98</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">class</span><span class="w"> </span><span class="nc">AreaSumCalculator</span><span class="p">(</span><span class="n">AreaVariableCalculatorBase</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;General calculator for summing node-level extensive quantities to area level.</span>

<span class="sd">    This calculator aggregates extensive quantities (values that scale with system size)</span>
<span class="sd">    from node-level to area-level using summation. Typical use cases include power</span>
<span class="sd">    generation, demand, energy volumes, reserves, and other additive quantities in</span>
<span class="sd">    energy systems analysis.</span>

<span class="sd">    Unlike intensive quantities (like prices), extensive quantities should be summed</span>
<span class="sd">    when aggregating to higher geographic levels, making this calculator appropriate</span>
<span class="sd">    for many physical quantities in energy modeling.</span>

<span class="sd">    Inherits from AreaVariableCalculatorBase and provides the MESCAL framework&#39;s</span>
<span class="sd">    standard approach for area-level aggregation of extensive variables.</span>

<span class="sd">    Args:</span>
<span class="sd">        node_model_df: DataFrame mapping nodes to areas</span>
<span class="sd">        area_column: Column name containing area identifiers</span>

<span class="sd">    Example:</span>

<span class="sd">        &gt;&gt;&gt; import pandas as pd</span>
<span class="sd">        &gt;&gt;&gt; import numpy as np</span>
<span class="sd">        &gt;&gt;&gt;</span>
<span class="sd">        &gt;&gt;&gt; # Node model</span>
<span class="sd">        &gt;&gt;&gt; node_model = pd.DataFrame({</span>
<span class="sd">        ...     &#39;bidding_zone&#39;: [&#39;DE_LU&#39;, &#39;DE_LU&#39;, &#39;FR&#39;, &#39;FR&#39;]</span>
<span class="sd">        ... }, index=[&#39;DE1&#39;, &#39;DE2&#39;, &#39;FR1&#39;, &#39;FR2&#39;])</span>
<span class="sd">        &gt;&gt;&gt;</span>
<span class="sd">        &gt;&gt;&gt; # Sum calculator</span>
<span class="sd">        &gt;&gt;&gt; calc = AreaSumCalculator(node_model, &#39;bidding_zone&#39;)</span>
<span class="sd">        &gt;&gt;&gt; # Node generation data</span>
<span class="sd">        &gt;&gt;&gt; generation = pd.DataFrame({</span>
<span class="sd">        ...     &#39;DE1&#39;: [800, 850], &#39;DE2&#39;: [750, 780],</span>
<span class="sd">        ...     &#39;FR1&#39;: [900, 920], &#39;FR2&#39;: [850, 870]</span>
<span class="sd">        ... }, index=pd.date_range(&#39;2024-01-01&#39;, periods=2, freq=&#39;h&#39;))</span>
<span class="sd">        &gt;&gt;&gt;</span>
<span class="sd">        &gt;&gt;&gt; # Sum to areas</span>
<span class="sd">        &gt;&gt;&gt; area_generation = calc.calculate(generation)</span>
<span class="sd">        &gt;&gt;&gt; print(area_generation)</span>
<span class="sd">            bidding_zone  DE_LU   FR</span>
<span class="sd">            2024-01-01 00:00:00  1550  1750</span>
<span class="sd">            2024-01-01 01:00:00  1630  1790</span>
<span class="sd">    &quot;&quot;&quot;</span>

    <span class="k">def</span><span class="w"> </span><span class="nf">calculate</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">node_data_df</span><span class="p">:</span> <span class="n">pd</span><span class="o">.</span><span class="n">DataFrame</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">pd</span><span class="o">.</span><span class="n">DataFrame</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Calculate area sums from node-level extensive quantity data.</span>

<span class="sd">        Sums node-level values within each area to create area-level aggregates.</span>
<span class="sd">        This method is designed for extensive quantities where summation is the</span>
<span class="sd">        appropriate aggregation method (e.g., generation, demand, volumes).</span>

<span class="sd">        Missing nodes are handled gracefully - if a node exists in the node model</span>
<span class="sd">        but not in the data, it&#39;s simply ignored. Areas with no available nodes</span>
<span class="sd">        are omitted from the output.</span>

<span class="sd">        In case you want to exclude certain nodes from the aggregation (e.g. because</span>
<span class="sd">        they are virtual or synthetic nodes), you can simply remove them from the</span>
<span class="sd">        node_data_df before passing it to this method.</span>

<span class="sd">        Args:</span>
<span class="sd">            node_data_df: DataFrame with node-level time series data. Index should</span>
<span class="sd">                be datetime, columns should be node identifiers. Values represent</span>
<span class="sd">                extensive quantities (MW, MWh, etc.) that should be summed.</span>

<span class="sd">        Returns:</span>
<span class="sd">            DataFrame with area-level aggregated data. Index matches input time series,</span>
<span class="sd">            columns represent areas. Units are preserved from input data.</span>

<span class="sd">        Raises:</span>
<span class="sd">            ValueError: If node_data_df structure is invalid</span>

<span class="sd">        Example:</span>

<span class="sd">            &gt;&gt;&gt; # Sum generation across nodes</span>
<span class="sd">            &gt;&gt;&gt; area_generation = calc.calculate(node_generation_df)</span>
<span class="sd">            &gt;&gt;&gt;</span>
<span class="sd">            &gt;&gt;&gt; # Sum demand across nodes  </span>
<span class="sd">            &gt;&gt;&gt; area_demand = calc.calculate(node_demand_df)</span>
<span class="sd">        &quot;&quot;&quot;</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">_validate_node_data</span><span class="p">(</span><span class="n">node_data_df</span><span class="p">,</span> <span class="s1">&#39;node_data_df&#39;</span><span class="p">)</span>

        <span class="n">area_sums</span> <span class="o">=</span> <span class="p">{}</span>
        <span class="k">for</span> <span class="n">area</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">areas</span><span class="p">:</span>
            <span class="n">area_nodes</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_area_nodes</span><span class="p">(</span><span class="n">area</span><span class="p">)</span>
            <span class="n">area_nodes</span> <span class="o">=</span> <span class="p">[</span><span class="n">n</span> <span class="k">for</span> <span class="n">n</span> <span class="ow">in</span> <span class="n">area_nodes</span> <span class="k">if</span> <span class="n">n</span> <span class="ow">in</span> <span class="n">node_data_df</span><span class="o">.</span><span class="n">columns</span><span class="p">]</span>
            <span class="k">if</span> <span class="n">area_nodes</span><span class="p">:</span>
                <span class="n">area_sums</span><span class="p">[</span><span class="n">area</span><span class="p">]</span> <span class="o">=</span> <span class="n">node_data_df</span><span class="p">[</span><span class="n">area_nodes</span><span class="p">]</span><span class="o">.</span><span class="n">sum</span><span class="p">(</span><span class="n">axis</span><span class="o">=</span><span class="mi">1</span><span class="p">)</span>

        <span class="n">result</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">DataFrame</span><span class="p">(</span><span class="n">area_sums</span><span class="p">)</span>
        <span class="n">result</span><span class="o">.</span><span class="n">columns</span><span class="o">.</span><span class="n">name</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">area_column</span>
        <span class="k">return</span> <span class="n">result</span>
</code></pre></div></td></tr></table></div>
              </details>



  <div class="doc doc-children">










<div class="doc doc-object doc-function">


<h3 id="mescal.energy_data_handling.area_accounting.area_variable_sum_calculator.AreaSumCalculator.calculate" class="doc doc-heading">
<code class="doc-symbol doc-symbol-heading doc-symbol-method"></code>            <span class="doc doc-object-name doc-function-name">calculate</span>


<a href="#mescal.energy_data_handling.area_accounting.area_variable_sum_calculator.AreaSumCalculator.calculate" class="headerlink" title="Permanent link">&para;</a></h3>
<div class="doc-signature highlight"><pre><span></span><code><span class="nf">calculate</span><span class="p">(</span><span class="n">node_data_df</span><span class="p">:</span> <span class="n"><span title="pandas.DataFrame">DataFrame</span></span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n"><span title="pandas.DataFrame">DataFrame</span></span>
</code></pre></div>

    <div class="doc doc-contents ">

        <p>Calculate area sums from node-level extensive quantity data.</p>
<p>Sums node-level values within each area to create area-level aggregates.
This method is designed for extensive quantities where summation is the
appropriate aggregation method (e.g., generation, demand, volumes).</p>
<p>Missing nodes are handled gracefully - if a node exists in the node model
but not in the data, it's simply ignored. Areas with no available nodes
are omitted from the output.</p>
<p>In case you want to exclude certain nodes from the aggregation (e.g. because
they are virtual or synthetic nodes), you can simply remove them from the
node_data_df before passing it to this method.</p>


<p><span class="doc-section-title">Parameters:</span></p>
    <table>
      <thead>
        <tr>
          <th>Name</th>
          <th>Type</th>
          <th>Description</th>
          <th>Default</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                <code>node_data_df</code>
            </td>
            <td>
                  <code><span title="pandas.DataFrame">DataFrame</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>DataFrame with node-level time series data. Index should
be datetime, columns should be node identifiers. Values represent
extensive quantities (MW, MWh, etc.) that should be summed.</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
      </tbody>
    </table>


    <p><span class="doc-section-title">Returns:</span></p>
    <table>
      <thead>
        <tr>
          <th>Type</th>
          <th>Description</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                  <code><span title="pandas.DataFrame">DataFrame</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>DataFrame with area-level aggregated data. Index matches input time series,</p>
              </div>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                  <code><span title="pandas.DataFrame">DataFrame</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>columns represent areas. Units are preserved from input data.</p>
              </div>
            </td>
          </tr>
      </tbody>
    </table>


<p><span class="doc-section-title">Raises:</span></p>
    <table>
      <thead>
        <tr>
          <th>Type</th>
          <th>Description</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                  <code><span title="ValueError">ValueError</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>If node_data_df structure is invalid</p>
              </div>
            </td>
          </tr>
      </tbody>
    </table>
        <p>Example:</p>
<div class="highlight"><pre><span></span><code>&gt;&gt;&gt; # Sum generation across nodes
&gt;&gt;&gt; area_generation = calc.calculate(node_generation_df)
&gt;&gt;&gt;
&gt;&gt;&gt; # Sum demand across nodes  
&gt;&gt;&gt; area_demand = calc.calculate(node_demand_df)
</code></pre></div>


            <details class="quote">
              <summary>Source code in <code>submodules/mescal/mescal/energy_data_handling/area_accounting/area_variable_sum_calculator.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">51</span>
<span class="normal">52</span>
<span class="normal">53</span>
<span class="normal">54</span>
<span class="normal">55</span>
<span class="normal">56</span>
<span class="normal">57</span>
<span class="normal">58</span>
<span class="normal">59</span>
<span class="normal">60</span>
<span class="normal">61</span>
<span class="normal">62</span>
<span class="normal">63</span>
<span class="normal">64</span>
<span class="normal">65</span>
<span class="normal">66</span>
<span class="normal">67</span>
<span class="normal">68</span>
<span class="normal">69</span>
<span class="normal">70</span>
<span class="normal">71</span>
<span class="normal">72</span>
<span class="normal">73</span>
<span class="normal">74</span>
<span class="normal">75</span>
<span class="normal">76</span>
<span class="normal">77</span>
<span class="normal">78</span>
<span class="normal">79</span>
<span class="normal">80</span>
<span class="normal">81</span>
<span class="normal">82</span>
<span class="normal">83</span>
<span class="normal">84</span>
<span class="normal">85</span>
<span class="normal">86</span>
<span class="normal">87</span>
<span class="normal">88</span>
<span class="normal">89</span>
<span class="normal">90</span>
<span class="normal">91</span>
<span class="normal">92</span>
<span class="normal">93</span>
<span class="normal">94</span>
<span class="normal">95</span>
<span class="normal">96</span>
<span class="normal">97</span>
<span class="normal">98</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span><span class="w"> </span><span class="nf">calculate</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">node_data_df</span><span class="p">:</span> <span class="n">pd</span><span class="o">.</span><span class="n">DataFrame</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">pd</span><span class="o">.</span><span class="n">DataFrame</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Calculate area sums from node-level extensive quantity data.</span>

<span class="sd">    Sums node-level values within each area to create area-level aggregates.</span>
<span class="sd">    This method is designed for extensive quantities where summation is the</span>
<span class="sd">    appropriate aggregation method (e.g., generation, demand, volumes).</span>

<span class="sd">    Missing nodes are handled gracefully - if a node exists in the node model</span>
<span class="sd">    but not in the data, it&#39;s simply ignored. Areas with no available nodes</span>
<span class="sd">    are omitted from the output.</span>

<span class="sd">    In case you want to exclude certain nodes from the aggregation (e.g. because</span>
<span class="sd">    they are virtual or synthetic nodes), you can simply remove them from the</span>
<span class="sd">    node_data_df before passing it to this method.</span>

<span class="sd">    Args:</span>
<span class="sd">        node_data_df: DataFrame with node-level time series data. Index should</span>
<span class="sd">            be datetime, columns should be node identifiers. Values represent</span>
<span class="sd">            extensive quantities (MW, MWh, etc.) that should be summed.</span>

<span class="sd">    Returns:</span>
<span class="sd">        DataFrame with area-level aggregated data. Index matches input time series,</span>
<span class="sd">        columns represent areas. Units are preserved from input data.</span>

<span class="sd">    Raises:</span>
<span class="sd">        ValueError: If node_data_df structure is invalid</span>

<span class="sd">    Example:</span>

<span class="sd">        &gt;&gt;&gt; # Sum generation across nodes</span>
<span class="sd">        &gt;&gt;&gt; area_generation = calc.calculate(node_generation_df)</span>
<span class="sd">        &gt;&gt;&gt;</span>
<span class="sd">        &gt;&gt;&gt; # Sum demand across nodes  </span>
<span class="sd">        &gt;&gt;&gt; area_demand = calc.calculate(node_demand_df)</span>
<span class="sd">    &quot;&quot;&quot;</span>

    <span class="bp">self</span><span class="o">.</span><span class="n">_validate_node_data</span><span class="p">(</span><span class="n">node_data_df</span><span class="p">,</span> <span class="s1">&#39;node_data_df&#39;</span><span class="p">)</span>

    <span class="n">area_sums</span> <span class="o">=</span> <span class="p">{}</span>
    <span class="k">for</span> <span class="n">area</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">areas</span><span class="p">:</span>
        <span class="n">area_nodes</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_area_nodes</span><span class="p">(</span><span class="n">area</span><span class="p">)</span>
        <span class="n">area_nodes</span> <span class="o">=</span> <span class="p">[</span><span class="n">n</span> <span class="k">for</span> <span class="n">n</span> <span class="ow">in</span> <span class="n">area_nodes</span> <span class="k">if</span> <span class="n">n</span> <span class="ow">in</span> <span class="n">node_data_df</span><span class="o">.</span><span class="n">columns</span><span class="p">]</span>
        <span class="k">if</span> <span class="n">area_nodes</span><span class="p">:</span>
            <span class="n">area_sums</span><span class="p">[</span><span class="n">area</span><span class="p">]</span> <span class="o">=</span> <span class="n">node_data_df</span><span class="p">[</span><span class="n">area_nodes</span><span class="p">]</span><span class="o">.</span><span class="n">sum</span><span class="p">(</span><span class="n">axis</span><span class="o">=</span><span class="mi">1</span><span class="p">)</span>

    <span class="n">result</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">DataFrame</span><span class="p">(</span><span class="n">area_sums</span><span class="p">)</span>
    <span class="n">result</span><span class="o">.</span><span class="n">columns</span><span class="o">.</span><span class="n">name</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">area_column</span>
    <span class="k">return</span> <span class="n">result</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>



  </div>

    </div>

</div>




  </div>

    </div>

</div>

<div class="doc doc-object doc-module">




    <div class="doc doc-contents first">










  <div class="doc doc-children">









<div class="doc doc-object doc-class">



<h2 id="mescal.energy_data_handling.area_accounting.area_variable_base.AreaVariableCalculatorBase" class="doc doc-heading">
<code class="doc-symbol doc-symbol-heading doc-symbol-class"></code>            <span class="doc doc-object-name doc-class-name">AreaVariableCalculatorBase</span>


<a href="#mescal.energy_data_handling.area_accounting.area_variable_base.AreaVariableCalculatorBase" class="headerlink" title="Permanent link">&para;</a></h2>


    <div class="doc doc-contents ">
            <p class="doc doc-class-bases">
              Bases: <code><span title="abc.ABC">ABC</span></code></p>


        <p>Abstract base class for calculating energy variables aggregated at area level.</p>
<p>This base class provides common functionality for aggregating node-level energy data
(such as generation, demand, prices) to higher-level areas (countries, bidding zones,
market areas). It handles the mapping between nodes and areas and provides validation
and utility methods for area-based calculations.</p>
<p>The class is designed to be subclassed for specific variable types, with each subclass
implementing its own calculation logic while leveraging the common area mapping and
validation functionality provided here.</p>
<p>Energy market context:
In electricity markets, many variables are naturally defined at the nodal level 
(generators, loads, prices) but need to be aggregated to market or geographical
areas for analysis, reporting, and trading. This aggregation must handle missing
data, different node counts per area, and preserve energy-specific semantics.</p>


<p><span class="doc-section-title">Parameters:</span></p>
    <table>
      <thead>
        <tr>
          <th>Name</th>
          <th>Type</th>
          <th>Description</th>
          <th>Default</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                <code>node_model_df</code>
            </td>
            <td>
                  <code><span title="pandas.DataFrame">DataFrame</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>DataFrame containing node information with area assignments.
Index should be node identifiers, must contain the specified area_column.</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>area_column</code>
            </td>
            <td>
                  <code><span title="str">str</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Name of the column in node_model_df that contains area assignments.
Each node should be assigned to exactly one area (NaN values are allowed).</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
      </tbody>
    </table>


<p><span class="doc-section-title">Attributes:</span></p>
    <table>
      <thead>
        <tr>
          <th>Name</th>
          <th>Type</th>
          <th>Description</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td><code><span title="mescal.energy_data_handling.area_accounting.area_variable_base.AreaVariableCalculatorBase.node_model_df">node_model_df</span></code></td>
            <td>
            </td>
            <td>
              <div class="doc-md-description">
                <p>The input node model DataFrame</p>
              </div>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td><code><span title="mescal.energy_data_handling.area_accounting.area_variable_base.AreaVariableCalculatorBase.area_column">area_column</span></code></td>
            <td>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Name of the area assignment column</p>
              </div>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td><code><span title="mescal.energy_data_handling.area_accounting.area_variable_base.AreaVariableCalculatorBase.node_to_area_map">node_to_area_map</span></code></td>
            <td>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Dictionary mapping node IDs to area names</p>
              </div>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td><code><span title="mescal.energy_data_handling.area_accounting.area_variable_base.AreaVariableCalculatorBase.areas">areas</span></code></td>
            <td>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Sorted list of unique area names (excluding NaN)</p>
              </div>
            </td>
          </tr>
      </tbody>
    </table>


<p><span class="doc-section-title">Raises:</span></p>
    <table>
      <thead>
        <tr>
          <th>Type</th>
          <th>Description</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                  <code><span title="ValueError">ValueError</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>If area_column is not found in node_model_df</p>
              </div>
            </td>
          </tr>
      </tbody>
    </table>
        <p>Example:</p>
<div class="highlight"><pre><span></span><code>&gt;&gt;&gt; import pandas as pd
&gt;&gt;&gt; # Node model with area assignments
&gt;&gt;&gt; node_model = pd.DataFrame({
...     &#39;country&#39;: [&#39;DE&#39;, &#39;DE&#39;, &#39;FR&#39;, &#39;FR&#39;, &#39;BE&#39;],
...     &#39;voltage&#39;: [380, 220, 380, 220, 380]
... }, index=[&#39;DE1&#39;, &#39;DE2&#39;, &#39;FR1&#39;, &#39;FR2&#39;, &#39;BE1&#39;])
&gt;&gt;&gt; 
&gt;&gt;&gt; # Subclass implementation
&gt;&gt;&gt; class MyAreaCalculator(AreaVariableCalculatorBase):
...     def calculate(self, **kwargs):
...         return pd.DataFrame()  # Implementation here
&gt;&gt;&gt; 
&gt;&gt;&gt; calculator = MyAreaCalculator(node_model, &#39;country&#39;)
&gt;&gt;&gt; print(calculator.areas)  # [&#39;BE&#39;, &#39;DE&#39;, &#39;FR&#39;]
&gt;&gt;&gt; print(calculator.get_area_nodes(&#39;DE&#39;))  # [&#39;DE1&#39;, &#39;DE2&#39;]
</code></pre></div>








              <details class="quote">
                <summary>Source code in <code>submodules/mescal/mescal/energy_data_handling/area_accounting/area_variable_base.py</code></summary>
                <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">  9</span>
<span class="normal"> 10</span>
<span class="normal"> 11</span>
<span class="normal"> 12</span>
<span class="normal"> 13</span>
<span class="normal"> 14</span>
<span class="normal"> 15</span>
<span class="normal"> 16</span>
<span class="normal"> 17</span>
<span class="normal"> 18</span>
<span class="normal"> 19</span>
<span class="normal"> 20</span>
<span class="normal"> 21</span>
<span class="normal"> 22</span>
<span class="normal"> 23</span>
<span class="normal"> 24</span>
<span class="normal"> 25</span>
<span class="normal"> 26</span>
<span class="normal"> 27</span>
<span class="normal"> 28</span>
<span class="normal"> 29</span>
<span class="normal"> 30</span>
<span class="normal"> 31</span>
<span class="normal"> 32</span>
<span class="normal"> 33</span>
<span class="normal"> 34</span>
<span class="normal"> 35</span>
<span class="normal"> 36</span>
<span class="normal"> 37</span>
<span class="normal"> 38</span>
<span class="normal"> 39</span>
<span class="normal"> 40</span>
<span class="normal"> 41</span>
<span class="normal"> 42</span>
<span class="normal"> 43</span>
<span class="normal"> 44</span>
<span class="normal"> 45</span>
<span class="normal"> 46</span>
<span class="normal"> 47</span>
<span class="normal"> 48</span>
<span class="normal"> 49</span>
<span class="normal"> 50</span>
<span class="normal"> 51</span>
<span class="normal"> 52</span>
<span class="normal"> 53</span>
<span class="normal"> 54</span>
<span class="normal"> 55</span>
<span class="normal"> 56</span>
<span class="normal"> 57</span>
<span class="normal"> 58</span>
<span class="normal"> 59</span>
<span class="normal"> 60</span>
<span class="normal"> 61</span>
<span class="normal"> 62</span>
<span class="normal"> 63</span>
<span class="normal"> 64</span>
<span class="normal"> 65</span>
<span class="normal"> 66</span>
<span class="normal"> 67</span>
<span class="normal"> 68</span>
<span class="normal"> 69</span>
<span class="normal"> 70</span>
<span class="normal"> 71</span>
<span class="normal"> 72</span>
<span class="normal"> 73</span>
<span class="normal"> 74</span>
<span class="normal"> 75</span>
<span class="normal"> 76</span>
<span class="normal"> 77</span>
<span class="normal"> 78</span>
<span class="normal"> 79</span>
<span class="normal"> 80</span>
<span class="normal"> 81</span>
<span class="normal"> 82</span>
<span class="normal"> 83</span>
<span class="normal"> 84</span>
<span class="normal"> 85</span>
<span class="normal"> 86</span>
<span class="normal"> 87</span>
<span class="normal"> 88</span>
<span class="normal"> 89</span>
<span class="normal"> 90</span>
<span class="normal"> 91</span>
<span class="normal"> 92</span>
<span class="normal"> 93</span>
<span class="normal"> 94</span>
<span class="normal"> 95</span>
<span class="normal"> 96</span>
<span class="normal"> 97</span>
<span class="normal"> 98</span>
<span class="normal"> 99</span>
<span class="normal">100</span>
<span class="normal">101</span>
<span class="normal">102</span>
<span class="normal">103</span>
<span class="normal">104</span>
<span class="normal">105</span>
<span class="normal">106</span>
<span class="normal">107</span>
<span class="normal">108</span>
<span class="normal">109</span>
<span class="normal">110</span>
<span class="normal">111</span>
<span class="normal">112</span>
<span class="normal">113</span>
<span class="normal">114</span>
<span class="normal">115</span>
<span class="normal">116</span>
<span class="normal">117</span>
<span class="normal">118</span>
<span class="normal">119</span>
<span class="normal">120</span>
<span class="normal">121</span>
<span class="normal">122</span>
<span class="normal">123</span>
<span class="normal">124</span>
<span class="normal">125</span>
<span class="normal">126</span>
<span class="normal">127</span>
<span class="normal">128</span>
<span class="normal">129</span>
<span class="normal">130</span>
<span class="normal">131</span>
<span class="normal">132</span>
<span class="normal">133</span>
<span class="normal">134</span>
<span class="normal">135</span>
<span class="normal">136</span>
<span class="normal">137</span>
<span class="normal">138</span>
<span class="normal">139</span>
<span class="normal">140</span>
<span class="normal">141</span>
<span class="normal">142</span>
<span class="normal">143</span>
<span class="normal">144</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">class</span><span class="w"> </span><span class="nc">AreaVariableCalculatorBase</span><span class="p">(</span><span class="n">ABC</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Abstract base class for calculating energy variables aggregated at area level.</span>

<span class="sd">    This base class provides common functionality for aggregating node-level energy data</span>
<span class="sd">    (such as generation, demand, prices) to higher-level areas (countries, bidding zones,</span>
<span class="sd">    market areas). It handles the mapping between nodes and areas and provides validation</span>
<span class="sd">    and utility methods for area-based calculations.</span>

<span class="sd">    The class is designed to be subclassed for specific variable types, with each subclass</span>
<span class="sd">    implementing its own calculation logic while leveraging the common area mapping and</span>
<span class="sd">    validation functionality provided here.</span>

<span class="sd">    Energy market context:</span>
<span class="sd">    In electricity markets, many variables are naturally defined at the nodal level </span>
<span class="sd">    (generators, loads, prices) but need to be aggregated to market or geographical</span>
<span class="sd">    areas for analysis, reporting, and trading. This aggregation must handle missing</span>
<span class="sd">    data, different node counts per area, and preserve energy-specific semantics.</span>

<span class="sd">    Args:</span>
<span class="sd">        node_model_df: DataFrame containing node information with area assignments.</span>
<span class="sd">            Index should be node identifiers, must contain the specified area_column.</span>
<span class="sd">        area_column: Name of the column in node_model_df that contains area assignments.</span>
<span class="sd">            Each node should be assigned to exactly one area (NaN values are allowed).</span>

<span class="sd">    Attributes:</span>
<span class="sd">        node_model_df: The input node model DataFrame</span>
<span class="sd">        area_column: Name of the area assignment column</span>
<span class="sd">        node_to_area_map: Dictionary mapping node IDs to area names</span>
<span class="sd">        areas: Sorted list of unique area names (excluding NaN)</span>

<span class="sd">    Raises:</span>
<span class="sd">        ValueError: If area_column is not found in node_model_df</span>

<span class="sd">    Example:</span>

<span class="sd">        &gt;&gt;&gt; import pandas as pd</span>
<span class="sd">        &gt;&gt;&gt; # Node model with area assignments</span>
<span class="sd">        &gt;&gt;&gt; node_model = pd.DataFrame({</span>
<span class="sd">        ...     &#39;country&#39;: [&#39;DE&#39;, &#39;DE&#39;, &#39;FR&#39;, &#39;FR&#39;, &#39;BE&#39;],</span>
<span class="sd">        ...     &#39;voltage&#39;: [380, 220, 380, 220, 380]</span>
<span class="sd">        ... }, index=[&#39;DE1&#39;, &#39;DE2&#39;, &#39;FR1&#39;, &#39;FR2&#39;, &#39;BE1&#39;])</span>
<span class="sd">        &gt;&gt;&gt; </span>
<span class="sd">        &gt;&gt;&gt; # Subclass implementation</span>
<span class="sd">        &gt;&gt;&gt; class MyAreaCalculator(AreaVariableCalculatorBase):</span>
<span class="sd">        ...     def calculate(self, **kwargs):</span>
<span class="sd">        ...         return pd.DataFrame()  # Implementation here</span>
<span class="sd">        &gt;&gt;&gt; </span>
<span class="sd">        &gt;&gt;&gt; calculator = MyAreaCalculator(node_model, &#39;country&#39;)</span>
<span class="sd">        &gt;&gt;&gt; print(calculator.areas)  # [&#39;BE&#39;, &#39;DE&#39;, &#39;FR&#39;]</span>
<span class="sd">        &gt;&gt;&gt; print(calculator.get_area_nodes(&#39;DE&#39;))  # [&#39;DE1&#39;, &#39;DE2&#39;]</span>
<span class="sd">    &quot;&quot;&quot;</span>

    <span class="k">def</span><span class="w"> </span><span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">node_model_df</span><span class="p">:</span> <span class="n">pd</span><span class="o">.</span><span class="n">DataFrame</span><span class="p">,</span> <span class="n">area_column</span><span class="p">:</span> <span class="nb">str</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Initialize the area variable calculator.</span>

<span class="sd">        Args:</span>
<span class="sd">            node_model_df: DataFrame with node-to-area mapping</span>
<span class="sd">            area_column: Column name containing area assignments</span>

<span class="sd">        Raises:</span>
<span class="sd">            ValueError: If area_column not found in node_model_df</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">node_model_df</span> <span class="o">=</span> <span class="n">node_model_df</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">area_column</span> <span class="o">=</span> <span class="n">area_column</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">node_to_area_map</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_create_node_to_area_map</span><span class="p">()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">areas</span> <span class="o">=</span> <span class="nb">sorted</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">node_model_df</span><span class="p">[</span><span class="n">area_column</span><span class="p">]</span><span class="o">.</span><span class="n">dropna</span><span class="p">()</span><span class="o">.</span><span class="n">unique</span><span class="p">())</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_validate_inputs</span><span class="p">()</span>

    <span class="k">def</span><span class="w"> </span><span class="nf">_validate_inputs</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Validate input parameters during initialization.</span>

<span class="sd">        Raises:</span>
<span class="sd">            ValueError: If area_column is not found in node_model_df</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">area_column</span> <span class="ow">not</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">node_model_df</span><span class="o">.</span><span class="n">columns</span><span class="p">:</span>
            <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Column &#39;</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">area_column</span><span class="si">}</span><span class="s2">&#39; not found in node_model_df&quot;</span><span class="p">)</span>

    <span class="k">def</span><span class="w"> </span><span class="nf">_create_node_to_area_map</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="nb">str</span><span class="p">]:</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">node_model_df</span><span class="p">[</span><span class="bp">self</span><span class="o">.</span><span class="n">area_column</span><span class="p">]</span><span class="o">.</span><span class="n">to_dict</span><span class="p">()</span>

    <span class="k">def</span><span class="w"> </span><span class="nf">get_area_nodes</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">area</span><span class="p">:</span> <span class="nb">str</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">list</span><span class="p">[</span><span class="nb">str</span><span class="p">]:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Get all nodes belonging to a specific area.</span>

<span class="sd">        Args:</span>
<span class="sd">            area: Area name to get nodes for</span>

<span class="sd">        Returns:</span>
<span class="sd">            List of node IDs that belong to the specified area</span>

<span class="sd">        Example:</span>

<span class="sd">            &gt;&gt;&gt; calculator = MyAreaCalculator(node_model, &#39;country&#39;)</span>
<span class="sd">            &gt;&gt;&gt; german_nodes = calculator.get_area_nodes(&#39;DE&#39;)</span>
<span class="sd">            &gt;&gt;&gt; print(german_nodes)  # [&#39;DE1&#39;, &#39;DE2&#39;]</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">node_model_df</span><span class="p">[</span><span class="bp">self</span><span class="o">.</span><span class="n">node_model_df</span><span class="p">[</span><span class="bp">self</span><span class="o">.</span><span class="n">area_column</span><span class="p">]</span> <span class="o">==</span> <span class="n">area</span><span class="p">]</span><span class="o">.</span><span class="n">index</span><span class="o">.</span><span class="n">tolist</span><span class="p">()</span>

    <span class="nd">@abstractmethod</span>
    <span class="k">def</span><span class="w"> </span><span class="nf">calculate</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">pd</span><span class="o">.</span><span class="n">DataFrame</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Calculate the area variable. Must be implemented by subclasses.</span>

<span class="sd">        This method should contain the specific logic for aggregating node-level</span>
<span class="sd">        data to area level for the particular variable type. The implementation</span>
<span class="sd">        will vary depending on whether the variable is extensive (additive like</span>
<span class="sd">        energy volumes) or intensive (averaged like prices).</span>

<span class="sd">        Args:</span>
<span class="sd">            **kwargs: Variable-specific parameters for the calculation</span>

<span class="sd">        Returns:</span>
<span class="sd">            DataFrame with area-level aggregated data. Index should be datetime</span>
<span class="sd">            for time series data, columns should be area identifiers.</span>

<span class="sd">        Raises:</span>
<span class="sd">            NotImplementedError: This is an abstract method</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">pass</span>

    <span class="k">def</span><span class="w"> </span><span class="nf">_validate_node_data</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">node_df</span><span class="p">:</span> <span class="n">pd</span><span class="o">.</span><span class="n">DataFrame</span><span class="p">,</span> <span class="n">data_name</span><span class="p">:</span> <span class="nb">str</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Validate that required nodes are present in node_model_df.</span>

<span class="sd">        Logs warnings for any nodes found in the data that are not in the node model.</span>
<span class="sd">        This is important for detecting data inconsistencies or model updates.</span>

<span class="sd">        Args:</span>
<span class="sd">            node_df: DataFrame containing node-level data to validate</span>
<span class="sd">            data_name: Descriptive name of the data being validated (for logging)</span>

<span class="sd">        Example:</span>

<span class="sd">            &gt;&gt;&gt; # Log warning if generation_data has nodes not in node_model_df</span>
<span class="sd">            &gt;&gt;&gt; calculator._validate_node_data(generation_data, &quot;generation&quot;)</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">missing_nodes</span> <span class="o">=</span> <span class="nb">set</span><span class="p">(</span><span class="n">node_df</span><span class="o">.</span><span class="n">columns</span><span class="p">)</span> <span class="o">-</span> <span class="nb">set</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">node_model_df</span><span class="o">.</span><span class="n">index</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">missing_nodes</span><span class="p">:</span>
            <span class="n">logger</span><span class="o">.</span><span class="n">warning</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="nb">len</span><span class="p">(</span><span class="n">missing_nodes</span><span class="p">)</span><span class="si">}</span><span class="s2"> nodes missing in node_model_df from </span><span class="si">{</span><span class="n">data_name</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
</code></pre></div></td></tr></table></div>
              </details>



  <div class="doc doc-children">










<div class="doc doc-object doc-function">


<h3 id="mescal.energy_data_handling.area_accounting.area_variable_base.AreaVariableCalculatorBase.__init__" class="doc doc-heading">
<code class="doc-symbol doc-symbol-heading doc-symbol-method"></code>            <span class="doc doc-object-name doc-function-name">__init__</span>


<a href="#mescal.energy_data_handling.area_accounting.area_variable_base.AreaVariableCalculatorBase.__init__" class="headerlink" title="Permanent link">&para;</a></h3>
<div class="doc-signature highlight"><pre><span></span><code><span class="nf">__init__</span><span class="p">(</span><span class="n">node_model_df</span><span class="p">:</span> <span class="n"><span title="pandas.DataFrame">DataFrame</span></span><span class="p">,</span> <span class="n">area_column</span><span class="p">:</span> <span class="n"><span title="str">str</span></span><span class="p">)</span>
</code></pre></div>

    <div class="doc doc-contents ">

        <p>Initialize the area variable calculator.</p>


<p><span class="doc-section-title">Parameters:</span></p>
    <table>
      <thead>
        <tr>
          <th>Name</th>
          <th>Type</th>
          <th>Description</th>
          <th>Default</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                <code>node_model_df</code>
            </td>
            <td>
                  <code><span title="pandas.DataFrame">DataFrame</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>DataFrame with node-to-area mapping</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>area_column</code>
            </td>
            <td>
                  <code><span title="str">str</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Column name containing area assignments</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
      </tbody>
    </table>


<p><span class="doc-section-title">Raises:</span></p>
    <table>
      <thead>
        <tr>
          <th>Type</th>
          <th>Description</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                  <code><span title="ValueError">ValueError</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>If area_column not found in node_model_df</p>
              </div>
            </td>
          </tr>
      </tbody>
    </table>


            <details class="quote">
              <summary>Source code in <code>submodules/mescal/mescal/energy_data_handling/area_accounting/area_variable_base.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">61</span>
<span class="normal">62</span>
<span class="normal">63</span>
<span class="normal">64</span>
<span class="normal">65</span>
<span class="normal">66</span>
<span class="normal">67</span>
<span class="normal">68</span>
<span class="normal">69</span>
<span class="normal">70</span>
<span class="normal">71</span>
<span class="normal">72</span>
<span class="normal">73</span>
<span class="normal">74</span>
<span class="normal">75</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span><span class="w"> </span><span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">node_model_df</span><span class="p">:</span> <span class="n">pd</span><span class="o">.</span><span class="n">DataFrame</span><span class="p">,</span> <span class="n">area_column</span><span class="p">:</span> <span class="nb">str</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Initialize the area variable calculator.</span>

<span class="sd">    Args:</span>
<span class="sd">        node_model_df: DataFrame with node-to-area mapping</span>
<span class="sd">        area_column: Column name containing area assignments</span>

<span class="sd">    Raises:</span>
<span class="sd">        ValueError: If area_column not found in node_model_df</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">node_model_df</span> <span class="o">=</span> <span class="n">node_model_df</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">area_column</span> <span class="o">=</span> <span class="n">area_column</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">node_to_area_map</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_create_node_to_area_map</span><span class="p">()</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">areas</span> <span class="o">=</span> <span class="nb">sorted</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">node_model_df</span><span class="p">[</span><span class="n">area_column</span><span class="p">]</span><span class="o">.</span><span class="n">dropna</span><span class="p">()</span><span class="o">.</span><span class="n">unique</span><span class="p">())</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">_validate_inputs</span><span class="p">()</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h3 id="mescal.energy_data_handling.area_accounting.area_variable_base.AreaVariableCalculatorBase.get_area_nodes" class="doc doc-heading">
<code class="doc-symbol doc-symbol-heading doc-symbol-method"></code>            <span class="doc doc-object-name doc-function-name">get_area_nodes</span>


<a href="#mescal.energy_data_handling.area_accounting.area_variable_base.AreaVariableCalculatorBase.get_area_nodes" class="headerlink" title="Permanent link">&para;</a></h3>
<div class="doc-signature highlight"><pre><span></span><code><span class="nf">get_area_nodes</span><span class="p">(</span><span class="n">area</span><span class="p">:</span> <span class="n"><span title="str">str</span></span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n"><span title="list">list</span></span><span class="p">[</span><span class="n"><span title="str">str</span></span><span class="p">]</span>
</code></pre></div>

    <div class="doc doc-contents ">

        <p>Get all nodes belonging to a specific area.</p>


<p><span class="doc-section-title">Parameters:</span></p>
    <table>
      <thead>
        <tr>
          <th>Name</th>
          <th>Type</th>
          <th>Description</th>
          <th>Default</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                <code>area</code>
            </td>
            <td>
                  <code><span title="str">str</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Area name to get nodes for</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
      </tbody>
    </table>


    <p><span class="doc-section-title">Returns:</span></p>
    <table>
      <thead>
        <tr>
          <th>Type</th>
          <th>Description</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                  <code><span title="list">list</span>[<span title="str">str</span>]</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>List of node IDs that belong to the specified area</p>
              </div>
            </td>
          </tr>
      </tbody>
    </table>
        <p>Example:</p>
<div class="highlight"><pre><span></span><code>&gt;&gt;&gt; calculator = MyAreaCalculator(node_model, &#39;country&#39;)
&gt;&gt;&gt; german_nodes = calculator.get_area_nodes(&#39;DE&#39;)
&gt;&gt;&gt; print(german_nodes)  # [&#39;DE1&#39;, &#39;DE2&#39;]
</code></pre></div>


            <details class="quote">
              <summary>Source code in <code>submodules/mescal/mescal/energy_data_handling/area_accounting/area_variable_base.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"> 89</span>
<span class="normal"> 90</span>
<span class="normal"> 91</span>
<span class="normal"> 92</span>
<span class="normal"> 93</span>
<span class="normal"> 94</span>
<span class="normal"> 95</span>
<span class="normal"> 96</span>
<span class="normal"> 97</span>
<span class="normal"> 98</span>
<span class="normal"> 99</span>
<span class="normal">100</span>
<span class="normal">101</span>
<span class="normal">102</span>
<span class="normal">103</span>
<span class="normal">104</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span><span class="w"> </span><span class="nf">get_area_nodes</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">area</span><span class="p">:</span> <span class="nb">str</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">list</span><span class="p">[</span><span class="nb">str</span><span class="p">]:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Get all nodes belonging to a specific area.</span>

<span class="sd">    Args:</span>
<span class="sd">        area: Area name to get nodes for</span>

<span class="sd">    Returns:</span>
<span class="sd">        List of node IDs that belong to the specified area</span>

<span class="sd">    Example:</span>

<span class="sd">        &gt;&gt;&gt; calculator = MyAreaCalculator(node_model, &#39;country&#39;)</span>
<span class="sd">        &gt;&gt;&gt; german_nodes = calculator.get_area_nodes(&#39;DE&#39;)</span>
<span class="sd">        &gt;&gt;&gt; print(german_nodes)  # [&#39;DE1&#39;, &#39;DE2&#39;]</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">node_model_df</span><span class="p">[</span><span class="bp">self</span><span class="o">.</span><span class="n">node_model_df</span><span class="p">[</span><span class="bp">self</span><span class="o">.</span><span class="n">area_column</span><span class="p">]</span> <span class="o">==</span> <span class="n">area</span><span class="p">]</span><span class="o">.</span><span class="n">index</span><span class="o">.</span><span class="n">tolist</span><span class="p">()</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h3 id="mescal.energy_data_handling.area_accounting.area_variable_base.AreaVariableCalculatorBase.calculate" class="doc doc-heading">
<code class="doc-symbol doc-symbol-heading doc-symbol-method"></code>            <span class="doc doc-object-name doc-function-name">calculate</span>


  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-abstractmethod"><code>abstractmethod</code></small>
  </span>

<a href="#mescal.energy_data_handling.area_accounting.area_variable_base.AreaVariableCalculatorBase.calculate" class="headerlink" title="Permanent link">&para;</a></h3>
<div class="doc-signature highlight"><pre><span></span><code><span class="nf">calculate</span><span class="p">(</span><span class="o">**</span><span class="n">kwargs</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n"><span title="pandas.DataFrame">DataFrame</span></span>
</code></pre></div>

    <div class="doc doc-contents ">

        <p>Calculate the area variable. Must be implemented by subclasses.</p>
<p>This method should contain the specific logic for aggregating node-level
data to area level for the particular variable type. The implementation
will vary depending on whether the variable is extensive (additive like
energy volumes) or intensive (averaged like prices).</p>


<p><span class="doc-section-title">Parameters:</span></p>
    <table>
      <thead>
        <tr>
          <th>Name</th>
          <th>Type</th>
          <th>Description</th>
          <th>Default</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                <code>**kwargs</code>
            </td>
            <td>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Variable-specific parameters for the calculation</p>
              </div>
            </td>
            <td>
                  <code>{}</code>
            </td>
          </tr>
      </tbody>
    </table>


    <p><span class="doc-section-title">Returns:</span></p>
    <table>
      <thead>
        <tr>
          <th>Type</th>
          <th>Description</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                  <code><span title="pandas.DataFrame">DataFrame</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>DataFrame with area-level aggregated data. Index should be datetime</p>
              </div>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                  <code><span title="pandas.DataFrame">DataFrame</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>for time series data, columns should be area identifiers.</p>
              </div>
            </td>
          </tr>
      </tbody>
    </table>


<p><span class="doc-section-title">Raises:</span></p>
    <table>
      <thead>
        <tr>
          <th>Type</th>
          <th>Description</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                  <code><span title="NotImplementedError">NotImplementedError</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>This is an abstract method</p>
              </div>
            </td>
          </tr>
      </tbody>
    </table>


            <details class="quote">
              <summary>Source code in <code>submodules/mescal/mescal/energy_data_handling/area_accounting/area_variable_base.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">106</span>
<span class="normal">107</span>
<span class="normal">108</span>
<span class="normal">109</span>
<span class="normal">110</span>
<span class="normal">111</span>
<span class="normal">112</span>
<span class="normal">113</span>
<span class="normal">114</span>
<span class="normal">115</span>
<span class="normal">116</span>
<span class="normal">117</span>
<span class="normal">118</span>
<span class="normal">119</span>
<span class="normal">120</span>
<span class="normal">121</span>
<span class="normal">122</span>
<span class="normal">123</span>
<span class="normal">124</span>
<span class="normal">125</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="nd">@abstractmethod</span>
<span class="k">def</span><span class="w"> </span><span class="nf">calculate</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">pd</span><span class="o">.</span><span class="n">DataFrame</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Calculate the area variable. Must be implemented by subclasses.</span>

<span class="sd">    This method should contain the specific logic for aggregating node-level</span>
<span class="sd">    data to area level for the particular variable type. The implementation</span>
<span class="sd">    will vary depending on whether the variable is extensive (additive like</span>
<span class="sd">    energy volumes) or intensive (averaged like prices).</span>

<span class="sd">    Args:</span>
<span class="sd">        **kwargs: Variable-specific parameters for the calculation</span>

<span class="sd">    Returns:</span>
<span class="sd">        DataFrame with area-level aggregated data. Index should be datetime</span>
<span class="sd">        for time series data, columns should be area identifiers.</span>

<span class="sd">    Raises:</span>
<span class="sd">        NotImplementedError: This is an abstract method</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">pass</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>



  </div>

    </div>

</div>

<div class="doc doc-object doc-class">



<h2 id="mescal.energy_data_handling.area_accounting.area_variable_base.ExampleSumCalculator" class="doc doc-heading">
<code class="doc-symbol doc-symbol-heading doc-symbol-class"></code>            <span class="doc doc-object-name doc-class-name">ExampleSumCalculator</span>


<a href="#mescal.energy_data_handling.area_accounting.area_variable_base.ExampleSumCalculator" class="headerlink" title="Permanent link">&para;</a></h2>


    <div class="doc doc-contents ">
            <p class="doc doc-class-bases">
              Bases: <code><a class="autorefs autorefs-internal" title="            AreaVariableCalculatorBase (mescal.energy_data_handling.area_accounting.area_variable_base.AreaVariableCalculatorBase)" href="#mescal.energy_data_handling.area_accounting.area_variable_base.AreaVariableCalculatorBase">AreaVariableCalculatorBase</a></code></p>


        <p>Example implementation that sums node-level data to area level.</p>








              <details class="quote">
                <summary>Source code in <code>submodules/mescal/mescal/energy_data_handling/area_accounting/area_variable_base.py</code></summary>
                <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">149</span>
<span class="normal">150</span>
<span class="normal">151</span>
<span class="normal">152</span>
<span class="normal">153</span>
<span class="normal">154</span>
<span class="normal">155</span>
<span class="normal">156</span>
<span class="normal">157</span>
<span class="normal">158</span>
<span class="normal">159</span>
<span class="normal">160</span>
<span class="normal">161</span>
<span class="normal">162</span>
<span class="normal">163</span>
<span class="normal">164</span>
<span class="normal">165</span>
<span class="normal">166</span>
<span class="normal">167</span>
<span class="normal">168</span>
<span class="normal">169</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">class</span><span class="w"> </span><span class="nc">ExampleSumCalculator</span><span class="p">(</span><span class="n">AreaVariableCalculatorBase</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Example implementation that sums node-level data to area level.&quot;&quot;&quot;</span>

    <span class="k">def</span><span class="w"> </span><span class="nf">calculate</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">node_data</span><span class="p">:</span> <span class="n">pd</span><span class="o">.</span><span class="n">DataFrame</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">pd</span><span class="o">.</span><span class="n">DataFrame</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Sum node data for each area (extensive variable aggregation).&quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_validate_node_data</span><span class="p">(</span><span class="n">node_data</span><span class="p">,</span> <span class="s2">&quot;example_data&quot;</span><span class="p">)</span>

        <span class="n">result_dict</span> <span class="o">=</span> <span class="p">{}</span>
        <span class="k">for</span> <span class="n">area</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">areas</span><span class="p">:</span>
            <span class="n">area_nodes</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_area_nodes</span><span class="p">(</span><span class="n">area</span><span class="p">)</span>
            <span class="c1"># Filter to nodes that exist in both model and data</span>
            <span class="n">available_nodes</span> <span class="o">=</span> <span class="p">[</span><span class="n">n</span> <span class="k">for</span> <span class="n">n</span> <span class="ow">in</span> <span class="n">area_nodes</span> <span class="k">if</span> <span class="n">n</span> <span class="ow">in</span> <span class="n">node_data</span><span class="o">.</span><span class="n">columns</span><span class="p">]</span>
            <span class="k">if</span> <span class="n">available_nodes</span><span class="p">:</span>
                <span class="n">result_dict</span><span class="p">[</span><span class="n">area</span><span class="p">]</span> <span class="o">=</span> <span class="n">node_data</span><span class="p">[</span><span class="n">available_nodes</span><span class="p">]</span><span class="o">.</span><span class="n">sum</span><span class="p">(</span><span class="n">axis</span><span class="o">=</span><span class="mi">1</span><span class="p">)</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="c1"># Create empty series with same index if no data available</span>
                <span class="n">result_dict</span><span class="p">[</span><span class="n">area</span><span class="p">]</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">Series</span><span class="p">(</span><span class="n">index</span><span class="o">=</span><span class="n">node_data</span><span class="o">.</span><span class="n">index</span><span class="p">,</span> <span class="n">dtype</span><span class="o">=</span><span class="nb">float</span><span class="p">)</span>

        <span class="n">result_df</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">DataFrame</span><span class="p">(</span><span class="n">result_dict</span><span class="p">)</span>
        <span class="n">result_df</span><span class="o">.</span><span class="n">columns</span><span class="o">.</span><span class="n">name</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">area_column</span>
        <span class="k">return</span> <span class="n">result_df</span>
</code></pre></div></td></tr></table></div>
              </details>



  <div class="doc doc-children">










<div class="doc doc-object doc-function">


<h3 id="mescal.energy_data_handling.area_accounting.area_variable_base.ExampleSumCalculator.calculate" class="doc doc-heading">
<code class="doc-symbol doc-symbol-heading doc-symbol-method"></code>            <span class="doc doc-object-name doc-function-name">calculate</span>


<a href="#mescal.energy_data_handling.area_accounting.area_variable_base.ExampleSumCalculator.calculate" class="headerlink" title="Permanent link">&para;</a></h3>
<div class="doc-signature highlight"><pre><span></span><code><span class="nf">calculate</span><span class="p">(</span><span class="n">node_data</span><span class="p">:</span> <span class="n"><span title="pandas.DataFrame">DataFrame</span></span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n"><span title="pandas.DataFrame">DataFrame</span></span>
</code></pre></div>

    <div class="doc doc-contents ">

        <p>Sum node data for each area (extensive variable aggregation).</p>


            <details class="quote">
              <summary>Source code in <code>submodules/mescal/mescal/energy_data_handling/area_accounting/area_variable_base.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">152</span>
<span class="normal">153</span>
<span class="normal">154</span>
<span class="normal">155</span>
<span class="normal">156</span>
<span class="normal">157</span>
<span class="normal">158</span>
<span class="normal">159</span>
<span class="normal">160</span>
<span class="normal">161</span>
<span class="normal">162</span>
<span class="normal">163</span>
<span class="normal">164</span>
<span class="normal">165</span>
<span class="normal">166</span>
<span class="normal">167</span>
<span class="normal">168</span>
<span class="normal">169</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span><span class="w"> </span><span class="nf">calculate</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">node_data</span><span class="p">:</span> <span class="n">pd</span><span class="o">.</span><span class="n">DataFrame</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">pd</span><span class="o">.</span><span class="n">DataFrame</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Sum node data for each area (extensive variable aggregation).&quot;&quot;&quot;</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">_validate_node_data</span><span class="p">(</span><span class="n">node_data</span><span class="p">,</span> <span class="s2">&quot;example_data&quot;</span><span class="p">)</span>

    <span class="n">result_dict</span> <span class="o">=</span> <span class="p">{}</span>
    <span class="k">for</span> <span class="n">area</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">areas</span><span class="p">:</span>
        <span class="n">area_nodes</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_area_nodes</span><span class="p">(</span><span class="n">area</span><span class="p">)</span>
        <span class="c1"># Filter to nodes that exist in both model and data</span>
        <span class="n">available_nodes</span> <span class="o">=</span> <span class="p">[</span><span class="n">n</span> <span class="k">for</span> <span class="n">n</span> <span class="ow">in</span> <span class="n">area_nodes</span> <span class="k">if</span> <span class="n">n</span> <span class="ow">in</span> <span class="n">node_data</span><span class="o">.</span><span class="n">columns</span><span class="p">]</span>
        <span class="k">if</span> <span class="n">available_nodes</span><span class="p">:</span>
            <span class="n">result_dict</span><span class="p">[</span><span class="n">area</span><span class="p">]</span> <span class="o">=</span> <span class="n">node_data</span><span class="p">[</span><span class="n">available_nodes</span><span class="p">]</span><span class="o">.</span><span class="n">sum</span><span class="p">(</span><span class="n">axis</span><span class="o">=</span><span class="mi">1</span><span class="p">)</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="c1"># Create empty series with same index if no data available</span>
            <span class="n">result_dict</span><span class="p">[</span><span class="n">area</span><span class="p">]</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">Series</span><span class="p">(</span><span class="n">index</span><span class="o">=</span><span class="n">node_data</span><span class="o">.</span><span class="n">index</span><span class="p">,</span> <span class="n">dtype</span><span class="o">=</span><span class="nb">float</span><span class="p">)</span>

    <span class="n">result_df</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">DataFrame</span><span class="p">(</span><span class="n">result_dict</span><span class="p">)</span>
    <span class="n">result_df</span><span class="o">.</span><span class="n">columns</span><span class="o">.</span><span class="n">name</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">area_column</span>
    <span class="k">return</span> <span class="n">result_df</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>



  </div>

    </div>

</div>




  </div>

    </div>

</div>












                
              </article>
            </div>
          
          
  <script>var tabs=__md_get("__tabs");if(Array.isArray(tabs))e:for(var set of document.querySelectorAll(".tabbed-set")){var labels=set.querySelector(".tabbed-labels");for(var tab of tabs)for(var label of labels.getElementsByTagName("label"))if(label.innerText.trim()===tab){var input=document.getElementById(label.htmlFor);input.checked=!0;continue e}}</script>

<script>var target=document.getElementById(location.hash.slice(1));target&&target.name&&(target.checked=target.name.startsWith("__tabbed_"))</script>
        </div>
        
      </main>
      
        <footer class="md-footer">
  
  <div class="md-footer-meta md-typeset">
    <div class="md-footer-meta__inner md-grid">
      <div class="md-copyright">
  
  
    Made with
    <a href="https://squidfunk.github.io/mkdocs-material/" target="_blank" rel="noopener">
      Material for MkDocs
    </a>
  
</div>
      
    </div>
  </div>
</footer>
      
    </div>
    <div class="md-dialog" data-md-component="dialog">
      <div class="md-dialog__inner md-typeset"></div>
    </div>
    
    
    
      
      <script id="__config" type="application/json">{"base": "../../../../..", "features": ["navigation.tabs", "content.tabs.link", "navigation.sections"], "search": "../../../../../assets/javascripts/workers/search.973d3a69.min.js", "tags": null, "translations": {"clipboard.copied": "Copied to clipboard", "clipboard.copy": "Copy to clipboard", "search.result.more.one": "1 more on this page", "search.result.more.other": "# more on this page", "search.result.none": "No matching documents", "search.result.one": "1 matching document", "search.result.other": "# matching documents", "search.result.placeholder": "Type to start searching", "search.result.term.missing": "Missing", "select.version": "Select version"}, "version": null}</script>
    
    
      <script src="../../../../../assets/javascripts/bundle.92b07e13.min.js"></script>
      
    
  </body>
</html>