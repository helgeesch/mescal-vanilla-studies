
<!doctype html>
<html lang="en" class="no-js">
  <head>
    
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width,initial-scale=1">
      
      
      
        <link rel="canonical" href="https://docs.mesqual.io/mescal-package-documentation/api_reference/visualization/folium_viz_system/system/">
      
      
        <link rel="prev" href="../arrow_icon/">
      
      
        <link rel="next" href="../data_item/">
      
      
      <link rel="icon" href="../../../../../assets/images/favicon.png">
      <meta name="generator" content="mkdocs-1.6.1, mkdocs-material-9.6.19">
    
    
      
        <title>Abstract System - MESCAL Suite Documentation</title>
      
    
    
      <link rel="stylesheet" href="../../../../../assets/stylesheets/main.7e37652d.min.css">
      
        
        <link rel="stylesheet" href="../../../../../assets/stylesheets/palette.06af60db.min.css">
      
      


    
    
      
    
    
      
        
        
        <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
        <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto:300,300i,400,400i,700,700i%7CRoboto+Mono:400,400i,700,700i&display=fallback">
        <style>:root{--md-text-font:"Roboto";--md-code-font:"Roboto Mono"}</style>
      
    
    
      <link rel="stylesheet" href="../../../../../assets/_mkdocstrings.css">
    
    <script>__md_scope=new URL("../../../../..",location),__md_hash=e=>[...e].reduce(((e,_)=>(e<<5)-e+_.charCodeAt(0)),0),__md_get=(e,_=localStorage,t=__md_scope)=>JSON.parse(_.getItem(t.pathname+"."+e)),__md_set=(e,_,t=localStorage,a=__md_scope)=>{try{t.setItem(a.pathname+"."+e,JSON.stringify(_))}catch(e){}}</script>
    
      

    
    
    
  </head>
  
  
    
    
    
    
    
    <body dir="ltr" data-md-color-scheme="default" data-md-color-primary="teal" data-md-color-accent="amber">
  
    
    <input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="__drawer" autocomplete="off">
    <input class="md-toggle" data-md-toggle="search" type="checkbox" id="__search" autocomplete="off">
    <label class="md-overlay" for="__drawer"></label>
    <div data-md-component="skip">
      
        
        <a href="#mescal-folium-visualization-system-base" class="md-skip">
          Skip to content
        </a>
      
    </div>
    <div data-md-component="announce">
      
    </div>
    
    
      

<header class="md-header" data-md-component="header">
  <nav class="md-header__inner md-grid" aria-label="Header">
    <a href="../../../../.." title="MESCAL Suite Documentation" class="md-header__button md-logo" aria-label="MESCAL Suite Documentation" data-md-component="logo">
      
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 8a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3 3 3 0 0 0 3 3m0 3.54C9.64 9.35 6.5 8 3 8v11c3.5 0 6.64 1.35 9 3.54 2.36-2.19 5.5-3.54 9-3.54V8c-3.5 0-6.64 1.35-9 3.54"/></svg>

    </a>
    <label class="md-header__button md-icon" for="__drawer">
      
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M3 6h18v2H3zm0 5h18v2H3zm0 5h18v2H3z"/></svg>
    </label>
    <div class="md-header__title" data-md-component="header-title">
      <div class="md-header__ellipsis">
        <div class="md-header__topic">
          <span class="md-ellipsis">
            MESCAL Suite Documentation
          </span>
        </div>
        <div class="md-header__topic" data-md-component="header-topic">
          <span class="md-ellipsis">
            
              Abstract System
            
          </span>
        </div>
      </div>
    </div>
    
      
    
    
    
    
      
      
        <label class="md-header__button md-icon" for="__search">
          
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.52 6.52 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5"/></svg>
        </label>
        <div class="md-search" data-md-component="search" role="dialog">
  <label class="md-search__overlay" for="__search"></label>
  <div class="md-search__inner" role="search">
    <form class="md-search__form" name="search">
      <input type="text" class="md-search__input" name="query" aria-label="Search" placeholder="Search" autocapitalize="off" autocorrect="off" autocomplete="off" spellcheck="false" data-md-component="search-query" required>
      <label class="md-search__icon md-icon" for="__search">
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.52 6.52 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5"/></svg>
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11z"/></svg>
      </label>
      <nav class="md-search__options" aria-label="Search">
        
        <button type="reset" class="md-search__icon md-icon" title="Clear" aria-label="Clear" tabindex="-1">
          
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z"/></svg>
        </button>
      </nav>
      
    </form>
    <div class="md-search__output">
      <div class="md-search__scrollwrap" tabindex="0" data-md-scrollfix>
        <div class="md-search-result" data-md-component="search-result">
          <div class="md-search-result__meta">
            Initializing search
          </div>
          <ol class="md-search-result__list" role="presentation"></ol>
        </div>
      </div>
    </div>
  </div>
</div>
      
    
    
      <div class="md-header__source">
        <a href="https://github.com/helgeesch/mescal-vanilla-studies/" title="Go to repository" class="md-source" data-md-component="source">
  <div class="md-source__icon md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><!--! Font Awesome Free 7.0.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2025 Fonticons, Inc.--><path fill="currentColor" d="M439.6 236.1 244 40.5c-5.4-5.5-12.8-8.5-20.4-8.5s-15 3-20.4 8.4L162.5 81l51.5 51.5c27.1-9.1 52.7 16.8 43.4 43.7l49.7 49.7c34.2-11.8 61.2 31 35.5 56.7-26.5 26.5-70.2-2.9-56-37.3L240.3 199v121.9c25.3 12.5 22.3 41.8 9.1 55-6.4 6.4-15.2 10.1-24.3 10.1s-17.8-3.6-24.3-10.1c-17.6-17.6-11.1-46.9 11.2-56v-123c-20.8-8.5-24.6-30.7-18.6-45L142.6 101 8.5 235.1C3 240.6 0 247.9 0 255.5s3 15 8.5 20.4l195.6 195.7c5.4 5.4 12.7 8.4 20.4 8.4s15-3 20.4-8.4l194.7-194.7c5.4-5.4 8.4-12.8 8.4-20.4s-3-15-8.4-20.4"/></svg>
  </div>
  <div class="md-source__repository">
    GitHub
  </div>
</a>
      </div>
    
  </nav>
  
</header>
    
    <div class="md-container" data-md-component="container">
      
      
        
          
            
<nav class="md-tabs" aria-label="Tabs" data-md-component="tabs">
  <div class="md-grid">
    <ul class="md-tabs__list">
      
        
  
  
  
  
    <li class="md-tabs__item">
      <a href="../../../../.." class="md-tabs__link">
        
  
  
    
  
  Home

      </a>
    </li>
  

      
        
  
  
  
    
  
  
    
    
      
  
  
  
    
  
  
    
    
      <li class="md-tabs__item md-tabs__item--active">
        <a href="../../../study_manager/" class="md-tabs__link">
          
  
  
  MESCAL API Reference

        </a>
      </li>
    
  

    
  

      
        
  
  
  
  
    
    
      
  
  
  
  
    
    
      <li class="md-tabs__item">
        <a href="../../../../../mescal-study-01/notebooks/mescal_101_study_manager_and_basic_fetching/" class="md-tabs__link">
          
  
  
  Studies & Examples

        </a>
      </li>
    
  

    
  

      
    </ul>
  </div>
</nav>
          
        
      
      <main class="md-main" data-md-component="main">
        <div class="md-main__inner md-grid">
          
            
              
              <div class="md-sidebar md-sidebar--primary" data-md-component="sidebar" data-md-type="navigation" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    


  


<nav class="md-nav md-nav--primary md-nav--lifted" aria-label="Navigation" data-md-level="0">
  <label class="md-nav__title" for="__drawer">
    <a href="../../../../.." title="MESCAL Suite Documentation" class="md-nav__button md-logo" aria-label="MESCAL Suite Documentation" data-md-component="logo">
      
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 8a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3 3 3 0 0 0 3 3m0 3.54C9.64 9.35 6.5 8 3 8v11c3.5 0 6.64 1.35 9 3.54 2.36-2.19 5.5-3.54 9-3.54V8c-3.5 0-6.64 1.35-9 3.54"/></svg>

    </a>
    MESCAL Suite Documentation
  </label>
  
    <div class="md-nav__source">
      <a href="https://github.com/helgeesch/mescal-vanilla-studies/" title="Go to repository" class="md-source" data-md-component="source">
  <div class="md-source__icon md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><!--! Font Awesome Free 7.0.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2025 Fonticons, Inc.--><path fill="currentColor" d="M439.6 236.1 244 40.5c-5.4-5.5-12.8-8.5-20.4-8.5s-15 3-20.4 8.4L162.5 81l51.5 51.5c27.1-9.1 52.7 16.8 43.4 43.7l49.7 49.7c34.2-11.8 61.2 31 35.5 56.7-26.5 26.5-70.2-2.9-56-37.3L240.3 199v121.9c25.3 12.5 22.3 41.8 9.1 55-6.4 6.4-15.2 10.1-24.3 10.1s-17.8-3.6-24.3-10.1c-17.6-17.6-11.1-46.9 11.2-56v-123c-20.8-8.5-24.6-30.7-18.6-45L142.6 101 8.5 235.1C3 240.6 0 247.9 0 255.5s3 15 8.5 20.4l195.6 195.7c5.4 5.4 12.7 8.4 20.4 8.4s15-3 20.4-8.4l194.7-194.7c5.4-5.4 8.4-12.8 8.4-20.4s-3-15-8.4-20.4"/></svg>
  </div>
  <div class="md-source__repository">
    GitHub
  </div>
</a>
    </div>
  
  <ul class="md-nav__list" data-md-scrollfix>
    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../../.." class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Home
    
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
    
  
  
  
    
    
    
    
      
        
        
      
      
        
      
    
    
    <li class="md-nav__item md-nav__item--active md-nav__item--section md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_2" checked>
        
          
          <label class="md-nav__link" for="__nav_2" id="__nav_2_label" tabindex="">
            
  
  
  <span class="md-ellipsis">
    MESCAL API Reference
    
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_2_label" aria-expanded="true">
          <label class="md-nav__title" for="__nav_2">
            <span class="md-nav__icon md-icon"></span>
            MESCAL API Reference
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    
    
    
    
      
      
        
          
          
        
      
    
    
    <li class="md-nav__item md-nav__item--section md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_2_1" >
        
          
          <label class="md-nav__link" for="__nav_2_1" id="__nav_2_1_label" tabindex="">
            
  
  
  <span class="md-ellipsis">
    Core
    
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_2_1_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_2_1">
            <span class="md-nav__icon md-icon"></span>
            Core
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../study_manager/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    StudyManager
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../datasets/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Datasets
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    
    
    
    
      
      
        
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_2_1_3" >
        
          
          <label class="md-nav__link" for="__nav_2_1_3" id="__nav_2_1_3_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    Flag System
    
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="3" aria-labelledby="__nav_2_1_3_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_2_1_3">
            <span class="md-nav__icon md-icon"></span>
            Flag System
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../flag/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Flag
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../flag_index/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    FlagIndex
    
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../units/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Units
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../validation/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Validation
    
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
    
  
  
  
    
    
    
    
      
      
        
          
          
        
      
    
    
    <li class="md-nav__item md-nav__item--active md-nav__item--section md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_2_2" checked>
        
          
          <div class="md-nav__link md-nav__container">
            <a href="../../" class="md-nav__link ">
              
  
  
  <span class="md-ellipsis">
    Visualization Modules
    
  </span>
  

            </a>
            
              
              <label class="md-nav__link " for="__nav_2_2" id="__nav_2_2_label" tabindex="">
                <span class="md-nav__icon md-icon"></span>
              </label>
            
          </div>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_2_2_label" aria-expanded="true">
          <label class="md-nav__title" for="__nav_2_2">
            <span class="md-nav__icon md-icon"></span>
            Visualization Modules
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../time_series_dashboard/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    TimeSeriesDashboard
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
    
  
  
  
    
    
    
    
      
      
        
      
    
    
    <li class="md-nav__item md-nav__item--active md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_2_2_2" checked>
        
          
          <div class="md-nav__link md-nav__container">
            <a href="../" class="md-nav__link ">
              
  
  
  <span class="md-ellipsis">
    Folium Viz System
    
  </span>
  

            </a>
            
              
              <label class="md-nav__link " for="__nav_2_2_2" id="__nav_2_2_2_label" tabindex="0">
                <span class="md-nav__icon md-icon"></span>
              </label>
            
          </div>
        
        <nav class="md-nav" data-md-level="3" aria-labelledby="__nav_2_2_2_label" aria-expanded="true">
          <label class="md-nav__title" for="__nav_2_2_2">
            <span class="md-nav__icon md-icon"></span>
            Folium Viz System
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../areas/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Areas
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../circle_marker/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Circle Marker
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../text_overlay/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Text Overlay
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../lines/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Lines
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../line_text_overlay/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Line Text Overlay
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../arrow_icon/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Arrow Icon
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
    
  
  
  
    
    
    
    
      
      
        
      
    
    
    <li class="md-nav__item md-nav__item--active md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_2_2_2_7" checked>
        
          
          <label class="md-nav__link" for="__nav_2_2_2_7" id="__nav_2_2_2_7_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    Base
    
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="4" aria-labelledby="__nav_2_2_2_7_label" aria-expanded="true">
          <label class="md-nav__title" for="__nav_2_2_2_7">
            <span class="md-nav__icon md-icon"></span>
            Base
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
    
  
  
  
    <li class="md-nav__item md-nav__item--active">
      
      <input class="md-nav__toggle md-toggle" type="checkbox" id="__toc">
      
      
        
      
      
        <label class="md-nav__link md-nav__link--active" for="__toc">
          
  
  
  <span class="md-ellipsis">
    Abstract System
    
  </span>
  

          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <a href="./" class="md-nav__link md-nav__link--active">
        
  
  
  <span class="md-ellipsis">
    Abstract System
    
  </span>
  

      </a>
      
        

<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#mescal.visualizations.folium_viz_system.base_viz_system" class="md-nav__link">
    <span class="md-ellipsis">
      base_viz_system
    </span>
  </a>
  
    <nav class="md-nav" aria-label="base_viz_system">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#mescal.visualizations.folium_viz_system.base_viz_system.PropertyMapper" class="md-nav__link">
    <span class="md-ellipsis">
      PropertyMapper
    </span>
  </a>
  
    <nav class="md-nav" aria-label="PropertyMapper">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#mescal.visualizations.folium_viz_system.base_viz_system.PropertyMapper.from_static_value" class="md-nav__link">
    <span class="md-ellipsis">
      from_static_value
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#mescal.visualizations.folium_viz_system.base_viz_system.PropertyMapper.from_item_attr" class="md-nav__link">
    <span class="md-ellipsis">
      from_item_attr
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#mescal.visualizations.folium_viz_system.base_viz_system.PropertyMapper.from_kpi_value" class="md-nav__link">
    <span class="md-ellipsis">
      from_kpi_value
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#mescal.visualizations.folium_viz_system.base_viz_system.ResolvedFeature" class="md-nav__link">
    <span class="md-ellipsis">
      ResolvedFeature
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#mescal.visualizations.folium_viz_system.base_viz_system.FeatureResolver" class="md-nav__link">
    <span class="md-ellipsis">
      FeatureResolver
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#mescal.visualizations.folium_viz_system.base_viz_system.FoliumObjectGenerator" class="md-nav__link">
    <span class="md-ellipsis">
      FoliumObjectGenerator
    </span>
  </a>
  
    <nav class="md-nav" aria-label="FoliumObjectGenerator">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#mescal.visualizations.folium_viz_system.base_viz_system.FoliumObjectGenerator.generate" class="md-nav__link">
    <span class="md-ellipsis">
      generate
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#mescal.visualizations.folium_viz_system.base_viz_system.FoliumObjectGenerator.generate_objects_for_model_df" class="md-nav__link">
    <span class="md-ellipsis">
      generate_objects_for_model_df
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#mescal.visualizations.folium_viz_system.base_viz_system.FoliumObjectGenerator.generate_objects_for_kpi_collection" class="md-nav__link">
    <span class="md-ellipsis">
      generate_objects_for_kpi_collection
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#mescal.visualizations.folium_viz_system.base_viz_system.FoliumObjectGenerator.generate_object_for_single_kpi" class="md-nav__link">
    <span class="md-ellipsis">
      generate_object_for_single_kpi
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
    </ul>
  
</nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../data_item/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Data Item
    
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../kpi_collection/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    KPI Collection Visualizer
    
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../folium_legend_system/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Folium Legend System
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../html_table/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    HTML Table
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../html_dashboard/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    HTML Dashboard
    
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    
    
    
    
      
      
        
          
          
        
      
    
    
    <li class="md-nav__item md-nav__item--section md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_2_3" >
        
          
          <div class="md-nav__link md-nav__container">
            <a href="../../../energy_data_handling/" class="md-nav__link ">
              
  
  
  <span class="md-ellipsis">
    Energy Data Handling
    
  </span>
  

            </a>
            
              
              <label class="md-nav__link " for="__nav_2_3" id="__nav_2_3_label" tabindex="">
                <span class="md-nav__icon md-icon"></span>
              </label>
            
          </div>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_2_3_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_2_3">
            <span class="md-nav__icon md-icon"></span>
            Energy Data Handling
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    
    
    
    
      
      
        
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_2_3_1" >
        
          
          <div class="md-nav__link md-nav__container">
            <a href="../../../energy_data_handling/area_accounting/" class="md-nav__link ">
              
  
  
  <span class="md-ellipsis">
    Area Accounting
    
  </span>
  

            </a>
            
              
              <label class="md-nav__link " for="__nav_2_3_1" id="__nav_2_3_1_label" tabindex="0">
                <span class="md-nav__icon md-icon"></span>
              </label>
            
          </div>
        
        <nav class="md-nav" data-md-level="3" aria-labelledby="__nav_2_3_1_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_2_3_1">
            <span class="md-nav__icon md-icon"></span>
            Area Accounting
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../energy_data_handling/area_accounting/model_gen/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Area / Border Model Generators
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../energy_data_handling/area_accounting/area_variables/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Area Variables
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../energy_data_handling/area_accounting/border_variables/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Border Variables
    
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    
    
    
    
      
      
        
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_2_3_2" >
        
          
          <div class="md-nav__link md-nav__container">
            <a href="../../../energy_data_handling/model_handling/" class="md-nav__link ">
              
  
  
  <span class="md-ellipsis">
    Model Membership Handling
    
  </span>
  

            </a>
            
              
              <label class="md-nav__link " for="__nav_2_3_2" id="__nav_2_3_2_label" tabindex="0">
                <span class="md-nav__icon md-icon"></span>
              </label>
            
          </div>
        
        <nav class="md-nav" data-md-level="3" aria-labelledby="__nav_2_3_2_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_2_3_2">
            <span class="md-nav__icon md-icon"></span>
            Model Membership Handling
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../energy_data_handling/model_handling/property_enricher/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Property Enricher
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../energy_data_handling/model_handling/pairs_appender/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Pairs Appender
    
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    
    
    
    
      
      
        
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_2_3_3" >
        
          
          <div class="md-nav__link md-nav__container">
            <a href="../../../energy_data_handling/variable_utils/" class="md-nav__link ">
              
  
  
  <span class="md-ellipsis">
    Variable Utils
    
  </span>
  

            </a>
            
              
              <label class="md-nav__link " for="__nav_2_3_3" id="__nav_2_3_3_label" tabindex="0">
                <span class="md-nav__icon md-icon"></span>
              </label>
            
          </div>
        
        <nav class="md-nav" data-md-level="3" aria-labelledby="__nav_2_3_3_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_2_3_3">
            <span class="md-nav__icon md-icon"></span>
            Variable Utils
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../energy_data_handling/variable_utils/in_common_aggs/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    In-common Aggregations
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../energy_data_handling/variable_utils/direction_aggs/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Up-/Down Directional Aggregations
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../energy_data_handling/variable_utils/congestion_rent/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Congestion Rent
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../energy_data_handling/variable_utils/regional_trade_balance/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Regional Trade Balance
    
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../energy_data_handling/granularity_modules/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Granularity Modules
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../energy_data_handling/network_lines_data/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Network Lines Data
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../energy_data_handling/time_series_gap_handling/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Time Series Gap Handling
    
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    
    
    
    
      
      
        
          
          
        
      
    
    
    <li class="md-nav__item md-nav__item--section md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_2_4" >
        
          
          <label class="md-nav__link" for="__nav_2_4" id="__nav_2_4_label" tabindex="">
            
  
  
  <span class="md-ellipsis">
    Utils
    
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_2_4_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_2_4">
            <span class="md-nav__icon md-icon"></span>
            Utils
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    
    
    
    
      
      
        
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_2_4_1" >
        
          
          <div class="md-nav__link md-nav__container">
            <a href="../../../utils/pandas_utils/" class="md-nav__link ">
              
  
  
  <span class="md-ellipsis">
    pandas_utils
    
  </span>
  

            </a>
            
              
              <label class="md-nav__link " for="__nav_2_4_1" id="__nav_2_4_1_label" tabindex="0">
                <span class="md-nav__icon md-icon"></span>
              </label>
            
          </div>
        
        <nav class="md-nav" data-md-level="3" aria-labelledby="__nav_2_4_1_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_2_4_1">
            <span class="md-nav__icon md-icon"></span>
            pandas_utils
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../utils/pandas_utils/flatten_df/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Flatten DF
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../utils/pandas_utils/pend_props/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Pend Properties
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../utils/pandas_utils/filter/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Filter by Model
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../utils/pandas_utils/xs_df/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    xs DF
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../utils/pandas_utils/sort_multiindex/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Sort MultiIndex
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../utils/pandas_utils/merge_multi_index_levels/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Merge MultiIndex Levels
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../utils/pandas_utils/set_new_column/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Set New Column in MultiIndex
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../utils/pandas_utils/combine_dfs.md" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Combine DFs
    
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    
    
    
    
      
      
        
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_2_4_2" >
        
          
          <div class="md-nav__link md-nav__container">
            <a href="../../../utils/plotly_utils/" class="md-nav__link ">
              
  
  
  <span class="md-ellipsis">
    plotly_utils
    
  </span>
  

            </a>
            
              
              <label class="md-nav__link " for="__nav_2_4_2" id="__nav_2_4_2_label" tabindex="0">
                <span class="md-nav__icon md-icon"></span>
              </label>
            
          </div>
        
        <nav class="md-nav" data-md-level="3" aria-labelledby="__nav_2_4_2_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_2_4_2">
            <span class="md-nav__icon md-icon"></span>
            plotly_utils
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../utils/plotly_utils/plotly_theme/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    PlotlyTheme
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../utils/plotly_utils/figure_utils/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    figure_utils
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../utils/plotly_utils/px_category_utils/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    px_category_utils
    
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
  
    
    
    
    
      
      
        
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_3" >
        
          
          <label class="md-nav__link" for="__nav_3" id="__nav_3_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    Studies & Examples
    
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_3_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_3">
            <span class="md-nav__icon md-icon"></span>
            Studies & Examples
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    
    
    
    
      
      
        
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_3_1" >
        
          
          <label class="md-nav__link" for="__nav_3_1" id="__nav_3_1_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    Intro to MESCAL
    
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_3_1_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_3_1">
            <span class="md-nav__icon md-icon"></span>
            Intro to MESCAL
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../../../mescal-study-01/notebooks/mescal_101_study_manager_and_basic_fetching/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    MESCAL 101: StudyManager and Dataset Fundamentals
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../../../mescal-study-01/notebooks/mescal_102_mastering_data_fetching/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    MESCAL 102: Advanced Data Fetching Techniques
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../../../mescal-study-01/notebooks/mescal_103_scenario_attributes/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    MESCAL 103: Scenario Attributes
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../../../mescal-study-01/notebooks/mescal_301_time_series_dashboard/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    MESCAL 301: Time Series Dashboard
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../../../mescal-study-01/notebooks/mescal_302_segmented_colormap/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    MESCAL 302: Segmented Colormap
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../../../mescal-study-01/notebooks/mescal_303_folium_model_df_map/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    MESCAL 401: Folium Model Data Visualization - Areas, Points, and Lines
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../../../mescal-study-01/notebooks/mescal_304_folium_area_kpi_map/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    MESCAL 402: Folium KPI Visualization System
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../../../mescal-study-01/notebooks/mescal_304_simple_area_kpi_map/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    MESCAL 303: Interactive Geospatial with Folium
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../../../mescal-study-01/notebooks/mescal_307_country_plotter_util/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    MESCAL 307: Country Plotter Utility Module
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../../../mescal-study-01/notebooks/mescal_308_html_dashboards/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    MESCAL 305: HTML Dashboard Utility
    
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
  </ul>
</nav>
                  </div>
                </div>
              </div>
            
            
              
              <div class="md-sidebar md-sidebar--secondary" data-md-component="sidebar" data-md-type="toc" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    

<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#mescal.visualizations.folium_viz_system.base_viz_system" class="md-nav__link">
    <span class="md-ellipsis">
      base_viz_system
    </span>
  </a>
  
    <nav class="md-nav" aria-label="base_viz_system">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#mescal.visualizations.folium_viz_system.base_viz_system.PropertyMapper" class="md-nav__link">
    <span class="md-ellipsis">
      PropertyMapper
    </span>
  </a>
  
    <nav class="md-nav" aria-label="PropertyMapper">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#mescal.visualizations.folium_viz_system.base_viz_system.PropertyMapper.from_static_value" class="md-nav__link">
    <span class="md-ellipsis">
      from_static_value
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#mescal.visualizations.folium_viz_system.base_viz_system.PropertyMapper.from_item_attr" class="md-nav__link">
    <span class="md-ellipsis">
      from_item_attr
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#mescal.visualizations.folium_viz_system.base_viz_system.PropertyMapper.from_kpi_value" class="md-nav__link">
    <span class="md-ellipsis">
      from_kpi_value
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#mescal.visualizations.folium_viz_system.base_viz_system.ResolvedFeature" class="md-nav__link">
    <span class="md-ellipsis">
      ResolvedFeature
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#mescal.visualizations.folium_viz_system.base_viz_system.FeatureResolver" class="md-nav__link">
    <span class="md-ellipsis">
      FeatureResolver
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#mescal.visualizations.folium_viz_system.base_viz_system.FoliumObjectGenerator" class="md-nav__link">
    <span class="md-ellipsis">
      FoliumObjectGenerator
    </span>
  </a>
  
    <nav class="md-nav" aria-label="FoliumObjectGenerator">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#mescal.visualizations.folium_viz_system.base_viz_system.FoliumObjectGenerator.generate" class="md-nav__link">
    <span class="md-ellipsis">
      generate
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#mescal.visualizations.folium_viz_system.base_viz_system.FoliumObjectGenerator.generate_objects_for_model_df" class="md-nav__link">
    <span class="md-ellipsis">
      generate_objects_for_model_df
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#mescal.visualizations.folium_viz_system.base_viz_system.FoliumObjectGenerator.generate_objects_for_kpi_collection" class="md-nav__link">
    <span class="md-ellipsis">
      generate_objects_for_kpi_collection
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#mescal.visualizations.folium_viz_system.base_viz_system.FoliumObjectGenerator.generate_object_for_single_kpi" class="md-nav__link">
    <span class="md-ellipsis">
      generate_object_for_single_kpi
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
    </ul>
  
</nav>
                  </div>
                </div>
              </div>
            
          
          
            <div class="md-content" data-md-component="content">
              <article class="md-content__inner md-typeset">
                
                  


  
  


<h1 id="mescal-folium-visualization-system-base">MESCAL Folium Visualization System Base<a class="headerlink" href="#mescal-folium-visualization-system-base" title="Permanent link">&para;</a></h1>


<div class="doc doc-object doc-module">



<h2 id="mescal.visualizations.folium_viz_system.base_viz_system" class="doc doc-heading">
<code class="doc-symbol doc-symbol-heading doc-symbol-module"></code>            <span class="doc doc-object-name doc-module-name">base_viz_system</span>


<a href="#mescal.visualizations.folium_viz_system.base_viz_system" class="headerlink" title="Permanent link">&para;</a></h2>

    <div class="doc doc-contents first">










  <div class="doc doc-children">









<div class="doc doc-object doc-class">



<h3 id="mescal.visualizations.folium_viz_system.base_viz_system.PropertyMapper" class="doc doc-heading">
<code class="doc-symbol doc-symbol-heading doc-symbol-class"></code>            <span class="doc doc-object-name doc-class-name">PropertyMapper</span>


<a href="#mescal.visualizations.folium_viz_system.base_viz_system.PropertyMapper" class="headerlink" title="Permanent link">&para;</a></h3>


    <div class="doc doc-contents ">


        <p>Maps data item attributes to visual properties for folium map visualization.</p>
<p>Core abstraction for converting model data, KPI values, or static values into
visual properties (colors, sizes, positions, etc.) for map elements. Used throughout
the folium visualization system to create dynamic, data-driven map styling.</p>
<p>The PropertyMapper encapsulates a transformation function that takes a VisualizableDataItem
and returns a styled value. This enables powerful declarative map styling where
visual properties are automatically computed from underlying data.</p>


<p><span class="doc-section-title">Examples:</span></p>
    <p>Basic color mapping from KPI values:</p>
    <div class="highlight"><pre><span></span><code><span class="gp">&gt;&gt;&gt; </span><span class="n">color_mapper</span> <span class="o">=</span> <span class="n">PropertyMapper</span><span class="o">.</span><span class="n">from_kpi_value</span><span class="p">(</span><span class="k">lambda</span> <span class="n">v</span><span class="p">:</span> <span class="s1">&#39;red&#39;</span> <span class="k">if</span> <span class="n">v</span> <span class="o">&gt;</span> <span class="mi">0</span> <span class="k">else</span> <span class="s1">&#39;blue&#39;</span><span class="p">)</span>
</code></pre></div>
    <p>Size mapping from model attributes:</p>
    <div class="highlight"><pre><span></span><code><span class="gp">&gt;&gt;&gt; </span><span class="n">size_mapper</span> <span class="o">=</span> <span class="n">PropertyMapper</span><span class="o">.</span><span class="n">from_item_attr</span><span class="p">(</span><span class="s1">&#39;capacity&#39;</span><span class="p">,</span> <span class="k">lambda</span> <span class="n">c</span><span class="p">:</span> <span class="n">c</span> <span class="o">/</span> <span class="mi">100</span><span class="p">)</span>
</code></pre></div>
    <p>Static styling:</p>
    <div class="highlight"><pre><span></span><code><span class="gp">&gt;&gt;&gt; </span><span class="n">border_mapper</span> <span class="o">=</span> <span class="n">PropertyMapper</span><span class="o">.</span><span class="n">from_static_value</span><span class="p">(</span><span class="s1">&#39;#000000&#39;</span><span class="p">)</span>
</code></pre></div>
    <p>Complex conditional styling:</p>
    <div class="highlight"><pre><span></span><code><span class="gp">&gt;&gt;&gt; </span><span class="k">def</span><span class="w"> </span><span class="nf">complex_color</span><span class="p">(</span><span class="n">data_item</span><span class="p">:</span> <span class="n">KPIDataItem</span><span class="p">):</span>
<span class="gp">... </span>    <span class="n">kpi_val</span> <span class="o">=</span> <span class="n">data_item</span><span class="o">.</span><span class="n">kpi</span><span class="o">.</span><span class="n">value</span>
<span class="gp">... </span>    <span class="n">threshold</span> <span class="o">=</span> <span class="n">data_item</span><span class="o">.</span><span class="n">get_object_attribute</span><span class="p">(</span><span class="s1">&#39;threshold&#39;</span><span class="p">)</span>
<span class="gp">... </span>    <span class="k">return</span> <span class="s1">&#39;green&#39;</span> <span class="k">if</span> <span class="n">kpi_val</span> <span class="o">&gt;</span> <span class="n">threshold</span> <span class="k">else</span> <span class="s1">&#39;red&#39;</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">mapper</span> <span class="o">=</span> <span class="n">PropertyMapper</span><span class="p">(</span><span class="n">complex_color</span><span class="p">)</span>
</code></pre></div>








              <details class="quote">
                <summary>Source code in <code>submodules/mescal/mescal/visualizations/folium_viz_system/base_viz_system.py</code></summary>
                <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"> 17</span>
<span class="normal"> 18</span>
<span class="normal"> 19</span>
<span class="normal"> 20</span>
<span class="normal"> 21</span>
<span class="normal"> 22</span>
<span class="normal"> 23</span>
<span class="normal"> 24</span>
<span class="normal"> 25</span>
<span class="normal"> 26</span>
<span class="normal"> 27</span>
<span class="normal"> 28</span>
<span class="normal"> 29</span>
<span class="normal"> 30</span>
<span class="normal"> 31</span>
<span class="normal"> 32</span>
<span class="normal"> 33</span>
<span class="normal"> 34</span>
<span class="normal"> 35</span>
<span class="normal"> 36</span>
<span class="normal"> 37</span>
<span class="normal"> 38</span>
<span class="normal"> 39</span>
<span class="normal"> 40</span>
<span class="normal"> 41</span>
<span class="normal"> 42</span>
<span class="normal"> 43</span>
<span class="normal"> 44</span>
<span class="normal"> 45</span>
<span class="normal"> 46</span>
<span class="normal"> 47</span>
<span class="normal"> 48</span>
<span class="normal"> 49</span>
<span class="normal"> 50</span>
<span class="normal"> 51</span>
<span class="normal"> 52</span>
<span class="normal"> 53</span>
<span class="normal"> 54</span>
<span class="normal"> 55</span>
<span class="normal"> 56</span>
<span class="normal"> 57</span>
<span class="normal"> 58</span>
<span class="normal"> 59</span>
<span class="normal"> 60</span>
<span class="normal"> 61</span>
<span class="normal"> 62</span>
<span class="normal"> 63</span>
<span class="normal"> 64</span>
<span class="normal"> 65</span>
<span class="normal"> 66</span>
<span class="normal"> 67</span>
<span class="normal"> 68</span>
<span class="normal"> 69</span>
<span class="normal"> 70</span>
<span class="normal"> 71</span>
<span class="normal"> 72</span>
<span class="normal"> 73</span>
<span class="normal"> 74</span>
<span class="normal"> 75</span>
<span class="normal"> 76</span>
<span class="normal"> 77</span>
<span class="normal"> 78</span>
<span class="normal"> 79</span>
<span class="normal"> 80</span>
<span class="normal"> 81</span>
<span class="normal"> 82</span>
<span class="normal"> 83</span>
<span class="normal"> 84</span>
<span class="normal"> 85</span>
<span class="normal"> 86</span>
<span class="normal"> 87</span>
<span class="normal"> 88</span>
<span class="normal"> 89</span>
<span class="normal"> 90</span>
<span class="normal"> 91</span>
<span class="normal"> 92</span>
<span class="normal"> 93</span>
<span class="normal"> 94</span>
<span class="normal"> 95</span>
<span class="normal"> 96</span>
<span class="normal"> 97</span>
<span class="normal"> 98</span>
<span class="normal"> 99</span>
<span class="normal">100</span>
<span class="normal">101</span>
<span class="normal">102</span>
<span class="normal">103</span>
<span class="normal">104</span>
<span class="normal">105</span>
<span class="normal">106</span>
<span class="normal">107</span>
<span class="normal">108</span>
<span class="normal">109</span>
<span class="normal">110</span>
<span class="normal">111</span>
<span class="normal">112</span>
<span class="normal">113</span>
<span class="normal">114</span>
<span class="normal">115</span>
<span class="normal">116</span>
<span class="normal">117</span>
<span class="normal">118</span>
<span class="normal">119</span>
<span class="normal">120</span>
<span class="normal">121</span>
<span class="normal">122</span>
<span class="normal">123</span>
<span class="normal">124</span>
<span class="normal">125</span>
<span class="normal">126</span>
<span class="normal">127</span>
<span class="normal">128</span>
<span class="normal">129</span>
<span class="normal">130</span>
<span class="normal">131</span>
<span class="normal">132</span>
<span class="normal">133</span>
<span class="normal">134</span>
<span class="normal">135</span>
<span class="normal">136</span>
<span class="normal">137</span>
<span class="normal">138</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">class</span><span class="w"> </span><span class="nc">PropertyMapper</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Maps data item attributes to visual properties for folium map visualization.</span>

<span class="sd">    Core abstraction for converting model data, KPI values, or static values into</span>
<span class="sd">    visual properties (colors, sizes, positions, etc.) for map elements. Used throughout</span>
<span class="sd">    the folium visualization system to create dynamic, data-driven map styling.</span>

<span class="sd">    The PropertyMapper encapsulates a transformation function that takes a VisualizableDataItem</span>
<span class="sd">    and returns a styled value. This enables powerful declarative map styling where</span>
<span class="sd">    visual properties are automatically computed from underlying data.</span>

<span class="sd">    Examples:</span>
<span class="sd">        Basic color mapping from KPI values:</span>
<span class="sd">        &gt;&gt;&gt; color_mapper = PropertyMapper.from_kpi_value(lambda v: &#39;red&#39; if v &gt; 0 else &#39;blue&#39;)</span>

<span class="sd">        Size mapping from model attributes:</span>
<span class="sd">        &gt;&gt;&gt; size_mapper = PropertyMapper.from_item_attr(&#39;capacity&#39;, lambda c: c / 100)</span>

<span class="sd">        Static styling:</span>
<span class="sd">        &gt;&gt;&gt; border_mapper = PropertyMapper.from_static_value(&#39;#000000&#39;)</span>

<span class="sd">        Complex conditional styling:</span>
<span class="sd">        &gt;&gt;&gt; def complex_color(data_item: KPIDataItem):</span>
<span class="sd">        ...     kpi_val = data_item.kpi.value</span>
<span class="sd">        ...     threshold = data_item.get_object_attribute(&#39;threshold&#39;)</span>
<span class="sd">        ...     return &#39;green&#39; if kpi_val &gt; threshold else &#39;red&#39;</span>
<span class="sd">        &gt;&gt;&gt; mapper = PropertyMapper(complex_color)</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">def</span><span class="w"> </span><span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">mapping</span><span class="p">:</span> <span class="n">Callable</span><span class="p">[[</span><span class="n">VisualizableDataItem</span><span class="p">],</span> <span class="n">Any</span><span class="p">]):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">mapping</span> <span class="o">=</span> <span class="n">mapping</span>

    <span class="k">def</span><span class="w"> </span><span class="nf">map_data_item</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">data_item</span><span class="p">:</span> <span class="n">VisualizableDataItem</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Any</span><span class="p">:</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">mapping</span><span class="p">(</span><span class="n">data_item</span><span class="p">)</span>

    <span class="nd">@classmethod</span>
    <span class="k">def</span><span class="w"> </span><span class="nf">from_static_value</span><span class="p">(</span><span class="bp">cls</span><span class="p">,</span> <span class="n">value</span><span class="p">:</span> <span class="n">Any</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="s1">&#39;PropertyMapper&#39;</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Create mapper that returns the same value for all data items.</span>

<span class="sd">        Used for consistent styling across all map elements (e.g., all borders</span>
<span class="sd">        the same color, all markers the same size).</span>

<span class="sd">        Args:</span>
<span class="sd">            value: Static value to return for all data items</span>

<span class="sd">        Returns:</span>
<span class="sd">            PropertyMapper that always returns the static value</span>

<span class="sd">        Examples:</span>
<span class="sd">            &gt;&gt;&gt; border_color = PropertyMapper.from_static_value(&#39;#FFFFFF&#39;)</span>
<span class="sd">            &gt;&gt;&gt; opacity = PropertyMapper.from_static_value(0.8)</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="bp">cls</span><span class="p">(</span><span class="k">lambda</span> <span class="n">data_item</span><span class="p">:</span> <span class="n">value</span><span class="p">)</span>

    <span class="nd">@classmethod</span>
    <span class="k">def</span><span class="w"> </span><span class="nf">from_item_attr</span><span class="p">(</span>
            <span class="bp">cls</span><span class="p">,</span>
            <span class="n">attribute</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span>
            <span class="n">mapping</span><span class="p">:</span> <span class="n">Callable</span><span class="p">[[</span><span class="n">Any</span><span class="p">],</span> <span class="n">Any</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
    <span class="p">)</span> <span class="o">-&gt;</span> <span class="s1">&#39;PropertyMapper&#39;</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Create mapper from model/object attribute with optional transformation.</span>

<span class="sd">        Extracts values from model data attributes (geometry, capacity, name, etc.)</span>
<span class="sd">        and optionally applies a transformation function. The attribute is resolved</span>
<span class="sd">        from the underlying model DataFrame or object data.</span>

<span class="sd">        Args:</span>
<span class="sd">            attribute: Name of the attribute to extract (e.g., &#39;geometry&#39;, &#39;capacity&#39;), must be an entry in the object pd.Series</span>
<span class="sd">            mapping: Optional transformation function to apply to the attribute value</span>

<span class="sd">        Returns:</span>
<span class="sd">            PropertyMapper that extracts and optionally transforms the attribute</span>

<span class="sd">        Examples:</span>
<span class="sd">            &gt;&gt;&gt; # Direct attribute access</span>
<span class="sd">            &gt;&gt;&gt; geom_mapper = PropertyMapper.from_item_attr(&#39;geometry&#39;)</span>
<span class="sd">            &gt;&gt;&gt;</span>
<span class="sd">            &gt;&gt;&gt; # With color scale transformation</span>
<span class="sd">            &gt;&gt;&gt; color_scale = SegmentedContinuousColorscale(...)</span>
<span class="sd">            &gt;&gt;&gt; color_mapper = PropertyMapper.from_item_attr(&#39;capacity&#39;, color_scale)</span>
<span class="sd">            &gt;&gt;&gt;</span>
<span class="sd">            &gt;&gt;&gt; # With custom transformation</span>
<span class="sd">            &gt;&gt;&gt; size_mapper = PropertyMapper.from_item_attr(&#39;power_mw&#39;,</span>
<span class="sd">            ...                                           lambda mw: min(max(mw/10, 5), 50))</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="n">mapping</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
            <span class="n">mapping</span> <span class="o">=</span> <span class="k">lambda</span> <span class="n">x</span><span class="p">:</span> <span class="n">x</span>
        <span class="k">return</span> <span class="bp">cls</span><span class="p">(</span><span class="k">lambda</span> <span class="n">data_item</span><span class="p">:</span> <span class="n">mapping</span><span class="p">(</span><span class="n">data_item</span><span class="o">.</span><span class="n">get_object_attribute</span><span class="p">(</span><span class="n">attribute</span><span class="p">)))</span>

    <span class="nd">@classmethod</span>
    <span class="k">def</span><span class="w"> </span><span class="nf">from_kpi_value</span><span class="p">(</span><span class="bp">cls</span><span class="p">,</span> <span class="n">mapping</span><span class="p">:</span> <span class="n">Callable</span><span class="p">[[</span><span class="n">Any</span><span class="p">],</span> <span class="n">Any</span><span class="p">])</span> <span class="o">-&gt;</span> <span class="s1">&#39;PropertyMapper&#39;</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Create mapper from KPI values with transformation function.</span>

<span class="sd">        Specifically designed for KPIDataItem objects, extracts the computed KPI value</span>
<span class="sd">        and applies a transformation. Used for styling based on energy system metrics</span>
<span class="sd">        like power flows, prices, or emissions.</span>

<span class="sd">        Args:</span>
<span class="sd">            mapping: Transformation function applied to the KPI value</span>

<span class="sd">        Returns:</span>
<span class="sd">            PropertyMapper that transforms KPI values</span>

<span class="sd">        Examples:</span>
<span class="sd">            &gt;&gt;&gt; # Color mapping for power flows</span>
<span class="sd">            &gt;&gt;&gt; flow_colors = PropertyMapper.from_kpi_value(</span>
<span class="sd">            ...     lambda v: &#39;red&#39; if v &gt; 1000 else &#39;green&#39;</span>
<span class="sd">            ... )</span>
<span class="sd">            &gt;&gt;&gt;</span>
<span class="sd">            &gt;&gt;&gt; # Size mapping for prices</span>
<span class="sd">            &gt;&gt;&gt; price_sizes = PropertyMapper.from_kpi_value(</span>
<span class="sd">            ...     lambda p: min(max(p * 2, 10), 100)</span>
<span class="sd">            ... )</span>
<span class="sd">            &gt;&gt;&gt;</span>
<span class="sd">            &gt;&gt;&gt; # Using value mapping system</span>
<span class="sd">            &gt;&gt;&gt; colorscale = SegmentedContinuousColorscale(...)</span>
<span class="sd">            &gt;&gt;&gt; colors = PropertyMapper.from_kpi_value(colorscale)</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="bp">cls</span><span class="p">(</span><span class="k">lambda</span> <span class="n">data_item</span><span class="p">:</span> <span class="n">mapping</span><span class="p">(</span><span class="n">data_item</span><span class="o">.</span><span class="n">kpi</span><span class="o">.</span><span class="n">value</span><span class="p">))</span>
</code></pre></div></td></tr></table></div>
              </details>



  <div class="doc doc-children">










<div class="doc doc-object doc-function">


<h4 id="mescal.visualizations.folium_viz_system.base_viz_system.PropertyMapper.from_static_value" class="doc doc-heading">
<code class="doc-symbol doc-symbol-heading doc-symbol-method"></code>            <span class="doc doc-object-name doc-function-name">from_static_value</span>


  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-classmethod"><code>classmethod</code></small>
  </span>

<a href="#mescal.visualizations.folium_viz_system.base_viz_system.PropertyMapper.from_static_value" class="headerlink" title="Permanent link">&para;</a></h4>
<div class="doc-signature highlight"><pre><span></span><code><span class="nf">from_static_value</span><span class="p">(</span><span class="n">value</span><span class="p">:</span> <span class="n"><span title="typing.Any">Any</span></span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n"><a class="autorefs autorefs-internal" title="            PropertyMapper (mescal.visualizations.folium_viz_system.base_viz_system.PropertyMapper)" href="#mescal.visualizations.folium_viz_system.base_viz_system.PropertyMapper">PropertyMapper</a></span>
</code></pre></div>

    <div class="doc doc-contents ">

        <p>Create mapper that returns the same value for all data items.</p>
<p>Used for consistent styling across all map elements (e.g., all borders
the same color, all markers the same size).</p>


<p><span class="doc-section-title">Parameters:</span></p>
    <table>
      <thead>
        <tr>
          <th>Name</th>
          <th>Type</th>
          <th>Description</th>
          <th>Default</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                <code>value</code>
            </td>
            <td>
                  <code><span title="typing.Any">Any</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Static value to return for all data items</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
      </tbody>
    </table>


    <p><span class="doc-section-title">Returns:</span></p>
    <table>
      <thead>
        <tr>
          <th>Type</th>
          <th>Description</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                  <code><a class="autorefs autorefs-internal" title="            PropertyMapper (mescal.visualizations.folium_viz_system.base_viz_system.PropertyMapper)" href="#mescal.visualizations.folium_viz_system.base_viz_system.PropertyMapper">PropertyMapper</a></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>PropertyMapper that always returns the static value</p>
              </div>
            </td>
          </tr>
      </tbody>
    </table>


<p><span class="doc-section-title">Examples:</span></p>
    <div class="highlight"><pre><span></span><code><span class="gp">&gt;&gt;&gt; </span><span class="n">border_color</span> <span class="o">=</span> <span class="n">PropertyMapper</span><span class="o">.</span><span class="n">from_static_value</span><span class="p">(</span><span class="s1">&#39;#FFFFFF&#39;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">opacity</span> <span class="o">=</span> <span class="n">PropertyMapper</span><span class="o">.</span><span class="n">from_static_value</span><span class="p">(</span><span class="mf">0.8</span><span class="p">)</span>
</code></pre></div>


            <details class="quote">
              <summary>Source code in <code>submodules/mescal/mescal/visualizations/folium_viz_system/base_viz_system.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">52</span>
<span class="normal">53</span>
<span class="normal">54</span>
<span class="normal">55</span>
<span class="normal">56</span>
<span class="normal">57</span>
<span class="normal">58</span>
<span class="normal">59</span>
<span class="normal">60</span>
<span class="normal">61</span>
<span class="normal">62</span>
<span class="normal">63</span>
<span class="normal">64</span>
<span class="normal">65</span>
<span class="normal">66</span>
<span class="normal">67</span>
<span class="normal">68</span>
<span class="normal">69</span>
<span class="normal">70</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="nd">@classmethod</span>
<span class="k">def</span><span class="w"> </span><span class="nf">from_static_value</span><span class="p">(</span><span class="bp">cls</span><span class="p">,</span> <span class="n">value</span><span class="p">:</span> <span class="n">Any</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="s1">&#39;PropertyMapper&#39;</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Create mapper that returns the same value for all data items.</span>

<span class="sd">    Used for consistent styling across all map elements (e.g., all borders</span>
<span class="sd">    the same color, all markers the same size).</span>

<span class="sd">    Args:</span>
<span class="sd">        value: Static value to return for all data items</span>

<span class="sd">    Returns:</span>
<span class="sd">        PropertyMapper that always returns the static value</span>

<span class="sd">    Examples:</span>
<span class="sd">        &gt;&gt;&gt; border_color = PropertyMapper.from_static_value(&#39;#FFFFFF&#39;)</span>
<span class="sd">        &gt;&gt;&gt; opacity = PropertyMapper.from_static_value(0.8)</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">return</span> <span class="bp">cls</span><span class="p">(</span><span class="k">lambda</span> <span class="n">data_item</span><span class="p">:</span> <span class="n">value</span><span class="p">)</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h4 id="mescal.visualizations.folium_viz_system.base_viz_system.PropertyMapper.from_item_attr" class="doc doc-heading">
<code class="doc-symbol doc-symbol-heading doc-symbol-method"></code>            <span class="doc doc-object-name doc-function-name">from_item_attr</span>


  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-classmethod"><code>classmethod</code></small>
  </span>

<a href="#mescal.visualizations.folium_viz_system.base_viz_system.PropertyMapper.from_item_attr" class="headerlink" title="Permanent link">&para;</a></h4>
<div class="doc-signature highlight"><pre><span></span><code><span class="nf">from_item_attr</span><span class="p">(</span><span class="n">attribute</span><span class="p">:</span> <span class="n"><span title="str">str</span></span><span class="p">,</span> <span class="n">mapping</span><span class="p">:</span> <span class="n"><span title="typing.Callable">Callable</span></span><span class="p">[[</span><span class="n"><span title="typing.Any">Any</span></span><span class="p">],</span> <span class="n"><span title="typing.Any">Any</span></span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n"><a class="autorefs autorefs-internal" title="            PropertyMapper (mescal.visualizations.folium_viz_system.base_viz_system.PropertyMapper)" href="#mescal.visualizations.folium_viz_system.base_viz_system.PropertyMapper">PropertyMapper</a></span>
</code></pre></div>

    <div class="doc doc-contents ">

        <p>Create mapper from model/object attribute with optional transformation.</p>
<p>Extracts values from model data attributes (geometry, capacity, name, etc.)
and optionally applies a transformation function. The attribute is resolved
from the underlying model DataFrame or object data.</p>


<p><span class="doc-section-title">Parameters:</span></p>
    <table>
      <thead>
        <tr>
          <th>Name</th>
          <th>Type</th>
          <th>Description</th>
          <th>Default</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                <code>attribute</code>
            </td>
            <td>
                  <code><span title="str">str</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Name of the attribute to extract (e.g., 'geometry', 'capacity'), must be an entry in the object pd.Series</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>mapping</code>
            </td>
            <td>
                  <code><span title="typing.Callable">Callable</span>[[<span title="typing.Any">Any</span>], <span title="typing.Any">Any</span>]</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Optional transformation function to apply to the attribute value</p>
              </div>
            </td>
            <td>
                  <code>None</code>
            </td>
          </tr>
      </tbody>
    </table>


    <p><span class="doc-section-title">Returns:</span></p>
    <table>
      <thead>
        <tr>
          <th>Type</th>
          <th>Description</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                  <code><a class="autorefs autorefs-internal" title="            PropertyMapper (mescal.visualizations.folium_viz_system.base_viz_system.PropertyMapper)" href="#mescal.visualizations.folium_viz_system.base_viz_system.PropertyMapper">PropertyMapper</a></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>PropertyMapper that extracts and optionally transforms the attribute</p>
              </div>
            </td>
          </tr>
      </tbody>
    </table>


<p><span class="doc-section-title">Examples:</span></p>
    <div class="highlight"><pre><span></span><code><span class="gp">&gt;&gt;&gt; </span><span class="c1"># Direct attribute access</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">geom_mapper</span> <span class="o">=</span> <span class="n">PropertyMapper</span><span class="o">.</span><span class="n">from_item_attr</span><span class="p">(</span><span class="s1">&#39;geometry&#39;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt;</span>
<span class="gp">&gt;&gt;&gt; </span><span class="c1"># With color scale transformation</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">color_scale</span> <span class="o">=</span> <span class="n">SegmentedContinuousColorscale</span><span class="p">(</span><span class="o">...</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">color_mapper</span> <span class="o">=</span> <span class="n">PropertyMapper</span><span class="o">.</span><span class="n">from_item_attr</span><span class="p">(</span><span class="s1">&#39;capacity&#39;</span><span class="p">,</span> <span class="n">color_scale</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt;</span>
<span class="gp">&gt;&gt;&gt; </span><span class="c1"># With custom transformation</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">size_mapper</span> <span class="o">=</span> <span class="n">PropertyMapper</span><span class="o">.</span><span class="n">from_item_attr</span><span class="p">(</span><span class="s1">&#39;power_mw&#39;</span><span class="p">,</span>
<span class="gp">... </span>                                          <span class="k">lambda</span> <span class="n">mw</span><span class="p">:</span> <span class="nb">min</span><span class="p">(</span><span class="nb">max</span><span class="p">(</span><span class="n">mw</span><span class="o">/</span><span class="mi">10</span><span class="p">,</span> <span class="mi">5</span><span class="p">),</span> <span class="mi">50</span><span class="p">))</span>
</code></pre></div>


            <details class="quote">
              <summary>Source code in <code>submodules/mescal/mescal/visualizations/folium_viz_system/base_viz_system.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"> 72</span>
<span class="normal"> 73</span>
<span class="normal"> 74</span>
<span class="normal"> 75</span>
<span class="normal"> 76</span>
<span class="normal"> 77</span>
<span class="normal"> 78</span>
<span class="normal"> 79</span>
<span class="normal"> 80</span>
<span class="normal"> 81</span>
<span class="normal"> 82</span>
<span class="normal"> 83</span>
<span class="normal"> 84</span>
<span class="normal"> 85</span>
<span class="normal"> 86</span>
<span class="normal"> 87</span>
<span class="normal"> 88</span>
<span class="normal"> 89</span>
<span class="normal"> 90</span>
<span class="normal"> 91</span>
<span class="normal"> 92</span>
<span class="normal"> 93</span>
<span class="normal"> 94</span>
<span class="normal"> 95</span>
<span class="normal"> 96</span>
<span class="normal"> 97</span>
<span class="normal"> 98</span>
<span class="normal"> 99</span>
<span class="normal">100</span>
<span class="normal">101</span>
<span class="normal">102</span>
<span class="normal">103</span>
<span class="normal">104</span>
<span class="normal">105</span>
<span class="normal">106</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="nd">@classmethod</span>
<span class="k">def</span><span class="w"> </span><span class="nf">from_item_attr</span><span class="p">(</span>
        <span class="bp">cls</span><span class="p">,</span>
        <span class="n">attribute</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span>
        <span class="n">mapping</span><span class="p">:</span> <span class="n">Callable</span><span class="p">[[</span><span class="n">Any</span><span class="p">],</span> <span class="n">Any</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
<span class="p">)</span> <span class="o">-&gt;</span> <span class="s1">&#39;PropertyMapper&#39;</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Create mapper from model/object attribute with optional transformation.</span>

<span class="sd">    Extracts values from model data attributes (geometry, capacity, name, etc.)</span>
<span class="sd">    and optionally applies a transformation function. The attribute is resolved</span>
<span class="sd">    from the underlying model DataFrame or object data.</span>

<span class="sd">    Args:</span>
<span class="sd">        attribute: Name of the attribute to extract (e.g., &#39;geometry&#39;, &#39;capacity&#39;), must be an entry in the object pd.Series</span>
<span class="sd">        mapping: Optional transformation function to apply to the attribute value</span>

<span class="sd">    Returns:</span>
<span class="sd">        PropertyMapper that extracts and optionally transforms the attribute</span>

<span class="sd">    Examples:</span>
<span class="sd">        &gt;&gt;&gt; # Direct attribute access</span>
<span class="sd">        &gt;&gt;&gt; geom_mapper = PropertyMapper.from_item_attr(&#39;geometry&#39;)</span>
<span class="sd">        &gt;&gt;&gt;</span>
<span class="sd">        &gt;&gt;&gt; # With color scale transformation</span>
<span class="sd">        &gt;&gt;&gt; color_scale = SegmentedContinuousColorscale(...)</span>
<span class="sd">        &gt;&gt;&gt; color_mapper = PropertyMapper.from_item_attr(&#39;capacity&#39;, color_scale)</span>
<span class="sd">        &gt;&gt;&gt;</span>
<span class="sd">        &gt;&gt;&gt; # With custom transformation</span>
<span class="sd">        &gt;&gt;&gt; size_mapper = PropertyMapper.from_item_attr(&#39;power_mw&#39;,</span>
<span class="sd">        ...                                           lambda mw: min(max(mw/10, 5), 50))</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">if</span> <span class="n">mapping</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
        <span class="n">mapping</span> <span class="o">=</span> <span class="k">lambda</span> <span class="n">x</span><span class="p">:</span> <span class="n">x</span>
    <span class="k">return</span> <span class="bp">cls</span><span class="p">(</span><span class="k">lambda</span> <span class="n">data_item</span><span class="p">:</span> <span class="n">mapping</span><span class="p">(</span><span class="n">data_item</span><span class="o">.</span><span class="n">get_object_attribute</span><span class="p">(</span><span class="n">attribute</span><span class="p">)))</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h4 id="mescal.visualizations.folium_viz_system.base_viz_system.PropertyMapper.from_kpi_value" class="doc doc-heading">
<code class="doc-symbol doc-symbol-heading doc-symbol-method"></code>            <span class="doc doc-object-name doc-function-name">from_kpi_value</span>


  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-classmethod"><code>classmethod</code></small>
  </span>

<a href="#mescal.visualizations.folium_viz_system.base_viz_system.PropertyMapper.from_kpi_value" class="headerlink" title="Permanent link">&para;</a></h4>
<div class="doc-signature highlight"><pre><span></span><code><span class="nf">from_kpi_value</span><span class="p">(</span><span class="n">mapping</span><span class="p">:</span> <span class="n"><span title="typing.Callable">Callable</span></span><span class="p">[[</span><span class="n"><span title="typing.Any">Any</span></span><span class="p">],</span> <span class="n"><span title="typing.Any">Any</span></span><span class="p">])</span> <span class="o">-&gt;</span> <span class="n"><a class="autorefs autorefs-internal" title="            PropertyMapper (mescal.visualizations.folium_viz_system.base_viz_system.PropertyMapper)" href="#mescal.visualizations.folium_viz_system.base_viz_system.PropertyMapper">PropertyMapper</a></span>
</code></pre></div>

    <div class="doc doc-contents ">

        <p>Create mapper from KPI values with transformation function.</p>
<p>Specifically designed for KPIDataItem objects, extracts the computed KPI value
and applies a transformation. Used for styling based on energy system metrics
like power flows, prices, or emissions.</p>


<p><span class="doc-section-title">Parameters:</span></p>
    <table>
      <thead>
        <tr>
          <th>Name</th>
          <th>Type</th>
          <th>Description</th>
          <th>Default</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                <code>mapping</code>
            </td>
            <td>
                  <code><span title="typing.Callable">Callable</span>[[<span title="typing.Any">Any</span>], <span title="typing.Any">Any</span>]</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Transformation function applied to the KPI value</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
      </tbody>
    </table>


    <p><span class="doc-section-title">Returns:</span></p>
    <table>
      <thead>
        <tr>
          <th>Type</th>
          <th>Description</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                  <code><a class="autorefs autorefs-internal" title="            PropertyMapper (mescal.visualizations.folium_viz_system.base_viz_system.PropertyMapper)" href="#mescal.visualizations.folium_viz_system.base_viz_system.PropertyMapper">PropertyMapper</a></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>PropertyMapper that transforms KPI values</p>
              </div>
            </td>
          </tr>
      </tbody>
    </table>


<p><span class="doc-section-title">Examples:</span></p>
    <div class="highlight"><pre><span></span><code><span class="gp">&gt;&gt;&gt; </span><span class="c1"># Color mapping for power flows</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">flow_colors</span> <span class="o">=</span> <span class="n">PropertyMapper</span><span class="o">.</span><span class="n">from_kpi_value</span><span class="p">(</span>
<span class="gp">... </span>    <span class="k">lambda</span> <span class="n">v</span><span class="p">:</span> <span class="s1">&#39;red&#39;</span> <span class="k">if</span> <span class="n">v</span> <span class="o">&gt;</span> <span class="mi">1000</span> <span class="k">else</span> <span class="s1">&#39;green&#39;</span>
<span class="gp">... </span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt;</span>
<span class="gp">&gt;&gt;&gt; </span><span class="c1"># Size mapping for prices</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">price_sizes</span> <span class="o">=</span> <span class="n">PropertyMapper</span><span class="o">.</span><span class="n">from_kpi_value</span><span class="p">(</span>
<span class="gp">... </span>    <span class="k">lambda</span> <span class="n">p</span><span class="p">:</span> <span class="nb">min</span><span class="p">(</span><span class="nb">max</span><span class="p">(</span><span class="n">p</span> <span class="o">*</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">10</span><span class="p">),</span> <span class="mi">100</span><span class="p">)</span>
<span class="gp">... </span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt;</span>
<span class="gp">&gt;&gt;&gt; </span><span class="c1"># Using value mapping system</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">colorscale</span> <span class="o">=</span> <span class="n">SegmentedContinuousColorscale</span><span class="p">(</span><span class="o">...</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">colors</span> <span class="o">=</span> <span class="n">PropertyMapper</span><span class="o">.</span><span class="n">from_kpi_value</span><span class="p">(</span><span class="n">colorscale</span><span class="p">)</span>
</code></pre></div>


            <details class="quote">
              <summary>Source code in <code>submodules/mescal/mescal/visualizations/folium_viz_system/base_viz_system.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">108</span>
<span class="normal">109</span>
<span class="normal">110</span>
<span class="normal">111</span>
<span class="normal">112</span>
<span class="normal">113</span>
<span class="normal">114</span>
<span class="normal">115</span>
<span class="normal">116</span>
<span class="normal">117</span>
<span class="normal">118</span>
<span class="normal">119</span>
<span class="normal">120</span>
<span class="normal">121</span>
<span class="normal">122</span>
<span class="normal">123</span>
<span class="normal">124</span>
<span class="normal">125</span>
<span class="normal">126</span>
<span class="normal">127</span>
<span class="normal">128</span>
<span class="normal">129</span>
<span class="normal">130</span>
<span class="normal">131</span>
<span class="normal">132</span>
<span class="normal">133</span>
<span class="normal">134</span>
<span class="normal">135</span>
<span class="normal">136</span>
<span class="normal">137</span>
<span class="normal">138</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="nd">@classmethod</span>
<span class="k">def</span><span class="w"> </span><span class="nf">from_kpi_value</span><span class="p">(</span><span class="bp">cls</span><span class="p">,</span> <span class="n">mapping</span><span class="p">:</span> <span class="n">Callable</span><span class="p">[[</span><span class="n">Any</span><span class="p">],</span> <span class="n">Any</span><span class="p">])</span> <span class="o">-&gt;</span> <span class="s1">&#39;PropertyMapper&#39;</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Create mapper from KPI values with transformation function.</span>

<span class="sd">    Specifically designed for KPIDataItem objects, extracts the computed KPI value</span>
<span class="sd">    and applies a transformation. Used for styling based on energy system metrics</span>
<span class="sd">    like power flows, prices, or emissions.</span>

<span class="sd">    Args:</span>
<span class="sd">        mapping: Transformation function applied to the KPI value</span>

<span class="sd">    Returns:</span>
<span class="sd">        PropertyMapper that transforms KPI values</span>

<span class="sd">    Examples:</span>
<span class="sd">        &gt;&gt;&gt; # Color mapping for power flows</span>
<span class="sd">        &gt;&gt;&gt; flow_colors = PropertyMapper.from_kpi_value(</span>
<span class="sd">        ...     lambda v: &#39;red&#39; if v &gt; 1000 else &#39;green&#39;</span>
<span class="sd">        ... )</span>
<span class="sd">        &gt;&gt;&gt;</span>
<span class="sd">        &gt;&gt;&gt; # Size mapping for prices</span>
<span class="sd">        &gt;&gt;&gt; price_sizes = PropertyMapper.from_kpi_value(</span>
<span class="sd">        ...     lambda p: min(max(p * 2, 10), 100)</span>
<span class="sd">        ... )</span>
<span class="sd">        &gt;&gt;&gt;</span>
<span class="sd">        &gt;&gt;&gt; # Using value mapping system</span>
<span class="sd">        &gt;&gt;&gt; colorscale = SegmentedContinuousColorscale(...)</span>
<span class="sd">        &gt;&gt;&gt; colors = PropertyMapper.from_kpi_value(colorscale)</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">return</span> <span class="bp">cls</span><span class="p">(</span><span class="k">lambda</span> <span class="n">data_item</span><span class="p">:</span> <span class="n">mapping</span><span class="p">(</span><span class="n">data_item</span><span class="o">.</span><span class="n">kpi</span><span class="o">.</span><span class="n">value</span><span class="p">))</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>



  </div>

    </div>

</div>

<div class="doc doc-object doc-class">



<h3 id="mescal.visualizations.folium_viz_system.base_viz_system.ResolvedFeature" class="doc doc-heading">
<code class="doc-symbol doc-symbol-heading doc-symbol-class"></code>            <span class="doc doc-object-name doc-class-name">ResolvedFeature</span>


  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-dataclass"><code>dataclass</code></small>
  </span>

<a href="#mescal.visualizations.folium_viz_system.base_viz_system.ResolvedFeature" class="headerlink" title="Permanent link">&para;</a></h3>


    <div class="doc doc-contents ">


        <p>Container for resolved feature properties.</p>








              <details class="quote">
                <summary>Source code in <code>submodules/mescal/mescal/visualizations/folium_viz_system/base_viz_system.py</code></summary>
                <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">141</span>
<span class="normal">142</span>
<span class="normal">143</span>
<span class="normal">144</span>
<span class="normal">145</span>
<span class="normal">146</span>
<span class="normal">147</span>
<span class="normal">148</span>
<span class="normal">149</span>
<span class="normal">150</span>
<span class="normal">151</span>
<span class="normal">152</span>
<span class="normal">153</span>
<span class="normal">154</span>
<span class="normal">155</span>
<span class="normal">156</span>
<span class="normal">157</span>
<span class="normal">158</span>
<span class="normal">159</span>
<span class="normal">160</span>
<span class="normal">161</span>
<span class="normal">162</span>
<span class="normal">163</span>
<span class="normal">164</span>
<span class="normal">165</span>
<span class="normal">166</span>
<span class="normal">167</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="nd">@dataclass</span>
<span class="k">class</span><span class="w"> </span><span class="nc">ResolvedFeature</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Container for resolved feature properties.&quot;&quot;&quot;</span>
    <span class="n">properties</span><span class="p">:</span> <span class="nb">dict</span> <span class="o">=</span> <span class="n">field</span><span class="p">(</span><span class="n">default_factory</span><span class="o">=</span><span class="nb">dict</span><span class="p">)</span>
    <span class="n">tooltip</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="kc">None</span>
    <span class="n">popup</span><span class="p">:</span> <span class="n">folium</span><span class="o">.</span><span class="n">Popup</span> <span class="o">=</span> <span class="kc">None</span>
    <span class="n">text_print_content</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="kc">None</span>

    <span class="k">def</span><span class="w"> </span><span class="nf">get</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="nb">property</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span> <span class="n">default</span><span class="o">=</span><span class="kc">None</span><span class="p">):</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">properties</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="nb">property</span><span class="p">,</span> <span class="n">default</span><span class="p">)</span>

    <span class="k">def</span><span class="w"> </span><span class="fm">__getitem__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">key</span><span class="p">):</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">properties</span><span class="p">[</span><span class="n">key</span><span class="p">]</span>

    <span class="k">def</span><span class="w"> </span><span class="fm">__setitem__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">key</span><span class="p">,</span> <span class="n">value</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">properties</span><span class="p">[</span><span class="n">key</span><span class="p">]</span> <span class="o">=</span> <span class="n">value</span>

    <span class="k">def</span><span class="w"> </span><span class="fm">__contains__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">key</span><span class="p">):</span>
        <span class="k">return</span> <span class="n">key</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">properties</span>

    <span class="k">def</span><span class="w"> </span><span class="nf">to_dict</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">Any</span><span class="p">]:</span>
        <span class="n">out</span> <span class="o">=</span> <span class="nb">dict</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">properties</span><span class="p">)</span>
        <span class="k">for</span> <span class="n">name</span> <span class="ow">in</span> <span class="nb">dir</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="vm">__class__</span><span class="p">):</span>
            <span class="n">attr</span> <span class="o">=</span> <span class="nb">getattr</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="vm">__class__</span><span class="p">,</span> <span class="n">name</span><span class="p">)</span>
            <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">attr</span><span class="p">,</span> <span class="nb">property</span><span class="p">):</span>
                <span class="n">out</span><span class="p">[</span><span class="n">name</span><span class="p">]</span> <span class="o">=</span> <span class="nb">getattr</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">name</span><span class="p">)</span>
        <span class="k">return</span> <span class="n">out</span>
</code></pre></div></td></tr></table></div>
              </details>



  <div class="doc doc-children">












  </div>

    </div>

</div>

<div class="doc doc-object doc-class">



<h3 id="mescal.visualizations.folium_viz_system.base_viz_system.FeatureResolver" class="doc doc-heading">
<code class="doc-symbol doc-symbol-heading doc-symbol-class"></code>            <span class="doc doc-object-name doc-class-name">FeatureResolver</span>


<a href="#mescal.visualizations.folium_viz_system.base_viz_system.FeatureResolver" class="headerlink" title="Permanent link">&para;</a></h3>


    <div class="doc doc-contents ">
            <p class="doc doc-class-bases">
              Bases: <code><span title="typing.Generic">Generic</span>[<span title="mescal.typevars.ResolvedFeatureType">ResolvedFeatureType</span>]</code></p>


        <p>Resolves visual feature properties from data items using PropertyMappers.</p>
<p>Central orchestrator for map element styling that takes a VisualizableDataItem
and a collection of PropertyMappers, then produces a ResolvedFeature containing
all computed visual properties. Handles default values, tooltip generation,
and property normalization.</p>
<p>The FeatureResolver acts as a bridge between data and visualization, converting
raw data items into styled features ready for folium map rendering. It supports
automatic tooltip/popup generation and flexible property mapping.</p>


<p>
      <span class="doc-section-title">
        Class Type Parameters:
      </span>
    </p>
    <table>
      <thead>
        <tr>
          <th>Name</th>
          <th>Bound or Constraints</th>
          <th>Description</th>
          <th>Default</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                <code>ResolvedFeatureType</code>
            </td>
            <td>
            </td>
            <td>
              <div class="doc-md-description">
                <p>The specific resolved feature type (e.g., ResolvedAreaFeature)</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
      </tbody>
    </table>


<p><span class="doc-section-title">Examples:</span></p>
    <div class="highlight"><pre><span></span><code><span class="gp">&gt;&gt;&gt; </span><span class="n">resolver</span> <span class="o">=</span> <span class="n">AreaFeatureResolver</span><span class="p">(</span>
<span class="gp">... </span>    <span class="n">fill_color</span><span class="o">=</span><span class="n">PropertyMapper</span><span class="o">.</span><span class="n">from_kpi_value</span><span class="p">(</span><span class="n">color_scale</span><span class="p">),</span>
<span class="gp">... </span>    <span class="n">fill_opacity</span><span class="o">=</span><span class="n">PropertyMapper</span><span class="o">.</span><span class="n">from_static_value</span><span class="p">(</span><span class="mf">0.8</span><span class="p">),</span>
<span class="gp">... </span>    <span class="n">tooltip</span><span class="o">=</span><span class="kc">True</span>  <span class="c1"># Auto-generate tooltip</span>
<span class="gp">... </span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">resolved</span> <span class="o">=</span> <span class="n">resolver</span><span class="o">.</span><span class="n">resolve_feature</span><span class="p">(</span><span class="n">kpi_data_item</span><span class="p">)</span>
</code></pre></div>








              <details class="quote">
                <summary>Source code in <code>submodules/mescal/mescal/visualizations/folium_viz_system/base_viz_system.py</code></summary>
                <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">170</span>
<span class="normal">171</span>
<span class="normal">172</span>
<span class="normal">173</span>
<span class="normal">174</span>
<span class="normal">175</span>
<span class="normal">176</span>
<span class="normal">177</span>
<span class="normal">178</span>
<span class="normal">179</span>
<span class="normal">180</span>
<span class="normal">181</span>
<span class="normal">182</span>
<span class="normal">183</span>
<span class="normal">184</span>
<span class="normal">185</span>
<span class="normal">186</span>
<span class="normal">187</span>
<span class="normal">188</span>
<span class="normal">189</span>
<span class="normal">190</span>
<span class="normal">191</span>
<span class="normal">192</span>
<span class="normal">193</span>
<span class="normal">194</span>
<span class="normal">195</span>
<span class="normal">196</span>
<span class="normal">197</span>
<span class="normal">198</span>
<span class="normal">199</span>
<span class="normal">200</span>
<span class="normal">201</span>
<span class="normal">202</span>
<span class="normal">203</span>
<span class="normal">204</span>
<span class="normal">205</span>
<span class="normal">206</span>
<span class="normal">207</span>
<span class="normal">208</span>
<span class="normal">209</span>
<span class="normal">210</span>
<span class="normal">211</span>
<span class="normal">212</span>
<span class="normal">213</span>
<span class="normal">214</span>
<span class="normal">215</span>
<span class="normal">216</span>
<span class="normal">217</span>
<span class="normal">218</span>
<span class="normal">219</span>
<span class="normal">220</span>
<span class="normal">221</span>
<span class="normal">222</span>
<span class="normal">223</span>
<span class="normal">224</span>
<span class="normal">225</span>
<span class="normal">226</span>
<span class="normal">227</span>
<span class="normal">228</span>
<span class="normal">229</span>
<span class="normal">230</span>
<span class="normal">231</span>
<span class="normal">232</span>
<span class="normal">233</span>
<span class="normal">234</span>
<span class="normal">235</span>
<span class="normal">236</span>
<span class="normal">237</span>
<span class="normal">238</span>
<span class="normal">239</span>
<span class="normal">240</span>
<span class="normal">241</span>
<span class="normal">242</span>
<span class="normal">243</span>
<span class="normal">244</span>
<span class="normal">245</span>
<span class="normal">246</span>
<span class="normal">247</span>
<span class="normal">248</span>
<span class="normal">249</span>
<span class="normal">250</span>
<span class="normal">251</span>
<span class="normal">252</span>
<span class="normal">253</span>
<span class="normal">254</span>
<span class="normal">255</span>
<span class="normal">256</span>
<span class="normal">257</span>
<span class="normal">258</span>
<span class="normal">259</span>
<span class="normal">260</span>
<span class="normal">261</span>
<span class="normal">262</span>
<span class="normal">263</span>
<span class="normal">264</span>
<span class="normal">265</span>
<span class="normal">266</span>
<span class="normal">267</span>
<span class="normal">268</span>
<span class="normal">269</span>
<span class="normal">270</span>
<span class="normal">271</span>
<span class="normal">272</span>
<span class="normal">273</span>
<span class="normal">274</span>
<span class="normal">275</span>
<span class="normal">276</span>
<span class="normal">277</span>
<span class="normal">278</span>
<span class="normal">279</span>
<span class="normal">280</span>
<span class="normal">281</span>
<span class="normal">282</span>
<span class="normal">283</span>
<span class="normal">284</span>
<span class="normal">285</span>
<span class="normal">286</span>
<span class="normal">287</span>
<span class="normal">288</span>
<span class="normal">289</span>
<span class="normal">290</span>
<span class="normal">291</span>
<span class="normal">292</span>
<span class="normal">293</span>
<span class="normal">294</span>
<span class="normal">295</span>
<span class="normal">296</span>
<span class="normal">297</span>
<span class="normal">298</span>
<span class="normal">299</span>
<span class="normal">300</span>
<span class="normal">301</span>
<span class="normal">302</span>
<span class="normal">303</span>
<span class="normal">304</span>
<span class="normal">305</span>
<span class="normal">306</span>
<span class="normal">307</span>
<span class="normal">308</span>
<span class="normal">309</span>
<span class="normal">310</span>
<span class="normal">311</span>
<span class="normal">312</span>
<span class="normal">313</span>
<span class="normal">314</span>
<span class="normal">315</span>
<span class="normal">316</span>
<span class="normal">317</span>
<span class="normal">318</span>
<span class="normal">319</span>
<span class="normal">320</span>
<span class="normal">321</span>
<span class="normal">322</span>
<span class="normal">323</span>
<span class="normal">324</span>
<span class="normal">325</span>
<span class="normal">326</span>
<span class="normal">327</span>
<span class="normal">328</span>
<span class="normal">329</span>
<span class="normal">330</span>
<span class="normal">331</span>
<span class="normal">332</span>
<span class="normal">333</span>
<span class="normal">334</span>
<span class="normal">335</span>
<span class="normal">336</span>
<span class="normal">337</span>
<span class="normal">338</span>
<span class="normal">339</span>
<span class="normal">340</span>
<span class="normal">341</span>
<span class="normal">342</span>
<span class="normal">343</span>
<span class="normal">344</span>
<span class="normal">345</span>
<span class="normal">346</span>
<span class="normal">347</span>
<span class="normal">348</span>
<span class="normal">349</span>
<span class="normal">350</span>
<span class="normal">351</span>
<span class="normal">352</span>
<span class="normal">353</span>
<span class="normal">354</span>
<span class="normal">355</span>
<span class="normal">356</span>
<span class="normal">357</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">class</span><span class="w"> </span><span class="nc">FeatureResolver</span><span class="p">(</span><span class="n">Generic</span><span class="p">[</span><span class="n">ResolvedFeatureType</span><span class="p">]):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Resolves visual feature properties from data items using PropertyMappers.</span>

<span class="sd">    Central orchestrator for map element styling that takes a VisualizableDataItem</span>
<span class="sd">    and a collection of PropertyMappers, then produces a ResolvedFeature containing</span>
<span class="sd">    all computed visual properties. Handles default values, tooltip generation,</span>
<span class="sd">    and property normalization.</span>

<span class="sd">    The FeatureResolver acts as a bridge between data and visualization, converting</span>
<span class="sd">    raw data items into styled features ready for folium map rendering. It supports</span>
<span class="sd">    automatic tooltip/popup generation and flexible property mapping.</span>

<span class="sd">    Type Parameters:</span>
<span class="sd">        ResolvedFeatureType: The specific resolved feature type (e.g., ResolvedAreaFeature)</span>

<span class="sd">    Examples:</span>
<span class="sd">        &gt;&gt;&gt; resolver = AreaFeatureResolver(</span>
<span class="sd">        ...     fill_color=PropertyMapper.from_kpi_value(color_scale),</span>
<span class="sd">        ...     fill_opacity=PropertyMapper.from_static_value(0.8),</span>
<span class="sd">        ...     tooltip=True  # Auto-generate tooltip</span>
<span class="sd">        ... )</span>
<span class="sd">        &gt;&gt;&gt; resolved = resolver.resolve_feature(kpi_data_item)</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">def</span><span class="w"> </span><span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">feature_type</span><span class="p">:</span> <span class="n">Type</span><span class="p">[</span><span class="n">ResolvedFeatureType</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span> <span class="o">**</span><span class="n">property_mappers</span><span class="p">:</span> <span class="n">PropertyMapper</span> <span class="o">|</span> <span class="n">Any</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">feature_type</span><span class="p">:</span> <span class="n">Type</span><span class="p">[</span><span class="n">ResolvedFeatureType</span><span class="p">]</span> <span class="o">=</span> <span class="n">feature_type</span> <span class="ow">or</span> <span class="n">ResolvedFeatureType</span><span class="o">.</span><span class="n">__constraints__</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>

        <span class="n">_defaults_if_true</span> <span class="o">=</span> <span class="nb">dict</span><span class="p">(</span>
            <span class="n">tooltip</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">_default_tooltip_generator</span><span class="p">,</span>
            <span class="n">popup</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">_default_popup_generator</span><span class="p">,</span>
            <span class="n">text_print_content</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">_default_text_print_generator</span><span class="p">,</span>
        <span class="p">)</span>
        <span class="k">for</span> <span class="n">k</span><span class="p">,</span> <span class="n">mapper</span> <span class="ow">in</span> <span class="n">_defaults_if_true</span><span class="o">.</span><span class="n">items</span><span class="p">():</span>
            <span class="k">if</span> <span class="n">property_mappers</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="n">k</span><span class="p">,</span> <span class="kc">None</span><span class="p">)</span> <span class="ow">is</span> <span class="kc">True</span><span class="p">:</span>
                <span class="n">property_mappers</span><span class="p">[</span><span class="n">k</span><span class="p">]</span> <span class="o">=</span> <span class="n">mapper</span><span class="p">()</span>
            <span class="k">elif</span> <span class="n">property_mappers</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="n">k</span><span class="p">,</span> <span class="kc">None</span><span class="p">)</span> <span class="ow">is</span> <span class="kc">False</span><span class="p">:</span>
                <span class="n">property_mappers</span><span class="p">[</span><span class="n">k</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">property_mappers</span><span class="p">:</span> <span class="nb">dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">PropertyMapper</span><span class="p">]</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_normalize_property_mappers</span><span class="p">(</span><span class="n">property_mappers</span><span class="p">)</span>

    <span class="k">def</span><span class="w"> </span><span class="nf">resolve_feature</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">data_item</span><span class="p">:</span> <span class="n">VisualizableDataItem</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">ResolvedFeatureType</span><span class="p">:</span>
        <span class="n">resolved</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">feature_type</span><span class="p">()</span>
        <span class="k">for</span> <span class="n">prop</span><span class="p">,</span> <span class="n">mapper</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">property_mappers</span><span class="o">.</span><span class="n">items</span><span class="p">():</span>
            <span class="n">resolved</span><span class="p">[</span><span class="n">prop</span><span class="p">]</span> <span class="o">=</span> <span class="n">mapper</span><span class="o">.</span><span class="n">map_data_item</span><span class="p">(</span><span class="n">data_item</span><span class="p">)</span>
            <span class="k">if</span> <span class="n">prop</span> <span class="ow">in</span> <span class="p">[</span><span class="s1">&#39;tooltip&#39;</span><span class="p">,</span> <span class="s1">&#39;popup&#39;</span><span class="p">,</span> <span class="s1">&#39;text_print_content&#39;</span><span class="p">]:</span>
                <span class="nb">setattr</span><span class="p">(</span><span class="n">resolved</span><span class="p">,</span> <span class="n">prop</span><span class="p">,</span> <span class="n">mapper</span><span class="o">.</span><span class="n">map_data_item</span><span class="p">(</span><span class="n">data_item</span><span class="p">))</span>
        <span class="k">return</span> <span class="n">resolved</span>

    <span class="nd">@staticmethod</span>
    <span class="k">def</span><span class="w"> </span><span class="nf">_normalize_property_mappers</span><span class="p">(</span><span class="n">mappers</span><span class="p">:</span> <span class="nb">dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">PropertyMapper</span> <span class="o">|</span> <span class="n">Any</span><span class="p">])</span> <span class="o">-&gt;</span> <span class="nb">dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">PropertyMapper</span><span class="p">]:</span>
        <span class="k">return</span> <span class="p">{</span>
            <span class="n">key</span><span class="p">:</span> <span class="n">mapper</span> <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">mapper</span><span class="p">,</span> <span class="n">PropertyMapper</span><span class="p">)</span> <span class="k">else</span> <span class="n">PropertyMapper</span><span class="o">.</span><span class="n">from_static_value</span><span class="p">(</span><span class="n">mapper</span><span class="p">)</span>
            <span class="k">for</span> <span class="n">key</span><span class="p">,</span> <span class="n">mapper</span> <span class="ow">in</span> <span class="n">mappers</span><span class="o">.</span><span class="n">items</span><span class="p">()</span>
        <span class="p">}</span>

    <span class="nd">@staticmethod</span>
    <span class="k">def</span><span class="w"> </span><span class="nf">_explicit_or_fallback</span><span class="p">(</span><span class="n">explicit</span><span class="p">:</span> <span class="n">Any</span><span class="p">,</span> <span class="n">fallback</span><span class="p">:</span> <span class="n">PropertyMapper</span> <span class="o">=</span> <span class="kc">None</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">PropertyMapper</span><span class="p">:</span>
        <span class="k">if</span> <span class="n">explicit</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
            <span class="k">return</span> <span class="n">explicit</span>
        <span class="k">return</span> <span class="n">fallback</span>

    <span class="nd">@staticmethod</span>
    <span class="k">def</span><span class="w"> </span><span class="nf">_default_tooltip_generator</span><span class="p">()</span> <span class="o">-&gt;</span> <span class="n">PropertyMapper</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Create default tooltip generator showing data item information.</span>

<span class="sd">        Returns:</span>
<span class="sd">            PropertyMapper that generates HTML table tooltips with data item attributes</span>
<span class="sd">        &quot;&quot;&quot;</span>

        <span class="k">def</span><span class="w"> </span><span class="nf">get_tooltip</span><span class="p">(</span><span class="n">data_item</span><span class="p">:</span> <span class="n">VisualizableDataItem</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">str</span><span class="p">:</span>
            <span class="n">tooltip_data</span> <span class="o">=</span> <span class="n">data_item</span><span class="o">.</span><span class="n">get_tooltip_data</span><span class="p">()</span>

            <span class="n">html</span> <span class="o">=</span> <span class="s1">&#39;&lt;table style=&quot;border-collapse: collapse;&quot;&gt;</span><span class="se">\n</span><span class="s1">&#39;</span>
            <span class="k">for</span> <span class="n">key</span><span class="p">,</span> <span class="n">value</span> <span class="ow">in</span> <span class="n">tooltip_data</span><span class="o">.</span><span class="n">items</span><span class="p">():</span>
                <span class="n">html</span> <span class="o">+=</span> <span class="sa">f</span><span class="s1">&#39;  &lt;tr&gt;&lt;td style=&quot;padding: 4px 8px;&quot;&gt;&lt;strong&gt;</span><span class="si">{</span><span class="n">key</span><span class="si">}</span><span class="s1">&lt;/strong&gt;&lt;/td&gt;&#39;</span> \
                        <span class="sa">f</span><span class="s1">&#39;&lt;td style=&quot;text-align: right; padding: 4px 8px;&quot;&gt;</span><span class="si">{</span><span class="n">value</span><span class="si">}</span><span class="s1">&lt;/td&gt;&lt;/tr&gt;</span><span class="se">\n</span><span class="s1">&#39;</span>
            <span class="n">html</span> <span class="o">+=</span> <span class="s1">&#39;&lt;/table&gt;&#39;</span>

            <span class="k">return</span> <span class="n">html</span>

        <span class="k">return</span> <span class="n">PropertyMapper</span><span class="p">(</span><span class="n">get_tooltip</span><span class="p">)</span>

    <span class="nd">@staticmethod</span>
    <span class="k">def</span><span class="w"> </span><span class="nf">_default_popup_generator</span><span class="p">()</span> <span class="o">-&gt;</span> <span class="n">PropertyMapper</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Create default popup generator with formatted data item information.</span>

<span class="sd">        Returns:</span>
<span class="sd">            PropertyMapper that generates folium.Popup objects with data tables</span>
<span class="sd">        &quot;&quot;&quot;</span>

        <span class="k">def</span><span class="w"> </span><span class="nf">get_popup</span><span class="p">(</span><span class="n">data_item</span><span class="p">:</span> <span class="n">VisualizableDataItem</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">folium</span><span class="o">.</span><span class="n">Popup</span><span class="p">:</span>
            <span class="n">tooltip_data</span> <span class="o">=</span> <span class="n">data_item</span><span class="o">.</span><span class="n">get_tooltip_data</span><span class="p">()</span>

            <span class="n">html</span> <span class="o">=</span> <span class="s1">&#39;&lt;table style=&quot;border-collapse: collapse;&quot;&gt;</span><span class="se">\n</span><span class="s1">&#39;</span>
            <span class="k">for</span> <span class="n">key</span><span class="p">,</span> <span class="n">value</span> <span class="ow">in</span> <span class="n">tooltip_data</span><span class="o">.</span><span class="n">items</span><span class="p">():</span>
                <span class="n">html</span> <span class="o">+=</span> <span class="sa">f</span><span class="s1">&#39;  &lt;tr&gt;&lt;td style=&quot;padding: 4px 8px;&quot;&gt;&lt;strong&gt;</span><span class="si">{</span><span class="n">key</span><span class="si">}</span><span class="s1">&lt;/strong&gt;&lt;/td&gt;&#39;</span> \
                        <span class="sa">f</span><span class="s1">&#39;&lt;td style=&quot;text-align: right; padding: 4px 8px;&quot;&gt;</span><span class="si">{</span><span class="n">value</span><span class="si">}</span><span class="s1">&lt;/td&gt;&lt;/tr&gt;</span><span class="se">\n</span><span class="s1">&#39;</span>
            <span class="n">html</span> <span class="o">+=</span> <span class="s1">&#39;&lt;/table&gt;&#39;</span>

            <span class="k">return</span> <span class="n">folium</span><span class="o">.</span><span class="n">Popup</span><span class="p">(</span><span class="n">html</span><span class="p">,</span> <span class="n">max_width</span><span class="o">=</span><span class="mi">300</span><span class="p">)</span>

        <span class="k">return</span> <span class="n">PropertyMapper</span><span class="p">(</span><span class="n">get_popup</span><span class="p">)</span>

    <span class="nd">@staticmethod</span>
    <span class="k">def</span><span class="w"> </span><span class="nf">_default_text_print_generator</span><span class="p">()</span> <span class="o">-&gt;</span> <span class="n">PropertyMapper</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Create default text content generator for overlay labels.</span>

<span class="sd">        Returns:</span>
<span class="sd">            PropertyMapper that returns data item text representation</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="n">PropertyMapper</span><span class="p">(</span><span class="k">lambda</span> <span class="n">d</span><span class="p">:</span> <span class="n">d</span><span class="o">.</span><span class="n">get_text_representation</span><span class="p">())</span>

    <span class="nd">@staticmethod</span>
    <span class="k">def</span><span class="w"> </span><span class="nf">_default_geometry_mapper</span><span class="p">()</span> <span class="o">-&gt;</span> <span class="n">PropertyMapper</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Create default geometry mapper that extracts geometric objects.</span>

<span class="sd">        Returns:</span>
<span class="sd">            PropertyMapper that extracts &#39;geometry&#39; attribute from data items</span>
<span class="sd">        &quot;&quot;&quot;</span>

        <span class="k">def</span><span class="w"> </span><span class="nf">get_geometry</span><span class="p">(</span><span class="n">data_item</span><span class="p">:</span> <span class="n">VisualizableDataItem</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Polygon</span> <span class="o">|</span> <span class="kc">None</span><span class="p">:</span>
            <span class="k">if</span> <span class="n">data_item</span><span class="o">.</span><span class="n">object_has_attribute</span><span class="p">(</span><span class="s1">&#39;geometry&#39;</span><span class="p">):</span>
                <span class="k">return</span> <span class="n">data_item</span><span class="o">.</span><span class="n">get_object_attribute</span><span class="p">(</span><span class="s1">&#39;geometry&#39;</span><span class="p">)</span>
            <span class="k">return</span> <span class="kc">None</span>

        <span class="k">return</span> <span class="n">PropertyMapper</span><span class="p">(</span><span class="n">get_geometry</span><span class="p">)</span>

    <span class="nd">@staticmethod</span>
    <span class="k">def</span><span class="w"> </span><span class="nf">_default_location_mapper</span><span class="p">()</span> <span class="o">-&gt;</span> <span class="n">PropertyMapper</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Create smart location mapper with multiple fallback strategies.</span>

<span class="sd">        Attempts to extract Point locations from data items using various</span>
<span class="sd">        attribute names and geometric calculations. Handles common location</span>
<span class="sd">        attribute names and derives locations from complex geometries.</span>

<span class="sd">        Returns:</span>
<span class="sd">            PropertyMapper that intelligently extracts Point locations</span>
<span class="sd">        &quot;&quot;&quot;</span>

        <span class="k">def</span><span class="w"> </span><span class="nf">get_location</span><span class="p">(</span><span class="n">data_item</span><span class="p">:</span> <span class="n">VisualizableDataItem</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Point</span> <span class="o">|</span> <span class="kc">None</span><span class="p">:</span>
            <span class="k">for</span> <span class="n">k</span> <span class="ow">in</span> <span class="p">[</span><span class="s1">&#39;location&#39;</span><span class="p">,</span> <span class="s1">&#39;projection_point&#39;</span><span class="p">,</span> <span class="s1">&#39;centroid&#39;</span><span class="p">,</span> <span class="s1">&#39;midpoint&#39;</span><span class="p">]:</span>
                <span class="k">if</span> <span class="n">data_item</span><span class="o">.</span><span class="n">object_has_attribute</span><span class="p">(</span><span class="n">k</span><span class="p">):</span>
                    <span class="n">location</span> <span class="o">=</span> <span class="n">data_item</span><span class="o">.</span><span class="n">get_object_attribute</span><span class="p">(</span><span class="n">k</span><span class="p">)</span>
                    <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">location</span><span class="p">,</span> <span class="n">Point</span><span class="p">):</span>
                        <span class="k">return</span> <span class="n">location</span>

            <span class="k">for</span> <span class="n">lat</span><span class="p">,</span> <span class="n">lon</span> <span class="ow">in</span> <span class="p">[(</span><span class="s1">&#39;lat&#39;</span><span class="p">,</span> <span class="s1">&#39;lon&#39;</span><span class="p">),</span> <span class="p">(</span><span class="s1">&#39;latitude&#39;</span><span class="p">,</span> <span class="s1">&#39;longitude&#39;</span><span class="p">)]:</span>
                <span class="k">if</span> <span class="n">data_item</span><span class="o">.</span><span class="n">object_has_attribute</span><span class="p">(</span><span class="n">lat</span><span class="p">)</span> <span class="ow">and</span> <span class="n">data_item</span><span class="o">.</span><span class="n">object_has_attribute</span><span class="p">(</span><span class="n">lon</span><span class="p">):</span>
                    <span class="n">lat_value</span> <span class="o">=</span> <span class="n">data_item</span><span class="o">.</span><span class="n">get_object_attribute</span><span class="p">(</span><span class="n">lat</span><span class="p">)</span>
                    <span class="n">lon_value</span> <span class="o">=</span> <span class="n">data_item</span><span class="o">.</span><span class="n">get_object_attribute</span><span class="p">(</span><span class="n">lon</span><span class="p">)</span>
                    <span class="k">if</span> <span class="nb">all</span><span class="p">(</span><span class="nb">isinstance</span><span class="p">(</span><span class="n">v</span><span class="p">,</span> <span class="p">(</span><span class="nb">int</span><span class="p">,</span> <span class="nb">float</span><span class="p">))</span> <span class="k">for</span> <span class="n">v</span> <span class="ow">in</span> <span class="p">[</span><span class="n">lat_value</span><span class="p">,</span> <span class="n">lon_value</span><span class="p">]):</span>
                        <span class="k">return</span> <span class="n">Point</span><span class="p">([</span><span class="n">lon_value</span><span class="p">,</span> <span class="n">lat_value</span><span class="p">])</span>

            <span class="k">if</span> <span class="n">data_item</span><span class="o">.</span><span class="n">object_has_attribute</span><span class="p">(</span><span class="s1">&#39;geometry&#39;</span><span class="p">):</span>
                <span class="n">geometry</span> <span class="o">=</span> <span class="n">data_item</span><span class="o">.</span><span class="n">get_object_attribute</span><span class="p">(</span><span class="s1">&#39;geometry&#39;</span><span class="p">)</span>
                <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">geometry</span><span class="p">,</span> <span class="n">Point</span><span class="p">):</span>
                    <span class="k">return</span> <span class="n">geometry</span>
                <span class="k">elif</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">geometry</span><span class="p">,</span> <span class="p">(</span><span class="n">Polygon</span><span class="p">,</span> <span class="n">MultiPolygon</span><span class="p">)):</span>
                    <span class="k">return</span> <span class="n">geometry</span><span class="o">.</span><span class="n">representative_point</span><span class="p">()</span>
                <span class="k">elif</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">geometry</span><span class="p">,</span> <span class="p">(</span><span class="n">LineString</span><span class="p">,</span> <span class="n">MultiLineString</span><span class="p">)):</span>
                    <span class="k">return</span> <span class="n">geometry</span><span class="o">.</span><span class="n">interpolate</span><span class="p">(</span><span class="mf">0.5</span><span class="p">,</span> <span class="n">normalized</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
            <span class="k">return</span> <span class="kc">None</span>

        <span class="k">return</span> <span class="n">PropertyMapper</span><span class="p">(</span><span class="n">get_location</span><span class="p">)</span>

    <span class="nd">@staticmethod</span>
    <span class="k">def</span><span class="w"> </span><span class="nf">_default_line_string_mapper</span><span class="p">()</span> <span class="o">-&gt;</span> <span class="n">PropertyMapper</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Create default LineString geometry mapper for line visualizations.</span>

<span class="sd">        Returns:</span>
<span class="sd">            PropertyMapper that extracts LineString geometries from data items</span>
<span class="sd">        &quot;&quot;&quot;</span>

        <span class="k">def</span><span class="w"> </span><span class="nf">get_line_string</span><span class="p">(</span><span class="n">data_item</span><span class="p">:</span> <span class="n">VisualizableDataItem</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">LineString</span> <span class="o">|</span> <span class="kc">None</span><span class="p">:</span>
            <span class="k">for</span> <span class="n">k</span> <span class="ow">in</span> <span class="p">[</span><span class="s1">&#39;geometry&#39;</span><span class="p">,</span> <span class="s1">&#39;line_string&#39;</span><span class="p">]:</span>
                <span class="k">if</span> <span class="n">data_item</span><span class="o">.</span><span class="n">object_has_attribute</span><span class="p">(</span><span class="n">k</span><span class="p">):</span>
                    <span class="n">line_string</span> <span class="o">=</span> <span class="n">data_item</span><span class="o">.</span><span class="n">get_object_attribute</span><span class="p">(</span><span class="n">k</span><span class="p">)</span>
                    <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">line_string</span><span class="p">,</span> <span class="p">(</span><span class="n">LineString</span><span class="p">,</span> <span class="n">MultiLineString</span><span class="p">)):</span>
                        <span class="k">return</span> <span class="n">line_string</span>
            <span class="k">return</span> <span class="kc">None</span>

        <span class="k">return</span> <span class="n">PropertyMapper</span><span class="p">(</span><span class="n">get_line_string</span><span class="p">)</span>
</code></pre></div></td></tr></table></div>
              </details>



  <div class="doc doc-children">












  </div>

    </div>

</div>

<div class="doc doc-object doc-class">



<h3 id="mescal.visualizations.folium_viz_system.base_viz_system.FoliumObjectGenerator" class="doc doc-heading">
<code class="doc-symbol doc-symbol-heading doc-symbol-class"></code>            <span class="doc doc-object-name doc-class-name">FoliumObjectGenerator</span>


<a href="#mescal.visualizations.folium_viz_system.base_viz_system.FoliumObjectGenerator" class="headerlink" title="Permanent link">&para;</a></h3>


    <div class="doc doc-contents ">
            <p class="doc doc-class-bases">
              Bases: <code><span title="typing.Generic">Generic</span>[<span title="mescal.typevars.FeatureResolverType">FeatureResolverType</span>]</code>, <code><span title="abc.ABC">ABC</span></code></p>


        <p>Abstract base class for generating folium map objects from data items.</p>
<p>Defines the interface for converting VisualizableDataItems into folium
map elements (areas, lines, markers, etc.). Each generator type handles
a specific kind of map visualization and uses a corresponding FeatureResolver
to compute visual properties.</p>
<p>The generator pattern enables modular, composable map building where different
visualization types can be combined within the same map. Generators can process
both model DataFrames and KPI collections.</p>


<p>
      <span class="doc-section-title">
        Class Type Parameters:
      </span>
    </p>
    <table>
      <thead>
        <tr>
          <th>Name</th>
          <th>Bound or Constraints</th>
          <th>Description</th>
          <th>Default</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                <code>FeatureResolverType</code>
            </td>
            <td>
            </td>
            <td>
              <div class="doc-md-description">
                <p>The specific feature resolver type used by this generator</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
      </tbody>
    </table>


<p><span class="doc-section-title">Examples:</span></p>
    <p>Typical usage in map building:</p>
    <div class="highlight"><pre><span></span><code><span class="gp">&gt;&gt;&gt; </span><span class="n">area_gen</span> <span class="o">=</span> <span class="n">AreaGenerator</span><span class="p">(</span><span class="n">AreaFeatureResolver</span><span class="p">(</span><span class="n">fill_color</span><span class="o">=...</span><span class="p">))</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">line_gen</span> <span class="o">=</span> <span class="n">LineGenerator</span><span class="p">(</span><span class="n">LineFeatureResolver</span><span class="p">(</span><span class="n">line_color</span><span class="o">=...</span><span class="p">))</span>
<span class="gp">&gt;&gt;&gt;</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">fg</span> <span class="o">=</span> <span class="n">folium</span><span class="o">.</span><span class="n">FeatureGroup</span><span class="p">(</span><span class="s1">&#39;My Data&#39;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">area_gen</span><span class="o">.</span><span class="n">generate_objects_for_model_df</span><span class="p">(</span><span class="n">model_df</span><span class="p">,</span> <span class="n">fg</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">line_gen</span><span class="o">.</span><span class="n">generate_objects_for_kpi_collection</span><span class="p">(</span><span class="n">kpi_collection</span><span class="p">,</span> <span class="n">fg</span><span class="p">)</span>
</code></pre></div>








              <details class="quote">
                <summary>Source code in <code>submodules/mescal/mescal/visualizations/folium_viz_system/base_viz_system.py</code></summary>
                <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">360</span>
<span class="normal">361</span>
<span class="normal">362</span>
<span class="normal">363</span>
<span class="normal">364</span>
<span class="normal">365</span>
<span class="normal">366</span>
<span class="normal">367</span>
<span class="normal">368</span>
<span class="normal">369</span>
<span class="normal">370</span>
<span class="normal">371</span>
<span class="normal">372</span>
<span class="normal">373</span>
<span class="normal">374</span>
<span class="normal">375</span>
<span class="normal">376</span>
<span class="normal">377</span>
<span class="normal">378</span>
<span class="normal">379</span>
<span class="normal">380</span>
<span class="normal">381</span>
<span class="normal">382</span>
<span class="normal">383</span>
<span class="normal">384</span>
<span class="normal">385</span>
<span class="normal">386</span>
<span class="normal">387</span>
<span class="normal">388</span>
<span class="normal">389</span>
<span class="normal">390</span>
<span class="normal">391</span>
<span class="normal">392</span>
<span class="normal">393</span>
<span class="normal">394</span>
<span class="normal">395</span>
<span class="normal">396</span>
<span class="normal">397</span>
<span class="normal">398</span>
<span class="normal">399</span>
<span class="normal">400</span>
<span class="normal">401</span>
<span class="normal">402</span>
<span class="normal">403</span>
<span class="normal">404</span>
<span class="normal">405</span>
<span class="normal">406</span>
<span class="normal">407</span>
<span class="normal">408</span>
<span class="normal">409</span>
<span class="normal">410</span>
<span class="normal">411</span>
<span class="normal">412</span>
<span class="normal">413</span>
<span class="normal">414</span>
<span class="normal">415</span>
<span class="normal">416</span>
<span class="normal">417</span>
<span class="normal">418</span>
<span class="normal">419</span>
<span class="normal">420</span>
<span class="normal">421</span>
<span class="normal">422</span>
<span class="normal">423</span>
<span class="normal">424</span>
<span class="normal">425</span>
<span class="normal">426</span>
<span class="normal">427</span>
<span class="normal">428</span>
<span class="normal">429</span>
<span class="normal">430</span>
<span class="normal">431</span>
<span class="normal">432</span>
<span class="normal">433</span>
<span class="normal">434</span>
<span class="normal">435</span>
<span class="normal">436</span>
<span class="normal">437</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">class</span><span class="w"> </span><span class="nc">FoliumObjectGenerator</span><span class="p">(</span><span class="n">Generic</span><span class="p">[</span><span class="n">FeatureResolverType</span><span class="p">],</span> <span class="n">ABC</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Abstract base class for generating folium map objects from data items.</span>

<span class="sd">    Defines the interface for converting VisualizableDataItems into folium</span>
<span class="sd">    map elements (areas, lines, markers, etc.). Each generator type handles</span>
<span class="sd">    a specific kind of map visualization and uses a corresponding FeatureResolver</span>
<span class="sd">    to compute visual properties.</span>

<span class="sd">    The generator pattern enables modular, composable map building where different</span>
<span class="sd">    visualization types can be combined within the same map. Generators can process</span>
<span class="sd">    both model DataFrames and KPI collections.</span>

<span class="sd">    Type Parameters:</span>
<span class="sd">        FeatureResolverType: The specific feature resolver type used by this generator</span>

<span class="sd">    Examples:</span>
<span class="sd">        Typical usage in map building:</span>
<span class="sd">        &gt;&gt;&gt; area_gen = AreaGenerator(AreaFeatureResolver(fill_color=...))</span>
<span class="sd">        &gt;&gt;&gt; line_gen = LineGenerator(LineFeatureResolver(line_color=...))</span>
<span class="sd">        &gt;&gt;&gt;</span>
<span class="sd">        &gt;&gt;&gt; fg = folium.FeatureGroup(&#39;My Data&#39;)</span>
<span class="sd">        &gt;&gt;&gt; area_gen.generate_objects_for_model_df(model_df, fg)</span>
<span class="sd">        &gt;&gt;&gt; line_gen.generate_objects_for_kpi_collection(kpi_collection, fg)</span>
<span class="sd">    &quot;&quot;&quot;</span>

    <span class="k">def</span><span class="w"> </span><span class="fm">__init__</span><span class="p">(</span>
            <span class="bp">self</span><span class="p">,</span>
            <span class="n">feature_resolver</span><span class="p">:</span> <span class="n">FeatureResolverType</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
    <span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">feature_resolver</span><span class="p">:</span> <span class="n">FeatureResolverType</span> <span class="o">=</span> <span class="n">feature_resolver</span> <span class="ow">or</span> <span class="bp">self</span><span class="o">.</span><span class="n">_feature_resolver_type</span><span class="p">()()</span>

    <span class="nd">@abstractmethod</span>
    <span class="k">def</span><span class="w"> </span><span class="nf">_feature_resolver_type</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Type</span><span class="p">[</span><span class="n">FeatureResolverType</span><span class="p">]:</span>
        <span class="k">return</span> <span class="n">FeatureResolver</span>

    <span class="nd">@abstractmethod</span>
    <span class="k">def</span><span class="w"> </span><span class="nf">generate</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">data_item</span><span class="p">:</span> <span class="n">VisualizableDataItem</span><span class="p">,</span> <span class="n">feature_group</span><span class="p">:</span> <span class="n">folium</span><span class="o">.</span><span class="n">FeatureGroup</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Generate folium object and add it to the feature group.&quot;&quot;&quot;</span>
        <span class="k">pass</span>

    <span class="k">def</span><span class="w"> </span><span class="nf">generate_objects_for_model_df</span><span class="p">(</span>
            <span class="bp">self</span><span class="p">,</span>
            <span class="n">model_df</span><span class="p">:</span> <span class="n">pd</span><span class="o">.</span><span class="n">DataFrame</span><span class="p">,</span>
            <span class="n">feature_group</span><span class="p">:</span> <span class="n">folium</span><span class="o">.</span><span class="n">FeatureGroup</span><span class="p">,</span>
            <span class="o">**</span><span class="n">kwargs</span>
    <span class="p">)</span> <span class="o">-&gt;</span> <span class="n">folium</span><span class="o">.</span><span class="n">FeatureGroup</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Add model DataFrame data to the map.&quot;&quot;&quot;</span>
        <span class="n">model_dff</span> <span class="o">=</span> <span class="n">add_index_as_column</span><span class="p">(</span><span class="n">model_df</span><span class="p">)</span>
        <span class="n">object_type</span> <span class="o">=</span> <span class="n">model_dff</span><span class="o">.</span><span class="n">index</span><span class="o">.</span><span class="n">name</span> <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">model_dff</span><span class="o">.</span><span class="n">index</span><span class="o">.</span><span class="n">name</span><span class="p">,</span> <span class="nb">str</span><span class="p">)</span> <span class="k">else</span> <span class="kc">None</span>
        <span class="k">for</span> <span class="n">_</span><span class="p">,</span> <span class="n">row</span> <span class="ow">in</span> <span class="n">model_dff</span><span class="o">.</span><span class="n">iterrows</span><span class="p">():</span>
            <span class="n">data_item</span> <span class="o">=</span> <span class="n">ModelDataItem</span><span class="p">(</span><span class="n">row</span><span class="p">,</span> <span class="n">object_type</span><span class="o">=</span><span class="n">object_type</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">generate</span><span class="p">(</span><span class="n">data_item</span><span class="p">,</span> <span class="n">feature_group</span><span class="p">)</span>
        <span class="k">return</span> <span class="n">feature_group</span>

    <span class="k">def</span><span class="w"> </span><span class="nf">generate_objects_for_kpi_collection</span><span class="p">(</span>
            <span class="bp">self</span><span class="p">,</span>
            <span class="n">kpi_collection</span><span class="p">:</span> <span class="s1">&#39;KPICollection&#39;</span><span class="p">,</span>
            <span class="n">feature_group</span><span class="p">:</span> <span class="n">folium</span><span class="o">.</span><span class="n">FeatureGroup</span><span class="p">,</span>
            <span class="o">**</span><span class="n">kwargs</span>
    <span class="p">)</span> <span class="o">-&gt;</span> <span class="n">folium</span><span class="o">.</span><span class="n">FeatureGroup</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Add KPI data to the map.&quot;&quot;&quot;</span>
        <span class="k">for</span> <span class="n">kpi</span> <span class="ow">in</span> <span class="n">kpi_collection</span><span class="p">:</span>
            <span class="n">data_item</span> <span class="o">=</span> <span class="n">KPIDataItem</span><span class="p">(</span><span class="n">kpi</span><span class="p">,</span> <span class="n">kpi_collection</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">generate</span><span class="p">(</span><span class="n">data_item</span><span class="p">,</span> <span class="n">feature_group</span><span class="p">)</span>
        <span class="k">return</span> <span class="n">feature_group</span>

    <span class="k">def</span><span class="w"> </span><span class="nf">generate_object_for_single_kpi</span><span class="p">(</span>
            <span class="bp">self</span><span class="p">,</span>
            <span class="n">kpi</span><span class="p">:</span> <span class="s1">&#39;KPI&#39;</span><span class="p">,</span>
            <span class="n">feature_group</span><span class="p">:</span> <span class="n">folium</span><span class="o">.</span><span class="n">FeatureGroup</span><span class="p">,</span>
            <span class="n">kpi_collection</span><span class="p">:</span> <span class="s1">&#39;KPICollection&#39;</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
            <span class="o">**</span><span class="n">kwargs</span>
    <span class="p">)</span> <span class="o">-&gt;</span> <span class="n">folium</span><span class="o">.</span><span class="n">FeatureGroup</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Add a single KPI to the map with optional context.&quot;&quot;&quot;</span>
        <span class="n">data_item</span> <span class="o">=</span> <span class="n">KPIDataItem</span><span class="p">(</span><span class="n">kpi</span><span class="p">,</span> <span class="n">kpi_collection</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">generate</span><span class="p">(</span><span class="n">data_item</span><span class="p">,</span> <span class="n">feature_group</span><span class="p">)</span>
        <span class="k">return</span> <span class="n">feature_group</span>
</code></pre></div></td></tr></table></div>
              </details>



  <div class="doc doc-children">










<div class="doc doc-object doc-function">


<h4 id="mescal.visualizations.folium_viz_system.base_viz_system.FoliumObjectGenerator.generate" class="doc doc-heading">
<code class="doc-symbol doc-symbol-heading doc-symbol-method"></code>            <span class="doc doc-object-name doc-function-name">generate</span>


  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-abstractmethod"><code>abstractmethod</code></small>
  </span>

<a href="#mescal.visualizations.folium_viz_system.base_viz_system.FoliumObjectGenerator.generate" class="headerlink" title="Permanent link">&para;</a></h4>
<div class="doc-signature highlight"><pre><span></span><code><span class="nf">generate</span><span class="p">(</span><span class="n">data_item</span><span class="p">:</span> <span class="n"><a class="autorefs autorefs-internal" title="            VisualizableDataItem (mescal.visualizations.folium_viz_system.visualizable_data_item.VisualizableDataItem)" href="../data_item/#mescal.visualizations.folium_viz_system.visualizable_data_item.VisualizableDataItem">VisualizableDataItem</a></span><span class="p">,</span> <span class="n">feature_group</span><span class="p">:</span> <span class="n"><span title="folium.FeatureGroup">FeatureGroup</span></span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span>
</code></pre></div>

    <div class="doc doc-contents ">

        <p>Generate folium object and add it to the feature group.</p>


            <details class="quote">
              <summary>Source code in <code>submodules/mescal/mescal/visualizations/folium_viz_system/base_viz_system.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">396</span>
<span class="normal">397</span>
<span class="normal">398</span>
<span class="normal">399</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="nd">@abstractmethod</span>
<span class="k">def</span><span class="w"> </span><span class="nf">generate</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">data_item</span><span class="p">:</span> <span class="n">VisualizableDataItem</span><span class="p">,</span> <span class="n">feature_group</span><span class="p">:</span> <span class="n">folium</span><span class="o">.</span><span class="n">FeatureGroup</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Generate folium object and add it to the feature group.&quot;&quot;&quot;</span>
    <span class="k">pass</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h4 id="mescal.visualizations.folium_viz_system.base_viz_system.FoliumObjectGenerator.generate_objects_for_model_df" class="doc doc-heading">
<code class="doc-symbol doc-symbol-heading doc-symbol-method"></code>            <span class="doc doc-object-name doc-function-name">generate_objects_for_model_df</span>


<a href="#mescal.visualizations.folium_viz_system.base_viz_system.FoliumObjectGenerator.generate_objects_for_model_df" class="headerlink" title="Permanent link">&para;</a></h4>
<div class="doc-signature highlight"><pre><span></span><code><span class="nf">generate_objects_for_model_df</span><span class="p">(</span><span class="n">model_df</span><span class="p">:</span> <span class="n"><span title="pandas.DataFrame">DataFrame</span></span><span class="p">,</span> <span class="n">feature_group</span><span class="p">:</span> <span class="n"><span title="folium.FeatureGroup">FeatureGroup</span></span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n"><span title="folium.FeatureGroup">FeatureGroup</span></span>
</code></pre></div>

    <div class="doc doc-contents ">

        <p>Add model DataFrame data to the map.</p>


            <details class="quote">
              <summary>Source code in <code>submodules/mescal/mescal/visualizations/folium_viz_system/base_viz_system.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">401</span>
<span class="normal">402</span>
<span class="normal">403</span>
<span class="normal">404</span>
<span class="normal">405</span>
<span class="normal">406</span>
<span class="normal">407</span>
<span class="normal">408</span>
<span class="normal">409</span>
<span class="normal">410</span>
<span class="normal">411</span>
<span class="normal">412</span>
<span class="normal">413</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span><span class="w"> </span><span class="nf">generate_objects_for_model_df</span><span class="p">(</span>
        <span class="bp">self</span><span class="p">,</span>
        <span class="n">model_df</span><span class="p">:</span> <span class="n">pd</span><span class="o">.</span><span class="n">DataFrame</span><span class="p">,</span>
        <span class="n">feature_group</span><span class="p">:</span> <span class="n">folium</span><span class="o">.</span><span class="n">FeatureGroup</span><span class="p">,</span>
        <span class="o">**</span><span class="n">kwargs</span>
<span class="p">)</span> <span class="o">-&gt;</span> <span class="n">folium</span><span class="o">.</span><span class="n">FeatureGroup</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Add model DataFrame data to the map.&quot;&quot;&quot;</span>
    <span class="n">model_dff</span> <span class="o">=</span> <span class="n">add_index_as_column</span><span class="p">(</span><span class="n">model_df</span><span class="p">)</span>
    <span class="n">object_type</span> <span class="o">=</span> <span class="n">model_dff</span><span class="o">.</span><span class="n">index</span><span class="o">.</span><span class="n">name</span> <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">model_dff</span><span class="o">.</span><span class="n">index</span><span class="o">.</span><span class="n">name</span><span class="p">,</span> <span class="nb">str</span><span class="p">)</span> <span class="k">else</span> <span class="kc">None</span>
    <span class="k">for</span> <span class="n">_</span><span class="p">,</span> <span class="n">row</span> <span class="ow">in</span> <span class="n">model_dff</span><span class="o">.</span><span class="n">iterrows</span><span class="p">():</span>
        <span class="n">data_item</span> <span class="o">=</span> <span class="n">ModelDataItem</span><span class="p">(</span><span class="n">row</span><span class="p">,</span> <span class="n">object_type</span><span class="o">=</span><span class="n">object_type</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">generate</span><span class="p">(</span><span class="n">data_item</span><span class="p">,</span> <span class="n">feature_group</span><span class="p">)</span>
    <span class="k">return</span> <span class="n">feature_group</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h4 id="mescal.visualizations.folium_viz_system.base_viz_system.FoliumObjectGenerator.generate_objects_for_kpi_collection" class="doc doc-heading">
<code class="doc-symbol doc-symbol-heading doc-symbol-method"></code>            <span class="doc doc-object-name doc-function-name">generate_objects_for_kpi_collection</span>


<a href="#mescal.visualizations.folium_viz_system.base_viz_system.FoliumObjectGenerator.generate_objects_for_kpi_collection" class="headerlink" title="Permanent link">&para;</a></h4>
<div class="doc-signature highlight"><pre><span></span><code><span class="nf">generate_objects_for_kpi_collection</span><span class="p">(</span><span class="n">kpi_collection</span><span class="p">:</span> <span class="n"><span title="mescal.kpis.KPICollection">KPICollection</span></span><span class="p">,</span> <span class="n">feature_group</span><span class="p">:</span> <span class="n"><span title="folium.FeatureGroup">FeatureGroup</span></span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n"><span title="folium.FeatureGroup">FeatureGroup</span></span>
</code></pre></div>

    <div class="doc doc-contents ">

        <p>Add KPI data to the map.</p>


            <details class="quote">
              <summary>Source code in <code>submodules/mescal/mescal/visualizations/folium_viz_system/base_viz_system.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">415</span>
<span class="normal">416</span>
<span class="normal">417</span>
<span class="normal">418</span>
<span class="normal">419</span>
<span class="normal">420</span>
<span class="normal">421</span>
<span class="normal">422</span>
<span class="normal">423</span>
<span class="normal">424</span>
<span class="normal">425</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span><span class="w"> </span><span class="nf">generate_objects_for_kpi_collection</span><span class="p">(</span>
        <span class="bp">self</span><span class="p">,</span>
        <span class="n">kpi_collection</span><span class="p">:</span> <span class="s1">&#39;KPICollection&#39;</span><span class="p">,</span>
        <span class="n">feature_group</span><span class="p">:</span> <span class="n">folium</span><span class="o">.</span><span class="n">FeatureGroup</span><span class="p">,</span>
        <span class="o">**</span><span class="n">kwargs</span>
<span class="p">)</span> <span class="o">-&gt;</span> <span class="n">folium</span><span class="o">.</span><span class="n">FeatureGroup</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Add KPI data to the map.&quot;&quot;&quot;</span>
    <span class="k">for</span> <span class="n">kpi</span> <span class="ow">in</span> <span class="n">kpi_collection</span><span class="p">:</span>
        <span class="n">data_item</span> <span class="o">=</span> <span class="n">KPIDataItem</span><span class="p">(</span><span class="n">kpi</span><span class="p">,</span> <span class="n">kpi_collection</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">generate</span><span class="p">(</span><span class="n">data_item</span><span class="p">,</span> <span class="n">feature_group</span><span class="p">)</span>
    <span class="k">return</span> <span class="n">feature_group</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h4 id="mescal.visualizations.folium_viz_system.base_viz_system.FoliumObjectGenerator.generate_object_for_single_kpi" class="doc doc-heading">
<code class="doc-symbol doc-symbol-heading doc-symbol-method"></code>            <span class="doc doc-object-name doc-function-name">generate_object_for_single_kpi</span>


<a href="#mescal.visualizations.folium_viz_system.base_viz_system.FoliumObjectGenerator.generate_object_for_single_kpi" class="headerlink" title="Permanent link">&para;</a></h4>
<div class="doc-signature highlight"><pre><span></span><code><span class="nf">generate_object_for_single_kpi</span><span class="p">(</span><span class="n">kpi</span><span class="p">:</span> <span class="n"><span title="mescal.kpis.KPI">KPI</span></span><span class="p">,</span> <span class="n">feature_group</span><span class="p">:</span> <span class="n"><span title="folium.FeatureGroup">FeatureGroup</span></span><span class="p">,</span> <span class="n">kpi_collection</span><span class="p">:</span> <span class="n"><span title="mescal.kpis.KPICollection">KPICollection</span></span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n"><span title="folium.FeatureGroup">FeatureGroup</span></span>
</code></pre></div>

    <div class="doc doc-contents ">

        <p>Add a single KPI to the map with optional context.</p>


            <details class="quote">
              <summary>Source code in <code>submodules/mescal/mescal/visualizations/folium_viz_system/base_viz_system.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">427</span>
<span class="normal">428</span>
<span class="normal">429</span>
<span class="normal">430</span>
<span class="normal">431</span>
<span class="normal">432</span>
<span class="normal">433</span>
<span class="normal">434</span>
<span class="normal">435</span>
<span class="normal">436</span>
<span class="normal">437</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span><span class="w"> </span><span class="nf">generate_object_for_single_kpi</span><span class="p">(</span>
        <span class="bp">self</span><span class="p">,</span>
        <span class="n">kpi</span><span class="p">:</span> <span class="s1">&#39;KPI&#39;</span><span class="p">,</span>
        <span class="n">feature_group</span><span class="p">:</span> <span class="n">folium</span><span class="o">.</span><span class="n">FeatureGroup</span><span class="p">,</span>
        <span class="n">kpi_collection</span><span class="p">:</span> <span class="s1">&#39;KPICollection&#39;</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
        <span class="o">**</span><span class="n">kwargs</span>
<span class="p">)</span> <span class="o">-&gt;</span> <span class="n">folium</span><span class="o">.</span><span class="n">FeatureGroup</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Add a single KPI to the map with optional context.&quot;&quot;&quot;</span>
    <span class="n">data_item</span> <span class="o">=</span> <span class="n">KPIDataItem</span><span class="p">(</span><span class="n">kpi</span><span class="p">,</span> <span class="n">kpi_collection</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">generate</span><span class="p">(</span><span class="n">data_item</span><span class="p">,</span> <span class="n">feature_group</span><span class="p">)</span>
    <span class="k">return</span> <span class="n">feature_group</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>



  </div>

    </div>

</div>




  </div>

    </div>

</div>












                
              </article>
            </div>
          
          
  <script>var tabs=__md_get("__tabs");if(Array.isArray(tabs))e:for(var set of document.querySelectorAll(".tabbed-set")){var labels=set.querySelector(".tabbed-labels");for(var tab of tabs)for(var label of labels.getElementsByTagName("label"))if(label.innerText.trim()===tab){var input=document.getElementById(label.htmlFor);input.checked=!0;continue e}}</script>

<script>var target=document.getElementById(location.hash.slice(1));target&&target.name&&(target.checked=target.name.startsWith("__tabbed_"))</script>
        </div>
        
      </main>
      
        <footer class="md-footer">
  
  <div class="md-footer-meta md-typeset">
    <div class="md-footer-meta__inner md-grid">
      <div class="md-copyright">
  
  
    Made with
    <a href="https://squidfunk.github.io/mkdocs-material/" target="_blank" rel="noopener">
      Material for MkDocs
    </a>
  
</div>
      
    </div>
  </div>
</footer>
      
    </div>
    <div class="md-dialog" data-md-component="dialog">
      <div class="md-dialog__inner md-typeset"></div>
    </div>
    
    
    
      
      <script id="__config" type="application/json">{"base": "../../../../..", "features": ["navigation.tabs", "content.tabs.link", "navigation.sections"], "search": "../../../../../assets/javascripts/workers/search.973d3a69.min.js", "tags": null, "translations": {"clipboard.copied": "Copied to clipboard", "clipboard.copy": "Copy to clipboard", "search.result.more.one": "1 more on this page", "search.result.more.other": "# more on this page", "search.result.none": "No matching documents", "search.result.one": "1 matching document", "search.result.other": "# matching documents", "search.result.placeholder": "Type to start searching", "search.result.term.missing": "Missing", "select.version": "Select version"}, "version": null}</script>
    
    
      <script src="../../../../../assets/javascripts/bundle.92b07e13.min.js"></script>
      
    
  </body>
</html>